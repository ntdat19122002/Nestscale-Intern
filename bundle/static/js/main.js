(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function uc(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function ac(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ze(r)?Ay(r):ac(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(ze(e))return e;if(xe(e))return e}}const Iy=/;(?![^(]*\))/g,Ty=/:([^]+)/,Sy=/\/\*.*?\*\//gs;function Ay(e){const t={};return e.replace(Sy,"").split(Iy).forEach(n=>{if(n){const r=n.split(Ty);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function cc(e){let t="";if(ze(e))t=e;else if(ee(e))for(let n=0;n<e.length;n++){const r=cc(e[n]);r&&(t+=r+" ")}else if(xe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Cy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ny=uc(Cy);function fd(e){return!!e||e===""}const cn=e=>ze(e)?e:e==null?"":ee(e)||xe(e)&&(e.toString===gd||!ne(e.toString))?JSON.stringify(e,hd,2):String(e),hd=(e,t)=>t&&t.__v_isRef?hd(e,t.value):Wr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:dd(t)?{[`Set(${t.size})`]:[...t.values()]}:xe(t)&&!ee(t)&&!md(t)?String(t):t,Ce={},Gr=[],Gt=()=>{},xy=()=>!1,Dy=/^on[^a-z]/,Qs=e=>Dy.test(e),lc=e=>e.startsWith("onUpdate:"),ct=Object.assign,fc=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ry=Object.prototype.hasOwnProperty,ce=(e,t)=>Ry.call(e,t),ee=Array.isArray,Wr=e=>Ys(e)==="[object Map]",dd=e=>Ys(e)==="[object Set]",ne=e=>typeof e=="function",ze=e=>typeof e=="string",hc=e=>typeof e=="symbol",xe=e=>e!==null&&typeof e=="object",pd=e=>xe(e)&&ne(e.then)&&ne(e.catch),gd=Object.prototype.toString,Ys=e=>gd.call(e),Oy=e=>Ys(e).slice(8,-1),md=e=>Ys(e)==="[object Object]",dc=e=>ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rs=uc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Py=/-(\w)/g,fn=Xs(e=>e.replace(Py,(t,n)=>n?n.toUpperCase():"")),ky=/\B([A-Z])/g,Sr=Xs(e=>e.replace(ky,"-$1").toLowerCase()),Js=Xs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bu=Xs(e=>e?`on${Js(e)}`:""),Wi=(e,t)=>!Object.is(e,t),is=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},ms=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},pa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let zl;const Ly=()=>zl||(zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Kt;class My{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Kt,!t&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Kt;try{return Kt=this,t()}finally{Kt=n}}}on(){Kt=this}off(){Kt=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Fy(e,t=Kt){t&&t.active&&t.effects.push(e)}function Uy(){return Kt}const pc=e=>{const t=new Set(e);return t.w=0,t.n=0,t},yd=e=>(e.w&$n)>0,vd=e=>(e.n&$n)>0,Vy=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=$n},jy=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];yd(i)&&!vd(i)?i.delete(e):t[n++]=i,i.w&=~$n,i.n&=~$n}t.length=n}},ga=new WeakMap;let Mi=0,$n=1;const ma=30;let Ht;const dr=Symbol(""),ya=Symbol("");class gc{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Fy(this,r)}run(){if(!this.active)return this.fn();let t=Ht,n=Vn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ht,Ht=this,Vn=!0,$n=1<<++Mi,Mi<=ma?Vy(this):Gl(this),this.fn()}finally{Mi<=ma&&jy(this),$n=1<<--Mi,Ht=this.parent,Vn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ht===this?this.deferStop=!0:this.active&&(Gl(this),this.onStop&&this.onStop(),this.active=!1)}}function Gl(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Vn=!0;const wd=[];function _i(){wd.push(Vn),Vn=!1}function Ei(){const e=wd.pop();Vn=e===void 0?!0:e}function It(e,t,n){if(Vn&&Ht){let r=ga.get(e);r||ga.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=pc()),bd(i)}}function bd(e,t){let n=!1;Mi<=ma?vd(e)||(e.n|=$n,n=!yd(e)):n=!e.has(Ht),n&&(e.add(Ht),Ht.deps.push(e))}function In(e,t,n,r,i,o){const s=ga.get(e);if(!s)return;let u=[];if(t==="clear")u=[...s.values()];else if(n==="length"&&ee(e)){const a=Number(r);s.forEach((c,l)=>{(l==="length"||l>=a)&&u.push(c)})}else switch(n!==void 0&&u.push(s.get(n)),t){case"add":ee(e)?dc(n)&&u.push(s.get("length")):(u.push(s.get(dr)),Wr(e)&&u.push(s.get(ya)));break;case"delete":ee(e)||(u.push(s.get(dr)),Wr(e)&&u.push(s.get(ya)));break;case"set":Wr(e)&&u.push(s.get(dr));break}if(u.length===1)u[0]&&va(u[0]);else{const a=[];for(const c of u)c&&a.push(...c);va(pc(a))}}function va(e,t){const n=ee(e)?e:[...e];for(const r of n)r.computed&&Wl(r);for(const r of n)r.computed||Wl(r)}function Wl(e,t){(e!==Ht||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const By=uc("__proto__,__v_isRef,__isVue"),_d=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(hc)),qy=mc(),$y=mc(!1,!0),Ky=mc(!0),Ql=Hy();function Hy(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=he(this);for(let o=0,s=this.length;o<s;o++)It(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(he)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){_i();const r=he(this)[t].apply(this,n);return Ei(),r}}),e}function zy(e){const t=he(this);return It(t,"has",e),t.hasOwnProperty(e)}function mc(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?av:Ad:t?Sd:Td).get(r))return r;const s=ee(r);if(!e){if(s&&ce(Ql,i))return Reflect.get(Ql,i,o);if(i==="hasOwnProperty")return zy}const u=Reflect.get(r,i,o);return(hc(i)?_d.has(i):By(i))||(e||It(r,"get",i),t)?u:st(u)?s&&dc(i)?u:u.value:xe(u)?e?Cd(u):_o(u):u}}const Gy=Ed(),Wy=Ed(!0);function Ed(e=!1){return function(n,r,i,o){let s=n[r];if(Zr(s)&&st(s)&&!st(i))return!1;if(!e&&(!ys(i)&&!Zr(i)&&(s=he(s),i=he(i)),!ee(n)&&st(s)&&!st(i)))return s.value=i,!0;const u=ee(n)&&dc(r)?Number(r)<n.length:ce(n,r),a=Reflect.set(n,r,i,o);return n===he(o)&&(u?Wi(i,s)&&In(n,"set",r,i):In(n,"add",r,i)),a}}function Qy(e,t){const n=ce(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&In(e,"delete",t,void 0),r}function Yy(e,t){const n=Reflect.has(e,t);return(!hc(t)||!_d.has(t))&&It(e,"has",t),n}function Xy(e){return It(e,"iterate",ee(e)?"length":dr),Reflect.ownKeys(e)}const Id={get:qy,set:Gy,deleteProperty:Qy,has:Yy,ownKeys:Xy},Jy={get:Ky,set(e,t){return!0},deleteProperty(e,t){return!0}},Zy=ct({},Id,{get:$y,set:Wy}),yc=e=>e,Zs=e=>Reflect.getPrototypeOf(e);function qo(e,t,n=!1,r=!1){e=e.__v_raw;const i=he(e),o=he(t);n||(t!==o&&It(i,"get",t),It(i,"get",o));const{has:s}=Zs(i),u=r?yc:n?bc:Qi;if(s.call(i,t))return u(e.get(t));if(s.call(i,o))return u(e.get(o));e!==i&&e.get(t)}function $o(e,t=!1){const n=this.__v_raw,r=he(n),i=he(e);return t||(e!==i&&It(r,"has",e),It(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function Ko(e,t=!1){return e=e.__v_raw,!t&&It(he(e),"iterate",dr),Reflect.get(e,"size",e)}function Yl(e){e=he(e);const t=he(this);return Zs(t).has.call(t,e)||(t.add(e),In(t,"add",e,e)),this}function Xl(e,t){t=he(t);const n=he(this),{has:r,get:i}=Zs(n);let o=r.call(n,e);o||(e=he(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?Wi(t,s)&&In(n,"set",e,t):In(n,"add",e,t),this}function Jl(e){const t=he(this),{has:n,get:r}=Zs(t);let i=n.call(t,e);i||(e=he(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&In(t,"delete",e,void 0),o}function Zl(){const e=he(this),t=e.size!==0,n=e.clear();return t&&In(e,"clear",void 0,void 0),n}function Ho(e,t){return function(r,i){const o=this,s=o.__v_raw,u=he(s),a=t?yc:e?bc:Qi;return!e&&It(u,"iterate",dr),s.forEach((c,l)=>r.call(i,a(c),a(l),o))}}function zo(e,t,n){return function(...r){const i=this.__v_raw,o=he(i),s=Wr(o),u=e==="entries"||e===Symbol.iterator&&s,a=e==="keys"&&s,c=i[e](...r),l=n?yc:t?bc:Qi;return!t&&It(o,"iterate",a?ya:dr),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:u?[l(f[0]),l(f[1])]:l(f),done:h}},[Symbol.iterator](){return this}}}}function Cn(e){return function(...t){return e==="delete"?!1:this}}function ev(){const e={get(o){return qo(this,o)},get size(){return Ko(this)},has:$o,add:Yl,set:Xl,delete:Jl,clear:Zl,forEach:Ho(!1,!1)},t={get(o){return qo(this,o,!1,!0)},get size(){return Ko(this)},has:$o,add:Yl,set:Xl,delete:Jl,clear:Zl,forEach:Ho(!1,!0)},n={get(o){return qo(this,o,!0)},get size(){return Ko(this,!0)},has(o){return $o.call(this,o,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:Ho(!0,!1)},r={get(o){return qo(this,o,!0,!0)},get size(){return Ko(this,!0)},has(o){return $o.call(this,o,!0)},add:Cn("add"),set:Cn("set"),delete:Cn("delete"),clear:Cn("clear"),forEach:Ho(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=zo(o,!1,!1),n[o]=zo(o,!0,!1),t[o]=zo(o,!1,!0),r[o]=zo(o,!0,!0)}),[e,n,t,r]}const[tv,nv,rv,iv]=ev();function vc(e,t){const n=t?e?iv:rv:e?nv:tv;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(ce(n,i)&&i in r?n:r,i,o)}const ov={get:vc(!1,!1)},sv={get:vc(!1,!0)},uv={get:vc(!0,!1)},Td=new WeakMap,Sd=new WeakMap,Ad=new WeakMap,av=new WeakMap;function cv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function lv(e){return e.__v_skip||!Object.isExtensible(e)?0:cv(Oy(e))}function _o(e){return Zr(e)?e:wc(e,!1,Id,ov,Td)}function fv(e){return wc(e,!1,Zy,sv,Sd)}function Cd(e){return wc(e,!0,Jy,uv,Ad)}function wc(e,t,n,r,i){if(!xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=lv(e);if(s===0)return e;const u=new Proxy(e,s===2?r:n);return i.set(e,u),u}function Qr(e){return Zr(e)?Qr(e.__v_raw):!!(e&&e.__v_isReactive)}function Zr(e){return!!(e&&e.__v_isReadonly)}function ys(e){return!!(e&&e.__v_isShallow)}function Nd(e){return Qr(e)||Zr(e)}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function xd(e){return ms(e,"__v_skip",!0),e}const Qi=e=>xe(e)?_o(e):e,bc=e=>xe(e)?Cd(e):e;function Dd(e){Vn&&Ht&&(e=he(e),bd(e.dep||(e.dep=pc())))}function Rd(e,t){e=he(e);const n=e.dep;n&&va(n)}function st(e){return!!(e&&e.__v_isRef===!0)}function un(e){return Od(e,!1)}function hv(e){return Od(e,!0)}function Od(e,t){return st(e)?e:new dv(e,t)}class dv{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:he(t),this._value=n?t:Qi(t)}get value(){return Dd(this),this._value}set value(t){const n=this.__v_isShallow||ys(t)||Zr(t);t=n?t:he(t),Wi(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Qi(t),Rd(this))}}function Yr(e){return st(e)?e.value:e}const pv={get:(e,t,n)=>Yr(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return st(i)&&!st(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Pd(e){return Qr(e)?e:new Proxy(e,pv)}var kd;class gv{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[kd]=!1,this._dirty=!0,this.effect=new gc(t,()=>{this._dirty||(this._dirty=!0,Rd(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=he(this);return Dd(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}kd="__v_isReadonly";function mv(e,t,n=!1){let r,i;const o=ne(e);return o?(r=e,i=Gt):(r=e.get,i=e.set),new gv(r,i,o||!i,n)}function jn(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){eu(o,t,n)}return i}function Ft(e,t,n,r){if(ne(e)){const o=jn(e,t,n,r);return o&&pd(o)&&o.catch(s=>{eu(s,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ft(e[o],t,n,r));return i}function eu(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,u=n;for(;o;){const c=o.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](e,s,u)===!1)return}o=o.parent}const a=t.appContext.config.errorHandler;if(a){jn(a,null,10,[e,s,u]);return}}yv(e,n,i,r)}function yv(e,t,n,r=!0){console.error(e)}let Yi=!1,wa=!1;const ot=[];let sn=0;const Xr=[];let yn=null,ir=0;const Ld=Promise.resolve();let _c=null;function Md(e){const t=_c||Ld;return e?t.then(this?e.bind(this):e):t}function vv(e){let t=sn+1,n=ot.length;for(;t<n;){const r=t+n>>>1;Xi(ot[r])<e?t=r+1:n=r}return t}function Ec(e){(!ot.length||!ot.includes(e,Yi&&e.allowRecurse?sn+1:sn))&&(e.id==null?ot.push(e):ot.splice(vv(e.id),0,e),Fd())}function Fd(){!Yi&&!wa&&(wa=!0,_c=Ld.then(Vd))}function wv(e){const t=ot.indexOf(e);t>sn&&ot.splice(t,1)}function bv(e){ee(e)?Xr.push(...e):(!yn||!yn.includes(e,e.allowRecurse?ir+1:ir))&&Xr.push(e),Fd()}function ef(e,t=Yi?sn+1:0){for(;t<ot.length;t++){const n=ot[t];n&&n.pre&&(ot.splice(t,1),t--,n())}}function Ud(e){if(Xr.length){const t=[...new Set(Xr)];if(Xr.length=0,yn){yn.push(...t);return}for(yn=t,yn.sort((n,r)=>Xi(n)-Xi(r)),ir=0;ir<yn.length;ir++)yn[ir]();yn=null,ir=0}}const Xi=e=>e.id==null?1/0:e.id,_v=(e,t)=>{const n=Xi(e)-Xi(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Vd(e){wa=!1,Yi=!0,ot.sort(_v);const t=Gt;try{for(sn=0;sn<ot.length;sn++){const n=ot[sn];n&&n.active!==!1&&jn(n,null,14)}}finally{sn=0,ot.length=0,Ud(),Yi=!1,_c=null,(ot.length||Xr.length)&&Vd()}}function Ev(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ce;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const l=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:h}=r[l]||Ce;h&&(i=n.map(d=>ze(d)?d.trim():d)),f&&(i=n.map(pa))}let u,a=r[u=Bu(t)]||r[u=Bu(fn(t))];!a&&o&&(a=r[u=Bu(Sr(t))]),a&&Ft(a,e,6,i);const c=r[u+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,Ft(c,e,6,i)}}function jd(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},u=!1;if(!ne(e)){const a=c=>{const l=jd(c,t,!0);l&&(u=!0,ct(s,l))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!o&&!u?(xe(e)&&r.set(e,null),null):(ee(o)?o.forEach(a=>s[a]=null):ct(s,o),xe(e)&&r.set(e,s),s)}function tu(e,t){return!e||!Qs(t)?!1:(t=t.slice(2).replace(/Once$/,""),ce(e,t[0].toLowerCase()+t.slice(1))||ce(e,Sr(t))||ce(e,t))}let Rt=null,Bd=null;function vs(e){const t=Rt;return Rt=e,Bd=e&&e.type.__scopeId||null,t}function Ji(e,t=Rt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ff(-1);const o=vs(t);let s;try{s=e(...i)}finally{vs(o),r._d&&ff(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function qu(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:u,attrs:a,emit:c,render:l,renderCache:f,data:h,setupState:d,ctx:g,inheritAttrs:m}=e;let w,v;const T=vs(e);try{if(n.shapeFlag&4){const M=i||r;w=on(l.call(M,M,f,o,d,h,g)),v=a}else{const M=t;w=on(M.length>1?M(o,{attrs:a,slots:u,emit:c}):M(o,null)),v=t.props?a:Iv(a)}}catch(M){ji.length=0,eu(M,e,1),w=Ee(Qt)}let E=w;if(v&&m!==!1){const M=Object.keys(v),{shapeFlag:$}=E;M.length&&$&7&&(s&&M.some(lc)&&(v=Tv(v,s)),E=Kn(E,v))}return n.dirs&&(E=Kn(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),w=E,vs(T),w}const Iv=e=>{let t;for(const n in e)(n==="class"||n==="style"||Qs(n))&&((t||(t={}))[n]=e[n]);return t},Tv=(e,t)=>{const n={};for(const r in e)(!lc(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Sv(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:u,patchFlag:a}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?tf(r,s,c):!!s;if(a&8){const l=t.dynamicProps;for(let f=0;f<l.length;f++){const h=l[f];if(s[h]!==r[h]&&!tu(c,h))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===s?!1:r?s?tf(r,s,c):!0:!!s;return!1}function tf(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!tu(n,o))return!0}return!1}function Av({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const Cv=e=>e.__isSuspense;function Nv(e,t){t&&t.pendingBranch?ee(e)?t.effects.push(...e):t.effects.push(e):bv(e)}function os(e,t){if(ke){let n=ke.provides;const r=ke.parent&&ke.parent.provides;r===n&&(n=ke.provides=Object.create(r)),n[e]=t}}function Wt(e,t,n=!1){const r=ke||Rt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ne(t)?t.call(r.proxy):t}}const Go={};function ss(e,t,n){return qd(e,t,n)}function qd(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=Ce){const u=Uy()===(ke==null?void 0:ke.scope)?ke:null;let a,c=!1,l=!1;if(st(e)?(a=()=>e.value,c=ys(e)):Qr(e)?(a=()=>e,r=!0):ee(e)?(l=!0,c=e.some(E=>Qr(E)||ys(E)),a=()=>e.map(E=>{if(st(E))return E.value;if(Qr(E))return ar(E);if(ne(E))return jn(E,u,2)})):ne(e)?t?a=()=>jn(e,u,2):a=()=>{if(!(u&&u.isUnmounted))return f&&f(),Ft(e,u,3,[h])}:a=Gt,t&&r){const E=a;a=()=>ar(E())}let f,h=E=>{f=v.onStop=()=>{jn(E,u,4)}},d;if(eo)if(h=Gt,t?n&&Ft(t,u,3,[a(),l?[]:void 0,h]):a(),i==="sync"){const E=T0();d=E.__watcherHandles||(E.__watcherHandles=[])}else return Gt;let g=l?new Array(e.length).fill(Go):Go;const m=()=>{if(v.active)if(t){const E=v.run();(r||c||(l?E.some((M,$)=>Wi(M,g[$])):Wi(E,g)))&&(f&&f(),Ft(t,u,3,[E,g===Go?void 0:l&&g[0]===Go?[]:g,h]),g=E)}else v.run()};m.allowRecurse=!!t;let w;i==="sync"?w=m:i==="post"?w=()=>wt(m,u&&u.suspense):(m.pre=!0,u&&(m.id=u.uid),w=()=>Ec(m));const v=new gc(a,w);t?n?m():g=v.run():i==="post"?wt(v.run.bind(v),u&&u.suspense):v.run();const T=()=>{v.stop(),u&&u.scope&&fc(u.scope.effects,v)};return d&&d.push(T),T}function xv(e,t,n){const r=this.proxy,i=ze(e)?e.includes(".")?$d(r,e):()=>r[e]:e.bind(r,r);let o;ne(t)?o=t:(o=t.handler,n=t);const s=ke;ei(this);const u=qd(i,o.bind(r),n);return s?ei(s):pr(),u}function $d(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function ar(e,t){if(!xe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),st(e))ar(e.value,t);else if(ee(e))for(let n=0;n<e.length;n++)ar(e[n],t);else if(dd(e)||Wr(e))e.forEach(n=>{ar(n,t)});else if(md(e))for(const n in e)ar(e[n],t);return e}function Dv(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wd(()=>{e.isMounted=!0}),Qd(()=>{e.isUnmounting=!0}),e}const Mt=[Function,Array],Rv={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Mt,onEnter:Mt,onAfterEnter:Mt,onEnterCancelled:Mt,onBeforeLeave:Mt,onLeave:Mt,onAfterLeave:Mt,onLeaveCancelled:Mt,onBeforeAppear:Mt,onAppear:Mt,onAfterAppear:Mt,onAppearCancelled:Mt},setup(e,{slots:t}){const n=m0(),r=Dv();let i;return()=>{const o=t.default&&Hd(t.default(),!0);if(!o||!o.length)return;let s=o[0];if(o.length>1){for(const m of o)if(m.type!==Qt){s=m;break}}const u=he(e),{mode:a}=u;if(r.isLeaving)return $u(s);const c=nf(s);if(!c)return $u(s);const l=ba(c,u,r,n);_a(c,l);const f=n.subTree,h=f&&nf(f);let d=!1;const{getTransitionKey:g}=c.type;if(g){const m=g();i===void 0?i=m:m!==i&&(i=m,d=!0)}if(h&&h.type!==Qt&&(!or(c,h)||d)){const m=ba(h,u,r,n);if(_a(h,m),a==="out-in")return r.isLeaving=!0,m.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},$u(s);a==="in-out"&&c.type!==Qt&&(m.delayLeave=(w,v,T)=>{const E=Kd(r,h);E[String(h.key)]=h,w._leaveCb=()=>{v(),w._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=T})}return s}}},Ov=Rv;function Kd(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ba(e,t,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:a,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:g,onBeforeAppear:m,onAppear:w,onAfterAppear:v,onAppearCancelled:T}=t,E=String(e.key),M=Kd(n,e),$=(te,_e)=>{te&&Ft(te,r,9,_e)},X=(te,_e)=>{const ye=_e[1];$(te,_e),ee(te)?te.every(qe=>qe.length<=1)&&ye():te.length<=1&&ye()},le={mode:o,persisted:s,beforeEnter(te){let _e=u;if(!n.isMounted)if(i)_e=m||u;else return;te._leaveCb&&te._leaveCb(!0);const ye=M[E];ye&&or(e,ye)&&ye.el._leaveCb&&ye.el._leaveCb(),$(_e,[te])},enter(te){let _e=a,ye=c,qe=l;if(!n.isMounted)if(i)_e=w||a,ye=v||c,qe=T||l;else return;let et=!1;const Vt=te._enterCb=gn=>{et||(et=!0,gn?$(qe,[te]):$(ye,[te]),le.delayedLeave&&le.delayedLeave(),te._enterCb=void 0)};_e?X(_e,[te,Vt]):Vt()},leave(te,_e){const ye=String(e.key);if(te._enterCb&&te._enterCb(!0),n.isUnmounting)return _e();$(f,[te]);let qe=!1;const et=te._leaveCb=Vt=>{qe||(qe=!0,_e(),Vt?$(g,[te]):$(d,[te]),te._leaveCb=void 0,M[ye]===e&&delete M[ye])};M[ye]=e,h?X(h,[te,et]):et()},clone(te){return ba(te,t,n,r)}};return le}function $u(e){if(nu(e))return e=Kn(e),e.children=null,e}function nf(e){return nu(e)?e.children?e.children[0]:void 0:e}function _a(e,t){e.shapeFlag&6&&e.component?_a(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Hd(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let s=e[o];const u=n==null?s.key:String(n)+String(s.key!=null?s.key:o);s.type===nt?(s.patchFlag&128&&i++,r=r.concat(Hd(s.children,t,u))):(t||s.type!==Qt)&&r.push(u!=null?Kn(s,{key:u}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function zd(e){return ne(e)?{setup:e,name:e.name}:e}const us=e=>!!e.type.__asyncLoader,nu=e=>e.type.__isKeepAlive;function Pv(e,t){Gd(e,"a",t)}function kv(e,t){Gd(e,"da",t)}function Gd(e,t,n=ke){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ru(t,r,n),n){let i=n.parent;for(;i&&i.parent;)nu(i.parent.vnode)&&Lv(r,t,n,i),i=i.parent}}function Lv(e,t,n,r){const i=ru(t,e,r,!0);Yd(()=>{fc(r[t],i)},n)}function ru(e,t,n=ke,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;_i(),ei(n);const u=Ft(t,n,e,s);return pr(),Ei(),u});return r?i.unshift(o):i.push(o),o}}const Sn=e=>(t,n=ke)=>(!eo||e==="sp")&&ru(e,(...r)=>t(...r),n),Mv=Sn("bm"),Wd=Sn("m"),Fv=Sn("bu"),Uv=Sn("u"),Qd=Sn("bum"),Yd=Sn("um"),Vv=Sn("sp"),jv=Sn("rtg"),Bv=Sn("rtc");function qv(e,t=ke){ru("ec",e,t)}function Ku(e,t){const n=Rt;if(n===null)return e;const r=uu(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,u,a,c=Ce]=t[o];s&&(ne(s)&&(s={mounted:s,updated:s}),s.deep&&ar(u),i.push({dir:s,instance:r,value:u,oldValue:void 0,arg:a,modifiers:c}))}return e}function Zn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);let a=u.dir[r];a&&(_i(),Ft(a,n,8,[e.el,u,e,t]),Ei())}}const Xd="components";function Ut(e,t){return Kv(Xd,e,!0,t)||e}const $v=Symbol();function Kv(e,t,n=!0,r=!1){const i=Rt||ke;if(i){const o=i.type;if(e===Xd){const u=_0(o,!1);if(u&&(u===t||u===fn(t)||u===Js(fn(t))))return o}const s=rf(i[e]||o[e],t)||rf(i.appContext[e],t);return!s&&r?o:s}}function rf(e,t){return e&&(e[t]||e[fn(t)]||e[Js(fn(t))])}function iu(e,t,n,r){let i;const o=n&&n[r];if(ee(e)||ze(e)){i=new Array(e.length);for(let s=0,u=e.length;s<u;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(xe(e))if(e[Symbol.iterator])i=Array.from(e,(s,u)=>t(s,u,void 0,o&&o[u]));else{const s=Object.keys(e);i=new Array(s.length);for(let u=0,a=s.length;u<a;u++){const c=s[u];i[u]=t(e[c],c,u,o&&o[u])}}else i=[];return n&&(n[r]=i),i}const Ea=e=>e?ap(e)?uu(e)||e.proxy:Ea(e.parent):null,Vi=ct(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ea(e.parent),$root:e=>Ea(e.root),$emit:e=>e.emit,$options:e=>Ic(e),$forceUpdate:e=>e.f||(e.f=()=>Ec(e.update)),$nextTick:e=>e.n||(e.n=Md.bind(e.proxy)),$watch:e=>xv.bind(e)}),Hu=(e,t)=>e!==Ce&&!e.__isScriptSetup&&ce(e,t),Hv={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:a}=e;let c;if(t[0]!=="$"){const d=s[t];if(d!==void 0)switch(d){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(Hu(r,t))return s[t]=1,r[t];if(i!==Ce&&ce(i,t))return s[t]=2,i[t];if((c=e.propsOptions[0])&&ce(c,t))return s[t]=3,o[t];if(n!==Ce&&ce(n,t))return s[t]=4,n[t];Ia&&(s[t]=0)}}const l=Vi[t];let f,h;if(l)return t==="$attrs"&&It(e,"get",t),l(e);if((f=u.__cssModules)&&(f=f[t]))return f;if(n!==Ce&&ce(n,t))return s[t]=4,n[t];if(h=a.config.globalProperties,ce(h,t))return h[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return Hu(i,t)?(i[t]=n,!0):r!==Ce&&ce(r,t)?(r[t]=n,!0):ce(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return!!n[s]||e!==Ce&&ce(e,s)||Hu(t,s)||(u=o[0])&&ce(u,s)||ce(r,s)||ce(Vi,s)||ce(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ce(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Ia=!0;function zv(e){const t=Ic(e),n=e.proxy,r=e.ctx;Ia=!1,t.beforeCreate&&of(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:u,provide:a,inject:c,created:l,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:m,deactivated:w,beforeDestroy:v,beforeUnmount:T,destroyed:E,unmounted:M,render:$,renderTracked:X,renderTriggered:le,errorCaptured:te,serverPrefetch:_e,expose:ye,inheritAttrs:qe,components:et,directives:Vt,filters:gn}=t;if(c&&Gv(c,r,null,e.appContext.config.unwrapInjectedRef),s)for(const Ie in s){const ve=s[Ie];ne(ve)&&(r[Ie]=ve.bind(n))}if(i){const Ie=i.call(n,n);xe(Ie)&&(e.data=_o(Ie))}if(Ia=!0,o)for(const Ie in o){const ve=o[Ie],jt=ne(ve)?ve.bind(n,n):ne(ve.get)?ve.get.bind(n,n):Gt,Jn=!ne(ve)&&ne(ve.set)?ve.set.bind(n):Gt,Bt=bt({get:jt,set:Jn});Object.defineProperty(r,Ie,{enumerable:!0,configurable:!0,get:()=>Bt.value,set:vt=>Bt.value=vt})}if(u)for(const Ie in u)Jd(u[Ie],r,n,Ie);if(a){const Ie=ne(a)?a.call(n):a;Reflect.ownKeys(Ie).forEach(ve=>{os(ve,Ie[ve])})}l&&of(l,e,"c");function Le(Ie,ve){ee(ve)?ve.forEach(jt=>Ie(jt.bind(n))):ve&&Ie(ve.bind(n))}if(Le(Mv,f),Le(Wd,h),Le(Fv,d),Le(Uv,g),Le(Pv,m),Le(kv,w),Le(qv,te),Le(Bv,X),Le(jv,le),Le(Qd,T),Le(Yd,M),Le(Vv,_e),ee(ye))if(ye.length){const Ie=e.exposed||(e.exposed={});ye.forEach(ve=>{Object.defineProperty(Ie,ve,{get:()=>n[ve],set:jt=>n[ve]=jt})})}else e.exposed||(e.exposed={});$&&e.render===Gt&&(e.render=$),qe!=null&&(e.inheritAttrs=qe),et&&(e.components=et),Vt&&(e.directives=Vt)}function Gv(e,t,n=Gt,r=!1){ee(e)&&(e=Ta(e));for(const i in e){const o=e[i];let s;xe(o)?"default"in o?s=Wt(o.from||i,o.default,!0):s=Wt(o.from||i):s=Wt(o),st(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:u=>s.value=u}):t[i]=s}}function of(e,t,n){Ft(ee(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Jd(e,t,n,r){const i=r.includes(".")?$d(n,r):()=>n[r];if(ze(e)){const o=t[e];ne(o)&&ss(i,o)}else if(ne(e))ss(i,e.bind(n));else if(xe(e))if(ee(e))e.forEach(o=>Jd(o,t,n,r));else{const o=ne(e.handler)?e.handler.bind(n):t[e.handler];ne(o)&&ss(i,o,e)}}function Ic(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,u=o.get(t);let a;return u?a=u:!i.length&&!n&&!r?a=t:(a={},i.length&&i.forEach(c=>ws(a,c,s,!0)),ws(a,t,s)),xe(t)&&o.set(t,a),a}function ws(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&ws(e,o,n,!0),i&&i.forEach(s=>ws(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const u=Wv[s]||n&&n[s];e[s]=u?u(e[s],t[s]):t[s]}return e}const Wv={data:sf,props:nr,emits:nr,methods:nr,computed:nr,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:nr,directives:nr,watch:Yv,provide:sf,inject:Qv};function sf(e,t){return t?e?function(){return ct(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function Qv(e,t){return nr(Ta(e),Ta(t))}function Ta(e){if(ee(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ht(e,t){return e?[...new Set([].concat(e,t))]:t}function nr(e,t){return e?ct(ct(Object.create(null),e),t):t}function Yv(e,t){if(!e)return t;if(!t)return e;const n=ct(Object.create(null),e);for(const r in t)n[r]=ht(e[r],t[r]);return n}function Xv(e,t,n,r=!1){const i={},o={};ms(o,su,1),e.propsDefaults=Object.create(null),Zd(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:fv(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Jv(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,u=he(i),[a]=e.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const l=e.vnode.dynamicProps;for(let f=0;f<l.length;f++){let h=l[f];if(tu(e.emitsOptions,h))continue;const d=t[h];if(a)if(ce(o,h))d!==o[h]&&(o[h]=d,c=!0);else{const g=fn(h);i[g]=Sa(a,u,g,d,e,!1)}else d!==o[h]&&(o[h]=d,c=!0)}}}else{Zd(e,t,i,o)&&(c=!0);let l;for(const f in u)(!t||!ce(t,f)&&((l=Sr(f))===f||!ce(t,l)))&&(a?n&&(n[f]!==void 0||n[l]!==void 0)&&(i[f]=Sa(a,u,f,void 0,e,!0)):delete i[f]);if(o!==u)for(const f in o)(!t||!ce(t,f))&&(delete o[f],c=!0)}c&&In(e,"set","$attrs")}function Zd(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,u;if(t)for(let a in t){if(rs(a))continue;const c=t[a];let l;i&&ce(i,l=fn(a))?!o||!o.includes(l)?n[l]=c:(u||(u={}))[l]=c:tu(e.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=he(n),c=u||Ce;for(let l=0;l<o.length;l++){const f=o[l];n[f]=Sa(i,a,f,c[f],e,!ce(c,f))}}return s}function Sa(e,t,n,r,i,o){const s=e[n];if(s!=null){const u=ce(s,"default");if(u&&r===void 0){const a=s.default;if(s.type!==Function&&ne(a)){const{propsDefaults:c}=i;n in c?r=c[n]:(ei(i),r=c[n]=a.call(null,t),pr())}else r=a}s[0]&&(o&&!u?r=!1:s[1]&&(r===""||r===Sr(n))&&(r=!0))}return r}function ep(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},u=[];let a=!1;if(!ne(e)){const l=f=>{a=!0;const[h,d]=ep(f,t,!0);ct(s,h),d&&u.push(...d)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!o&&!a)return xe(e)&&r.set(e,Gr),Gr;if(ee(o))for(let l=0;l<o.length;l++){const f=fn(o[l]);uf(f)&&(s[f]=Ce)}else if(o)for(const l in o){const f=fn(l);if(uf(f)){const h=o[l],d=s[f]=ee(h)||ne(h)?{type:h}:Object.assign({},h);if(d){const g=lf(Boolean,d.type),m=lf(String,d.type);d[0]=g>-1,d[1]=m<0||g<m,(g>-1||ce(d,"default"))&&u.push(f)}}}const c=[s,u];return xe(e)&&r.set(e,c),c}function uf(e){return e[0]!=="$"}function af(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function cf(e,t){return af(e)===af(t)}function lf(e,t){return ee(t)?t.findIndex(n=>cf(n,e)):ne(t)&&cf(t,e)?0:-1}const tp=e=>e[0]==="_"||e==="$stable",Tc=e=>ee(e)?e.map(on):[on(e)],Zv=(e,t,n)=>{if(t._n)return t;const r=Ji((...i)=>Tc(t(...i)),n);return r._c=!1,r},np=(e,t,n)=>{const r=e._ctx;for(const i in e){if(tp(i))continue;const o=e[i];if(ne(o))t[i]=Zv(i,o,r);else if(o!=null){const s=Tc(o);t[i]=()=>s}}},rp=(e,t)=>{const n=Tc(t);e.slots.default=()=>n},e0=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=he(t),ms(t,"_",n)):np(t,e.slots={})}else e.slots={},t&&rp(e,t);ms(e.slots,su,1)},t0=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=Ce;if(r.shapeFlag&32){const u=t._;u?n&&u===1?o=!1:(ct(i,t),!n&&u===1&&delete i._):(o=!t.$stable,np(t,i)),s=t}else t&&(rp(e,t),s={default:1});if(o)for(const u in i)!tp(u)&&!(u in s)&&delete i[u]};function ip(){return{app:null,config:{isNativeTag:xy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let n0=0;function r0(e,t){return function(r,i=null){ne(r)||(r=Object.assign({},r)),i!=null&&!xe(i)&&(i=null);const o=ip(),s=new Set;let u=!1;const a=o.app={_uid:n0++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:S0,get config(){return o.config},set config(c){},use(c,...l){return s.has(c)||(c&&ne(c.install)?(s.add(c),c.install(a,...l)):ne(c)&&(s.add(c),c(a,...l))),a},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),a},component(c,l){return l?(o.components[c]=l,a):o.components[c]},directive(c,l){return l?(o.directives[c]=l,a):o.directives[c]},mount(c,l,f){if(!u){const h=Ee(r,i);return h.appContext=o,l&&t?t(h,c):e(h,c,f),u=!0,a._container=c,c.__vue_app__=a,uu(h.component)||h.component.proxy}},unmount(){u&&(e(null,a._container),delete a._container.__vue_app__)},provide(c,l){return o.provides[c]=l,a}};return a}}function Aa(e,t,n,r,i=!1){if(ee(e)){e.forEach((h,d)=>Aa(h,t&&(ee(t)?t[d]:t),n,r,i));return}if(us(r)&&!i)return;const o=r.shapeFlag&4?uu(r.component)||r.component.proxy:r.el,s=i?null:o,{i:u,r:a}=e,c=t&&t.r,l=u.refs===Ce?u.refs={}:u.refs,f=u.setupState;if(c!=null&&c!==a&&(ze(c)?(l[c]=null,ce(f,c)&&(f[c]=null)):st(c)&&(c.value=null)),ne(a))jn(a,u,12,[s,l]);else{const h=ze(a),d=st(a);if(h||d){const g=()=>{if(e.f){const m=h?ce(f,a)?f[a]:l[a]:a.value;i?ee(m)&&fc(m,o):ee(m)?m.includes(o)||m.push(o):h?(l[a]=[o],ce(f,a)&&(f[a]=l[a])):(a.value=[o],e.k&&(l[e.k]=a.value))}else h?(l[a]=s,ce(f,a)&&(f[a]=s)):d&&(a.value=s,e.k&&(l[e.k]=s))};s?(g.id=-1,wt(g,n)):g()}}}const wt=Nv;function i0(e){return o0(e)}function o0(e,t){const n=Ly();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:u,createComment:a,setText:c,setElementText:l,parentNode:f,nextSibling:h,setScopeId:d=Gt,insertStaticContent:g}=e,m=(p,y,_,I=null,N=null,k=null,V=!1,P=null,L=!!y.dynamicChildren)=>{if(p===y)return;p&&!or(p,y)&&(I=F(p),vt(p,N,k,!0),p=null),y.patchFlag===-2&&(L=!1,y.dynamicChildren=null);const{type:D,ref:G,shapeFlag:q}=y;switch(D){case ou:w(p,y,_,I);break;case Qt:v(p,y,_,I);break;case zu:p==null&&T(y,_,I,V);break;case nt:et(p,y,_,I,N,k,V,P,L);break;default:q&1?$(p,y,_,I,N,k,V,P,L):q&6?Vt(p,y,_,I,N,k,V,P,L):(q&64||q&128)&&D.process(p,y,_,I,N,k,V,P,L,ae)}G!=null&&N&&Aa(G,p&&p.ref,k,y||p,!y)},w=(p,y,_,I)=>{if(p==null)r(y.el=u(y.children),_,I);else{const N=y.el=p.el;y.children!==p.children&&c(N,y.children)}},v=(p,y,_,I)=>{p==null?r(y.el=a(y.children||""),_,I):y.el=p.el},T=(p,y,_,I)=>{[p.el,p.anchor]=g(p.children,y,_,I,p.el,p.anchor)},E=({el:p,anchor:y},_,I)=>{let N;for(;p&&p!==y;)N=h(p),r(p,_,I),p=N;r(y,_,I)},M=({el:p,anchor:y})=>{let _;for(;p&&p!==y;)_=h(p),i(p),p=_;i(y)},$=(p,y,_,I,N,k,V,P,L)=>{V=V||y.type==="svg",p==null?X(y,_,I,N,k,V,P,L):_e(p,y,N,k,V,P,L)},X=(p,y,_,I,N,k,V,P)=>{let L,D;const{type:G,props:q,shapeFlag:W,transition:Z,dirs:oe}=p;if(L=p.el=s(p.type,k,q&&q.is,q),W&8?l(L,p.children):W&16&&te(p.children,L,null,I,N,k&&G!=="foreignObject",V,P),oe&&Zn(p,null,I,"created"),le(L,p,p.scopeId,V,I),q){for(const we in q)we!=="value"&&!rs(we)&&o(L,we,null,q[we],k,p.children,I,N,j);"value"in q&&o(L,"value",null,q.value),(D=q.onVnodeBeforeMount)&&nn(D,I,p)}oe&&Zn(p,null,I,"beforeMount");const Te=(!N||N&&!N.pendingBranch)&&Z&&!Z.persisted;Te&&Z.beforeEnter(L),r(L,y,_),((D=q&&q.onVnodeMounted)||Te||oe)&&wt(()=>{D&&nn(D,I,p),Te&&Z.enter(L),oe&&Zn(p,null,I,"mounted")},N)},le=(p,y,_,I,N)=>{if(_&&d(p,_),I)for(let k=0;k<I.length;k++)d(p,I[k]);if(N){let k=N.subTree;if(y===k){const V=N.vnode;le(p,V,V.scopeId,V.slotScopeIds,N.parent)}}},te=(p,y,_,I,N,k,V,P,L=0)=>{for(let D=L;D<p.length;D++){const G=p[D]=P?On(p[D]):on(p[D]);m(null,G,y,_,I,N,k,V,P)}},_e=(p,y,_,I,N,k,V)=>{const P=y.el=p.el;let{patchFlag:L,dynamicChildren:D,dirs:G}=y;L|=p.patchFlag&16;const q=p.props||Ce,W=y.props||Ce;let Z;_&&er(_,!1),(Z=W.onVnodeBeforeUpdate)&&nn(Z,_,y,p),G&&Zn(y,p,_,"beforeUpdate"),_&&er(_,!0);const oe=N&&y.type!=="foreignObject";if(D?ye(p.dynamicChildren,D,P,_,I,oe,k):V||ve(p,y,P,null,_,I,oe,k,!1),L>0){if(L&16)qe(P,y,q,W,_,I,N);else if(L&2&&q.class!==W.class&&o(P,"class",null,W.class,N),L&4&&o(P,"style",q.style,W.style,N),L&8){const Te=y.dynamicProps;for(let we=0;we<Te.length;we++){const Me=Te[we],qt=q[Me],Mr=W[Me];(Mr!==qt||Me==="value")&&o(P,Me,qt,Mr,N,p.children,_,I,j)}}L&1&&p.children!==y.children&&l(P,y.children)}else!V&&D==null&&qe(P,y,q,W,_,I,N);((Z=W.onVnodeUpdated)||G)&&wt(()=>{Z&&nn(Z,_,y,p),G&&Zn(y,p,_,"updated")},I)},ye=(p,y,_,I,N,k,V)=>{for(let P=0;P<y.length;P++){const L=p[P],D=y[P],G=L.el&&(L.type===nt||!or(L,D)||L.shapeFlag&70)?f(L.el):_;m(L,D,G,null,I,N,k,V,!0)}},qe=(p,y,_,I,N,k,V)=>{if(_!==I){if(_!==Ce)for(const P in _)!rs(P)&&!(P in I)&&o(p,P,_[P],null,V,y.children,N,k,j);for(const P in I){if(rs(P))continue;const L=I[P],D=_[P];L!==D&&P!=="value"&&o(p,P,D,L,V,y.children,N,k,j)}"value"in I&&o(p,"value",_.value,I.value)}},et=(p,y,_,I,N,k,V,P,L)=>{const D=y.el=p?p.el:u(""),G=y.anchor=p?p.anchor:u("");let{patchFlag:q,dynamicChildren:W,slotScopeIds:Z}=y;Z&&(P=P?P.concat(Z):Z),p==null?(r(D,_,I),r(G,_,I),te(y.children,_,G,N,k,V,P,L)):q>0&&q&64&&W&&p.dynamicChildren?(ye(p.dynamicChildren,W,_,N,k,V,P),(y.key!=null||N&&y===N.subTree)&&op(p,y,!0)):ve(p,y,_,G,N,k,V,P,L)},Vt=(p,y,_,I,N,k,V,P,L)=>{y.slotScopeIds=P,p==null?y.shapeFlag&512?N.ctx.activate(y,_,I,V,L):gn(y,_,I,N,k,V,L):Ri(p,y,L)},gn=(p,y,_,I,N,k,V)=>{const P=p.component=g0(p,I,N);if(nu(p)&&(P.ctx.renderer=ae),y0(P),P.asyncDep){if(N&&N.registerDep(P,Le),!p.el){const L=P.subTree=Ee(Qt);v(null,L,y,_)}return}Le(P,p,y,_,N,k,V)},Ri=(p,y,_)=>{const I=y.component=p.component;if(Sv(p,y,_))if(I.asyncDep&&!I.asyncResolved){Ie(I,y,_);return}else I.next=y,wv(I.update),I.update();else y.el=p.el,I.vnode=y},Le=(p,y,_,I,N,k,V)=>{const P=()=>{if(p.isMounted){let{next:G,bu:q,u:W,parent:Z,vnode:oe}=p,Te=G,we;er(p,!1),G?(G.el=oe.el,Ie(p,G,V)):G=oe,q&&is(q),(we=G.props&&G.props.onVnodeBeforeUpdate)&&nn(we,Z,G,oe),er(p,!0);const Me=qu(p),qt=p.subTree;p.subTree=Me,m(qt,Me,f(qt.el),F(qt),p,N,k),G.el=Me.el,Te===null&&Av(p,Me.el),W&&wt(W,N),(we=G.props&&G.props.onVnodeUpdated)&&wt(()=>nn(we,Z,G,oe),N)}else{let G;const{el:q,props:W}=y,{bm:Z,m:oe,parent:Te}=p,we=us(y);if(er(p,!1),Z&&is(Z),!we&&(G=W&&W.onVnodeBeforeMount)&&nn(G,Te,y),er(p,!0),q&&re){const Me=()=>{p.subTree=qu(p),re(q,p.subTree,p,N,null)};we?y.type.__asyncLoader().then(()=>!p.isUnmounted&&Me()):Me()}else{const Me=p.subTree=qu(p);m(null,Me,_,I,p,N,k),y.el=Me.el}if(oe&&wt(oe,N),!we&&(G=W&&W.onVnodeMounted)){const Me=y;wt(()=>nn(G,Te,Me),N)}(y.shapeFlag&256||Te&&us(Te.vnode)&&Te.vnode.shapeFlag&256)&&p.a&&wt(p.a,N),p.isMounted=!0,y=_=I=null}},L=p.effect=new gc(P,()=>Ec(D),p.scope),D=p.update=()=>L.run();D.id=p.uid,er(p,!0),D()},Ie=(p,y,_)=>{y.component=p;const I=p.vnode.props;p.vnode=y,p.next=null,Jv(p,y.props,I,_),t0(p,y.children,_),_i(),ef(),Ei()},ve=(p,y,_,I,N,k,V,P,L=!1)=>{const D=p&&p.children,G=p?p.shapeFlag:0,q=y.children,{patchFlag:W,shapeFlag:Z}=y;if(W>0){if(W&128){Jn(D,q,_,I,N,k,V,P,L);return}else if(W&256){jt(D,q,_,I,N,k,V,P,L);return}}Z&8?(G&16&&j(D,N,k),q!==D&&l(_,q)):G&16?Z&16?Jn(D,q,_,I,N,k,V,P,L):j(D,N,k,!0):(G&8&&l(_,""),Z&16&&te(q,_,I,N,k,V,P,L))},jt=(p,y,_,I,N,k,V,P,L)=>{p=p||Gr,y=y||Gr;const D=p.length,G=y.length,q=Math.min(D,G);let W;for(W=0;W<q;W++){const Z=y[W]=L?On(y[W]):on(y[W]);m(p[W],Z,_,null,N,k,V,P,L)}D>G?j(p,N,k,!0,!1,q):te(y,_,I,N,k,V,P,L,q)},Jn=(p,y,_,I,N,k,V,P,L)=>{let D=0;const G=y.length;let q=p.length-1,W=G-1;for(;D<=q&&D<=W;){const Z=p[D],oe=y[D]=L?On(y[D]):on(y[D]);if(or(Z,oe))m(Z,oe,_,null,N,k,V,P,L);else break;D++}for(;D<=q&&D<=W;){const Z=p[q],oe=y[W]=L?On(y[W]):on(y[W]);if(or(Z,oe))m(Z,oe,_,null,N,k,V,P,L);else break;q--,W--}if(D>q){if(D<=W){const Z=W+1,oe=Z<G?y[Z].el:I;for(;D<=W;)m(null,y[D]=L?On(y[D]):on(y[D]),_,oe,N,k,V,P,L),D++}}else if(D>W)for(;D<=q;)vt(p[D],N,k,!0),D++;else{const Z=D,oe=D,Te=new Map;for(D=oe;D<=W;D++){const Ct=y[D]=L?On(y[D]):on(y[D]);Ct.key!=null&&Te.set(Ct.key,D)}let we,Me=0;const qt=W-oe+1;let Mr=!1,$l=0;const Oi=new Array(qt);for(D=0;D<qt;D++)Oi[D]=0;for(D=Z;D<=q;D++){const Ct=p[D];if(Me>=qt){vt(Ct,N,k,!0);continue}let tn;if(Ct.key!=null)tn=Te.get(Ct.key);else for(we=oe;we<=W;we++)if(Oi[we-oe]===0&&or(Ct,y[we])){tn=we;break}tn===void 0?vt(Ct,N,k,!0):(Oi[tn-oe]=D+1,tn>=$l?$l=tn:Mr=!0,m(Ct,y[tn],_,null,N,k,V,P,L),Me++)}const Kl=Mr?s0(Oi):Gr;for(we=Kl.length-1,D=qt-1;D>=0;D--){const Ct=oe+D,tn=y[Ct],Hl=Ct+1<G?y[Ct+1].el:I;Oi[D]===0?m(null,tn,_,Hl,N,k,V,P,L):Mr&&(we<0||D!==Kl[we]?Bt(tn,_,Hl,2):we--)}}},Bt=(p,y,_,I,N=null)=>{const{el:k,type:V,transition:P,children:L,shapeFlag:D}=p;if(D&6){Bt(p.component.subTree,y,_,I);return}if(D&128){p.suspense.move(y,_,I);return}if(D&64){V.move(p,y,_,ae);return}if(V===nt){r(k,y,_);for(let q=0;q<L.length;q++)Bt(L[q],y,_,I);r(p.anchor,y,_);return}if(V===zu){E(p,y,_);return}if(I!==2&&D&1&&P)if(I===0)P.beforeEnter(k),r(k,y,_),wt(()=>P.enter(k),N);else{const{leave:q,delayLeave:W,afterLeave:Z}=P,oe=()=>r(k,y,_),Te=()=>{q(k,()=>{oe(),Z&&Z()})};W?W(k,oe,Te):Te()}else r(k,y,_)},vt=(p,y,_,I=!1,N=!1)=>{const{type:k,props:V,ref:P,children:L,dynamicChildren:D,shapeFlag:G,patchFlag:q,dirs:W}=p;if(P!=null&&Aa(P,null,_,p,!0),G&256){y.ctx.deactivate(p);return}const Z=G&1&&W,oe=!us(p);let Te;if(oe&&(Te=V&&V.onVnodeBeforeUnmount)&&nn(Te,y,p),G&6)A(p.component,_,I);else{if(G&128){p.suspense.unmount(_,I);return}Z&&Zn(p,null,y,"beforeUnmount"),G&64?p.type.remove(p,y,_,N,ae,I):D&&(k!==nt||q>0&&q&64)?j(D,y,_,!1,!0):(k===nt&&q&384||!N&&G&16)&&j(L,y,_),I&&Lr(p)}(oe&&(Te=V&&V.onVnodeUnmounted)||Z)&&wt(()=>{Te&&nn(Te,y,p),Z&&Zn(p,null,y,"unmounted")},_)},Lr=p=>{const{type:y,el:_,anchor:I,transition:N}=p;if(y===nt){Bo(_,I);return}if(y===zu){M(p);return}const k=()=>{i(_),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(p.shapeFlag&1&&N&&!N.persisted){const{leave:V,delayLeave:P}=N,L=()=>V(_,k);P?P(p.el,k,L):L()}else k()},Bo=(p,y)=>{let _;for(;p!==y;)_=h(p),i(p),p=_;i(y)},A=(p,y,_)=>{const{bum:I,scope:N,update:k,subTree:V,um:P}=p;I&&is(I),N.stop(),k&&(k.active=!1,vt(V,p,y,_)),P&&wt(P,y),wt(()=>{p.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},j=(p,y,_,I=!1,N=!1,k=0)=>{for(let V=k;V<p.length;V++)vt(p[V],y,_,I,N)},F=p=>p.shapeFlag&6?F(p.component.subTree):p.shapeFlag&128?p.suspense.next():h(p.anchor||p.el),z=(p,y,_)=>{p==null?y._vnode&&vt(y._vnode,null,null,!0):m(y._vnode||null,p,y,null,null,null,_),ef(),Ud(),y._vnode=p},ae={p:m,um:vt,m:Bt,r:Lr,mt:gn,mc:te,pc:ve,pbc:ye,n:F,o:e};let De,re;return t&&([De,re]=t(ae)),{render:z,hydrate:De,createApp:r0(z,De)}}function er({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function op(e,t,n=!1){const r=e.children,i=t.children;if(ee(r)&&ee(i))for(let o=0;o<r.length;o++){const s=r[o];let u=i[o];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[o]=On(i[o]),u.el=s.el),n||op(s,u)),u.type===ou&&(u.el=s.el)}}function s0(e){const t=e.slice(),n=[0];let r,i,o,s,u;const a=e.length;for(r=0;r<a;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=o+s>>1,e[n[u]]<c?o=u+1:s=u;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}const u0=e=>e.__isTeleport,nt=Symbol(void 0),ou=Symbol(void 0),Qt=Symbol(void 0),zu=Symbol(void 0),ji=[];let zt=null;function me(e=!1){ji.push(zt=e?null:[])}function a0(){ji.pop(),zt=ji[ji.length-1]||null}let Zi=1;function ff(e){Zi+=e}function sp(e){return e.dynamicChildren=Zi>0?zt||Gr:null,a0(),Zi>0&&zt&&zt.push(e),e}function be(e,t,n,r,i,o){return sp($e(e,t,n,r,i,o,!0))}function c0(e,t,n,r,i){return sp(Ee(e,t,n,r,i,!0))}function Ca(e){return e?e.__v_isVNode===!0:!1}function or(e,t){return e.type===t.type&&e.key===t.key}const su="__vInternal",up=({key:e})=>e??null,as=({ref:e,ref_key:t,ref_for:n})=>e!=null?ze(e)||st(e)||ne(e)?{i:Rt,r:e,k:t,f:!!n}:e:null;function $e(e,t=null,n=null,r=0,i=null,o=e===nt?0:1,s=!1,u=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&up(t),ref:t&&as(t),scopeId:Bd,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Rt};return u?(Ac(a,n),o&128&&e.normalize(a)):n&&(a.shapeFlag|=ze(n)?8:16),Zi>0&&!s&&zt&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&zt.push(a),a}const Ee=l0;function l0(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===$v)&&(e=Qt),Ca(e)){const u=Kn(e,t,!0);return n&&Ac(u,n),Zi>0&&!o&&zt&&(u.shapeFlag&6?zt[zt.indexOf(e)]=u:zt.push(u)),u.patchFlag|=-2,u}if(E0(e)&&(e=e.__vccOpts),t){t=f0(t);let{class:u,style:a}=t;u&&!ze(u)&&(t.class=cc(u)),xe(a)&&(Nd(a)&&!ee(a)&&(a=ct({},a)),t.style=ac(a))}const s=ze(e)?1:Cv(e)?128:u0(e)?64:xe(e)?4:ne(e)?2:0;return $e(e,t,n,r,i,s,o,!0)}function f0(e){return e?Nd(e)||su in e?ct({},e):e:null}function Kn(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=e,u=t?h0(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&up(u),ref:t&&t.ref?n&&i?ee(i)?i.concat(as(t)):[i,as(t)]:as(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==nt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Kn(e.ssContent),ssFallback:e.ssFallback&&Kn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function bs(e=" ",t=0){return Ee(ou,null,e,t)}function Sc(e="",t=!1){return t?(me(),c0(Qt,null,e)):Ee(Qt,null,e)}function on(e){return e==null||typeof e=="boolean"?Ee(Qt):ee(e)?Ee(nt,null,e.slice()):typeof e=="object"?On(e):Ee(ou,null,String(e))}function On(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Kn(e)}function Ac(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ee(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ac(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(su in t)?t._ctx=Rt:i===3&&Rt&&(Rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:Rt},n=32):(t=String(t),r&64?(n=16,t=[bs(t)]):n=8);e.children=t,e.shapeFlag|=n}function h0(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=cc([t.class,r.class]));else if(i==="style")t.style=ac([t.style,r.style]);else if(Qs(i)){const o=t[i],s=r[i];s&&o!==s&&!(ee(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function nn(e,t,n,r=null){Ft(e,t,7,[n,r])}const d0=ip();let p0=0;function g0(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||d0,o={uid:p0++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new My(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ep(r,i),emitsOptions:jd(r,i),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:r.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Ev.bind(null,o),e.ce&&e.ce(o),o}let ke=null;const m0=()=>ke||Rt,ei=e=>{ke=e,e.scope.on()},pr=()=>{ke&&ke.scope.off(),ke=null};function ap(e){return e.vnode.shapeFlag&4}let eo=!1;function y0(e,t=!1){eo=t;const{props:n,children:r}=e.vnode,i=ap(e);Xv(e,n,i,t),e0(e,r);const o=i?v0(e,t):void 0;return eo=!1,o}function v0(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=xd(new Proxy(e.ctx,Hv));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?b0(e):null;ei(e),_i();const o=jn(r,e,0,[e.props,i]);if(Ei(),pr(),pd(o)){if(o.then(pr,pr),t)return o.then(s=>{hf(e,s,t)}).catch(s=>{eu(s,e,0)});e.asyncDep=o}else hf(e,o,t)}else cp(e,t)}function hf(e,t,n){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:xe(t)&&(e.setupState=Pd(t)),cp(e,n)}let df;function cp(e,t,n){const r=e.type;if(!e.render){if(!t&&df&&!r.render){const i=r.template||Ic(e).template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:u,compilerOptions:a}=r,c=ct(ct({isCustomElement:o,delimiters:u},s),a);r.render=df(i,c)}}e.render=r.render||Gt}ei(e),_i(),zv(e),Ei(),pr()}function w0(e){return new Proxy(e.attrs,{get(t,n){return It(e,"get","$attrs"),t[n]}})}function b0(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=w0(e))},slots:e.slots,emit:e.emit,expose:t}}function uu(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Pd(xd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Vi)return Vi[n](e)},has(t,n){return n in t||n in Vi}}))}function _0(e,t=!0){return ne(e)?e.displayName||e.name:e.name||t&&e.__name}function E0(e){return ne(e)&&"__vccOpts"in e}const bt=(e,t)=>mv(e,t,eo);function lp(e,t,n){const r=arguments.length;return r===2?xe(t)&&!ee(t)?Ca(t)?Ee(e,null,[t]):Ee(e,t):Ee(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ca(n)&&(n=[n]),Ee(e,t,n))}const I0=Symbol(""),T0=()=>Wt(I0),S0="3.2.47",A0="http://www.w3.org/2000/svg",sr=typeof document<"u"?document:null,pf=sr&&sr.createElement("template"),C0={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?sr.createElementNS(A0,e):sr.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>sr.createTextNode(e),createComment:e=>sr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{pf.innerHTML=r?`<svg>${e}</svg>`:e;const u=pf.content;if(r){const a=u.firstChild;for(;a.firstChild;)u.appendChild(a.firstChild);u.removeChild(a)}t.insertBefore(u,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function N0(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function x0(e,t,n){const r=e.style,i=ze(n);if(n&&!i){if(t&&!ze(t))for(const o in t)n[o]==null&&Na(r,o,"");for(const o in n)Na(r,o,n[o])}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const gf=/\s*!important$/;function Na(e,t,n){if(ee(n))n.forEach(r=>Na(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=D0(e,t);gf.test(n)?e.setProperty(Sr(r),n.replace(gf,""),"important"):e[r]=n}}const mf=["Webkit","Moz","ms"],Gu={};function D0(e,t){const n=Gu[t];if(n)return n;let r=fn(t);if(r!=="filter"&&r in e)return Gu[t]=r;r=Js(r);for(let i=0;i<mf.length;i++){const o=mf[i]+r;if(o in e)return Gu[t]=o}return t}const yf="http://www.w3.org/1999/xlink";function R0(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(yf,t.slice(6,t.length)):e.setAttributeNS(yf,t,n);else{const o=Ny(t);n==null||o&&!fd(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function O0(e,t,n,r,i,o,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,o),e[t]=n??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n??"";(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}let u=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=fd(n):n==null&&a==="string"?(n="",u=!0):a==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function jr(e,t,n,r){e.addEventListener(t,n,r)}function P0(e,t,n,r){e.removeEventListener(t,n,r)}function k0(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[u,a]=L0(t);if(r){const c=o[t]=U0(r,i);jr(e,u,c,a)}else s&&(P0(e,u,s,a),o[t]=void 0)}}const vf=/(?:Once|Passive|Capture)$/;function L0(e){let t;if(vf.test(e)){t={};let r;for(;r=e.match(vf);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Sr(e.slice(2)),t]}let Wu=0;const M0=Promise.resolve(),F0=()=>Wu||(M0.then(()=>Wu=0),Wu=Date.now());function U0(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ft(V0(r,n.value),t,5,[r])};return n.value=e,n.attached=F0(),n}function V0(e,t){if(ee(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const wf=/^on[a-z]/,j0=(e,t,n,r,i=!1,o,s,u,a)=>{t==="class"?N0(e,r,i):t==="style"?x0(e,n,r):Qs(t)?lc(t)||k0(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):B0(e,t,r,i))?O0(e,t,r,o,s,u,a):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),R0(e,t,r,i))};function B0(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&wf.test(t)&&ne(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||wf.test(t)&&ze(n)?!1:t in e}const q0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ov.props;const bf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ee(t)?n=>is(t,n):t};function $0(e){e.target.composing=!0}function _f(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qu={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=bf(i);const o=r||i.props&&i.props.type==="number";jr(e,t?"change":"input",s=>{if(s.target.composing)return;let u=e.value;n&&(u=u.trim()),o&&(u=pa(u)),e._assign(u)}),n&&jr(e,"change",()=>{e.value=e.value.trim()}),t||(jr(e,"compositionstart",$0),jr(e,"compositionend",_f),jr(e,"change",_f))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=bf(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&pa(e.value)===t))return;const s=t??"";e.value!==s&&(e.value=s)}},K0=["ctrl","shift","alt","meta"],H0={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>K0.some(n=>e[`${n}Key`]&&!t.includes(n))},Ef=(e,t)=>(n,...r)=>{for(let i=0;i<t.length;i++){const o=H0[t[i]];if(o&&o(n,t))return}return e(n,...r)},z0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},G0=(e,t)=>n=>{if(!("key"in n))return;const r=Sr(n.key);if(t.some(i=>i===r||z0[i]===r))return e(n)},W0=ct({patchProp:j0},C0);let If;function Q0(){return If||(If=i0(W0))}const Y0=(...e)=>{const t=Q0().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=X0(r);if(!i)return;const o=t._component;!ne(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function X0(e){return ze(e)?document.querySelector(e):e}const pn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},J0={},Z0=$e("h1",null,"The Dojo Blog",-1);function ew(e,t,n,r,i,o){const s=Ut("router-link");return me(),be("header",null,[Z0,$e("nav",null,[Ee(s,{to:{name:"home"}},{default:Ji(()=>[bs("Home")]),_:1}),Ee(s,{to:{name:"Create"}},{default:Ji(()=>[bs("Create Post")]),_:1})])])}const tw=pn(J0,[["render",ew]]);const nw={__name:"App",setup(e){return(t,n)=>{const r=Ut("router-view");return me(),be(nt,null,[Ee(tw),Ee(r)],64)}}};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Br=typeof window<"u";function rw(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ge=Object.assign;function Yu(e,t){const n={};for(const r in t){const i=t[r];n[r]=Zt(i)?i.map(e):e(i)}return n}const Bi=()=>{},Zt=Array.isArray,iw=/\/$/,ow=e=>e.replace(iw,"");function Xu(e,t,n="/"){let r,i={},o="",s="";const u=t.indexOf("#");let a=t.indexOf("?");return u<a&&u>=0&&(a=-1),a>-1&&(r=t.slice(0,a),o=t.slice(a+1,u>-1?u:t.length),i=e(o)),u>-1&&(r=r||t.slice(0,u),s=t.slice(u,t.length)),r=cw(r??t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function sw(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Tf(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function uw(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ti(t.matched[r],n.matched[i])&&fp(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ti(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function fp(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!aw(e[n],t[n]))return!1;return!0}function aw(e,t){return Zt(e)?Sf(e,t):Zt(t)?Sf(t,e):e===t}function Sf(e,t){return Zt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function cw(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var to;(function(e){e.pop="pop",e.push="push"})(to||(to={}));var qi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(qi||(qi={}));function lw(e){if(!e)if(Br){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ow(e)}const fw=/^[^#]+#/;function hw(e,t){return e.replace(fw,"#")+t}function dw(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const au=()=>({left:window.pageXOffset,top:window.pageYOffset});function pw(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=dw(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Af(e,t){return(history.state?history.state.position-t:-1)+e}const xa=new Map;function gw(e,t){xa.set(e,t)}function mw(e){const t=xa.get(e);return xa.delete(e),t}let yw=()=>location.protocol+"//"+location.host;function hp(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let u=i.includes(e.slice(o))?e.slice(o).length:1,a=i.slice(u);return a[0]!=="/"&&(a="/"+a),Tf(a,"")}return Tf(n,e)+r+i}function vw(e,t,n,r){let i=[],o=[],s=null;const u=({state:h})=>{const d=hp(e,location),g=n.value,m=t.value;let w=0;if(h){if(n.value=d,t.value=h,s&&s===g){s=null;return}w=m?h.position-m.position:0}else r(d);i.forEach(v=>{v(n.value,g,{delta:w,type:to.pop,direction:w?w>0?qi.forward:qi.back:qi.unknown})})};function a(){s=n.value}function c(h){i.push(h);const d=()=>{const g=i.indexOf(h);g>-1&&i.splice(g,1)};return o.push(d),d}function l(){const{history:h}=window;h.state&&h.replaceState(ge({},h.state,{scroll:au()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",l),{pauseListeners:a,listen:c,destroy:f}}function Cf(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?au():null}}function ww(e){const{history:t,location:n}=window,r={value:hp(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,c,l){const f=e.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+a:yw()+e+a;try{t[l?"replaceState":"pushState"](c,"",h),i.value=c}catch(d){console.error(d),n[l?"replace":"assign"](h)}}function s(a,c){const l=ge({},t.state,Cf(i.value.back,a,i.value.forward,!0),c,{position:i.value.position});o(a,l,!0),r.value=a}function u(a,c){const l=ge({},i.value,t.state,{forward:a,scroll:au()});o(l.current,l,!0);const f=ge({},Cf(r.value,a,null),{position:l.position+1},c);o(a,f,!1),r.value=a}return{location:r,state:i,push:u,replace:s}}function bw(e){e=lw(e);const t=ww(e),n=vw(e,t.state,t.location,t.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=ge({location:"",base:e,go:r,createHref:hw.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function _w(e){return typeof e=="string"||e&&typeof e=="object"}function dp(e){return typeof e=="string"||typeof e=="symbol"}const Nn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},pp=Symbol("");var Nf;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Nf||(Nf={}));function ni(e,t){return ge(new Error,{type:e,[pp]:!0},t)}function mn(e,t){return e instanceof Error&&pp in e&&(t==null||!!(e.type&t))}const xf="[^/]+?",Ew={sensitive:!1,strict:!1,start:!0,end:!0},Iw=/[.+*?^${}()[\]/\\]/g;function Tw(e,t){const n=ge({},Ew,t),r=[];let i=n.start?"^":"";const o=[];for(const c of e){const l=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(Iw,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:m,optional:w,regexp:v}=h;o.push({name:g,repeatable:m,optional:w});const T=v||xf;if(T!==xf){d+=10;try{new RegExp(`(${T})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${g}" (${T}): `+M.message)}}let E=m?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;f||(E=w&&c.length<2?`(?:/${E})`:"/"+E),w&&(E+="?"),i+=E,d+=20,w&&(d+=-8),m&&(d+=-20),T===".*"&&(d+=-50)}l.push(d)}r.push(l)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function u(c){const l=c.match(s),f={};if(!l)return null;for(let h=1;h<l.length;h++){const d=l[h]||"",g=o[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function a(c){let l="",f=!1;for(const h of e){(!f||!l.endsWith("/"))&&(l+="/"),f=!1;for(const d of h)if(d.type===0)l+=d.value;else if(d.type===1){const{value:g,repeatable:m,optional:w}=d,v=g in c?c[g]:"";if(Zt(v)&&!m)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const T=Zt(v)?v.join("/"):v;if(!T)if(w)h.length<2&&(l.endsWith("/")?l=l.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);l+=T}}return l||"/"}return{re:s,score:r,keys:o,parse:u,stringify:a}}function Sw(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Aw(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=Sw(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(Df(r))return 1;if(Df(i))return-1}return i.length-r.length}function Df(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Cw={type:0,value:""},Nw=/[a-zA-Z0-9_]/;function xw(e){if(!e)return[[]];if(e==="/")return[[Cw]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${n})/"${c}": ${d}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let u=0,a,c="",l="";function f(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function h(){c+=a}for(;u<e.length;){if(a=e[u++],a==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:a==="/"?(c&&f(),s()):a===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:a==="("?n=2:Nw.test(a)?h():(f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&u--);break;case 2:a===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&u--,l="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),s(),i}function Dw(e,t,n){const r=Tw(xw(e.path),n),i=ge(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Rw(e,t){const n=[],r=new Map;t=Pf({strict:!1,end:!0,sensitive:!1},t);function i(l){return r.get(l)}function o(l,f,h){const d=!h,g=Ow(l);g.aliasOf=h&&h.record;const m=Pf(t,l),w=[g];if("alias"in l){const E=typeof l.alias=="string"?[l.alias]:l.alias;for(const M of E)w.push(ge({},g,{components:h?h.record.components:g.components,path:M,aliasOf:h?h.record:g}))}let v,T;for(const E of w){const{path:M}=E;if(f&&M[0]!=="/"){const $=f.record.path,X=$[$.length-1]==="/"?"":"/";E.path=f.record.path+(M&&X+M)}if(v=Dw(E,f,m),h?h.alias.push(v):(T=T||v,T!==v&&T.alias.push(v),d&&l.name&&!Of(v)&&s(l.name)),g.children){const $=g.children;for(let X=0;X<$.length;X++)o($[X],v,h&&h.children[X])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&a(v)}return T?()=>{s(T)}:Bi}function s(l){if(dp(l)){const f=r.get(l);f&&(r.delete(l),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(l);f>-1&&(n.splice(f,1),l.record.name&&r.delete(l.record.name),l.children.forEach(s),l.alias.forEach(s))}}function u(){return n}function a(l){let f=0;for(;f<n.length&&Aw(l,n[f])>=0&&(l.record.path!==n[f].record.path||!gp(l,n[f]));)f++;n.splice(f,0,l),l.record.name&&!Of(l)&&r.set(l.record.name,l)}function c(l,f){let h,d={},g,m;if("name"in l&&l.name){if(h=r.get(l.name),!h)throw ni(1,{location:l});m=h.record.name,d=ge(Rf(f.params,h.keys.filter(T=>!T.optional).map(T=>T.name)),l.params&&Rf(l.params,h.keys.map(T=>T.name))),g=h.stringify(d)}else if("path"in l)g=l.path,h=n.find(T=>T.re.test(g)),h&&(d=h.parse(g),m=h.record.name);else{if(h=f.name?r.get(f.name):n.find(T=>T.re.test(f.path)),!h)throw ni(1,{location:l,currentLocation:f});m=h.record.name,d=ge({},f.params,l.params),g=h.stringify(d)}const w=[];let v=h;for(;v;)w.unshift(v.record),v=v.parent;return{name:m,path:g,params:d,matched:w,meta:kw(w)}}return e.forEach(l=>o(l)),{addRoute:o,resolve:c,removeRoute:s,getRoutes:u,getRecordMatcher:i}}function Rf(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Ow(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Pw(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Pw(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Of(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function kw(e){return e.reduce((t,n)=>ge(t,n.meta),{})}function Pf(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function gp(e,t){return t.children.some(n=>n===e||gp(e,n))}const mp=/#/g,Lw=/&/g,Mw=/\//g,Fw=/=/g,Uw=/\?/g,yp=/\+/g,Vw=/%5B/g,jw=/%5D/g,vp=/%5E/g,Bw=/%60/g,wp=/%7B/g,qw=/%7C/g,bp=/%7D/g,$w=/%20/g;function Cc(e){return encodeURI(""+e).replace(qw,"|").replace(Vw,"[").replace(jw,"]")}function Kw(e){return Cc(e).replace(wp,"{").replace(bp,"}").replace(vp,"^")}function Da(e){return Cc(e).replace(yp,"%2B").replace($w,"+").replace(mp,"%23").replace(Lw,"%26").replace(Bw,"`").replace(wp,"{").replace(bp,"}").replace(vp,"^")}function Hw(e){return Da(e).replace(Fw,"%3D")}function zw(e){return Cc(e).replace(mp,"%23").replace(Uw,"%3F")}function Gw(e){return e==null?"":zw(e).replace(Mw,"%2F")}function _s(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Ww(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(yp," "),s=o.indexOf("="),u=_s(s<0?o:o.slice(0,s)),a=s<0?null:_s(o.slice(s+1));if(u in t){let c=t[u];Zt(c)||(c=t[u]=[c]),c.push(a)}else t[u]=a}return t}function kf(e){let t="";for(let n in e){const r=e[n];if(n=Hw(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Zt(r)?r.map(o=>o&&Da(o)):[r&&Da(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Qw(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Zt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Yw=Symbol(""),Lf=Symbol(""),cu=Symbol(""),Nc=Symbol(""),Ra=Symbol("");function Pi(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Pn(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,u)=>{const a=f=>{f===!1?u(ni(4,{from:n,to:t})):f instanceof Error?u(f):_w(f)?u(ni(2,{from:t,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},c=e.call(r&&r.instances[i],t,n,a);let l=Promise.resolve(c);e.length<3&&(l=l.then(a)),l.catch(f=>u(f))})}function Ju(e,t,n,r){const i=[];for(const o of e)for(const s in o.components){let u=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(Xw(u)){const c=(u.__vccOpts||u)[t];c&&i.push(Pn(c,n,r,o,s))}else{let a=u();i.push(()=>a.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const l=rw(c)?c.default:c;o.components[s]=l;const h=(l.__vccOpts||l)[t];return h&&Pn(h,n,r,o,s)()}))}}return i}function Xw(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Mf(e){const t=Wt(cu),n=Wt(Nc),r=bt(()=>t.resolve(Yr(e.to))),i=bt(()=>{const{matched:a}=r.value,{length:c}=a,l=a[c-1],f=n.matched;if(!l||!f.length)return-1;const h=f.findIndex(ti.bind(null,l));if(h>-1)return h;const d=Ff(a[c-2]);return c>1&&Ff(l)===d&&f[f.length-1].path!==d?f.findIndex(ti.bind(null,a[c-2])):h}),o=bt(()=>i.value>-1&&tb(n.params,r.value.params)),s=bt(()=>i.value>-1&&i.value===n.matched.length-1&&fp(n.params,r.value.params));function u(a={}){return eb(a)?t[Yr(e.replace)?"replace":"push"](Yr(e.to)).catch(Bi):Promise.resolve()}return{route:r,href:bt(()=>r.value.href),isActive:o,isExactActive:s,navigate:u}}const Jw=zd({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Mf,setup(e,{slots:t}){const n=_o(Mf(e)),{options:r}=Wt(cu),i=bt(()=>({[Uf(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Uf(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:lp("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Zw=Jw;function eb(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function tb(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Zt(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Ff(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Uf=(e,t,n)=>e??t??n,nb=zd({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Wt(Ra),i=bt(()=>e.route||r.value),o=Wt(Lf,0),s=bt(()=>{let c=Yr(o);const{matched:l}=i.value;let f;for(;(f=l[c])&&!f.components;)c++;return c}),u=bt(()=>i.value.matched[s.value]);os(Lf,bt(()=>s.value+1)),os(Yw,u),os(Ra,i);const a=un();return ss(()=>[a.value,u.value,e.name],([c,l,f],[h,d,g])=>{l&&(l.instances[f]=c,d&&d!==l&&c&&c===h&&(l.leaveGuards.size||(l.leaveGuards=d.leaveGuards),l.updateGuards.size||(l.updateGuards=d.updateGuards))),c&&l&&(!d||!ti(l,d)||!h)&&(l.enterCallbacks[f]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=i.value,l=e.name,f=u.value,h=f&&f.components[l];if(!h)return Vf(n.default,{Component:h,route:c});const d=f.props[l],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,w=lp(h,ge({},g,t,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(f.instances[l]=null)},ref:a}));return Vf(n.default,{Component:w,route:c})||w}}});function Vf(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const rb=nb;function ib(e){const t=Rw(e.routes,e),n=e.parseQuery||Ww,r=e.stringifyQuery||kf,i=e.history,o=Pi(),s=Pi(),u=Pi(),a=hv(Nn);let c=Nn;Br&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Yu.bind(null,A=>""+A),f=Yu.bind(null,Gw),h=Yu.bind(null,_s);function d(A,j){let F,z;return dp(A)?(F=t.getRecordMatcher(A),z=j):z=A,t.addRoute(z,F)}function g(A){const j=t.getRecordMatcher(A);j&&t.removeRoute(j)}function m(){return t.getRoutes().map(A=>A.record)}function w(A){return!!t.getRecordMatcher(A)}function v(A,j){if(j=ge({},j||a.value),typeof A=="string"){const p=Xu(n,A,j.path),y=t.resolve({path:p.path},j),_=i.createHref(p.fullPath);return ge(p,y,{params:h(y.params),hash:_s(p.hash),redirectedFrom:void 0,href:_})}let F;if("path"in A)F=ge({},A,{path:Xu(n,A.path,j.path).path});else{const p=ge({},A.params);for(const y in p)p[y]==null&&delete p[y];F=ge({},A,{params:f(A.params)}),j.params=f(j.params)}const z=t.resolve(F,j),ae=A.hash||"";z.params=l(h(z.params));const De=sw(r,ge({},A,{hash:Kw(ae),path:z.path})),re=i.createHref(De);return ge({fullPath:De,hash:ae,query:r===kf?Qw(A.query):A.query||{}},z,{redirectedFrom:void 0,href:re})}function T(A){return typeof A=="string"?Xu(n,A,a.value.path):ge({},A)}function E(A,j){if(c!==A)return ni(8,{from:j,to:A})}function M(A){return le(A)}function $(A){return M(ge(T(A),{replace:!0}))}function X(A){const j=A.matched[A.matched.length-1];if(j&&j.redirect){const{redirect:F}=j;let z=typeof F=="function"?F(A):F;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=T(z):{path:z},z.params={}),ge({query:A.query,hash:A.hash,params:"path"in z?{}:A.params},z)}}function le(A,j){const F=c=v(A),z=a.value,ae=A.state,De=A.force,re=A.replace===!0,p=X(F);if(p)return le(ge(T(p),{state:typeof p=="object"?ge({},ae,p.state):ae,force:De,replace:re}),j||F);const y=F;y.redirectedFrom=j;let _;return!De&&uw(r,z,F)&&(_=ni(16,{to:y,from:z}),Jn(z,z,!0,!1)),(_?Promise.resolve(_):_e(y,z)).catch(I=>mn(I)?mn(I,2)?I:jt(I):Ie(I,y,z)).then(I=>{if(I){if(mn(I,2))return le(ge({replace:re},T(I.to),{state:typeof I.to=="object"?ge({},ae,I.to.state):ae,force:De}),j||y)}else I=qe(y,z,!0,re,ae);return ye(y,z,I),I})}function te(A,j){const F=E(A,j);return F?Promise.reject(F):Promise.resolve()}function _e(A,j){let F;const[z,ae,De]=ob(A,j);F=Ju(z.reverse(),"beforeRouteLeave",A,j);for(const p of z)p.leaveGuards.forEach(y=>{F.push(Pn(y,A,j))});const re=te.bind(null,A,j);return F.push(re),Fr(F).then(()=>{F=[];for(const p of o.list())F.push(Pn(p,A,j));return F.push(re),Fr(F)}).then(()=>{F=Ju(ae,"beforeRouteUpdate",A,j);for(const p of ae)p.updateGuards.forEach(y=>{F.push(Pn(y,A,j))});return F.push(re),Fr(F)}).then(()=>{F=[];for(const p of A.matched)if(p.beforeEnter&&!j.matched.includes(p))if(Zt(p.beforeEnter))for(const y of p.beforeEnter)F.push(Pn(y,A,j));else F.push(Pn(p.beforeEnter,A,j));return F.push(re),Fr(F)}).then(()=>(A.matched.forEach(p=>p.enterCallbacks={}),F=Ju(De,"beforeRouteEnter",A,j),F.push(re),Fr(F))).then(()=>{F=[];for(const p of s.list())F.push(Pn(p,A,j));return F.push(re),Fr(F)}).catch(p=>mn(p,8)?p:Promise.reject(p))}function ye(A,j,F){for(const z of u.list())z(A,j,F)}function qe(A,j,F,z,ae){const De=E(A,j);if(De)return De;const re=j===Nn,p=Br?history.state:{};F&&(z||re?i.replace(A.fullPath,ge({scroll:re&&p&&p.scroll},ae)):i.push(A.fullPath,ae)),a.value=A,Jn(A,j,F,re),jt()}let et;function Vt(){et||(et=i.listen((A,j,F)=>{if(!Bo.listening)return;const z=v(A),ae=X(z);if(ae){le(ge(ae,{replace:!0}),z).catch(Bi);return}c=z;const De=a.value;Br&&gw(Af(De.fullPath,F.delta),au()),_e(z,De).catch(re=>mn(re,12)?re:mn(re,2)?(le(re.to,z).then(p=>{mn(p,20)&&!F.delta&&F.type===to.pop&&i.go(-1,!1)}).catch(Bi),Promise.reject()):(F.delta&&i.go(-F.delta,!1),Ie(re,z,De))).then(re=>{re=re||qe(z,De,!1),re&&(F.delta&&!mn(re,8)?i.go(-F.delta,!1):F.type===to.pop&&mn(re,20)&&i.go(-1,!1)),ye(z,De,re)}).catch(Bi)}))}let gn=Pi(),Ri=Pi(),Le;function Ie(A,j,F){jt(A);const z=Ri.list();return z.length?z.forEach(ae=>ae(A,j,F)):console.error(A),Promise.reject(A)}function ve(){return Le&&a.value!==Nn?Promise.resolve():new Promise((A,j)=>{gn.add([A,j])})}function jt(A){return Le||(Le=!A,Vt(),gn.list().forEach(([j,F])=>A?F(A):j()),gn.reset()),A}function Jn(A,j,F,z){const{scrollBehavior:ae}=e;if(!Br||!ae)return Promise.resolve();const De=!F&&mw(Af(A.fullPath,0))||(z||!F)&&history.state&&history.state.scroll||null;return Md().then(()=>ae(A,j,De)).then(re=>re&&pw(re)).catch(re=>Ie(re,A,j))}const Bt=A=>i.go(A);let vt;const Lr=new Set,Bo={currentRoute:a,listening:!0,addRoute:d,removeRoute:g,hasRoute:w,getRoutes:m,resolve:v,options:e,push:M,replace:$,go:Bt,back:()=>Bt(-1),forward:()=>Bt(1),beforeEach:o.add,beforeResolve:s.add,afterEach:u.add,onError:Ri.add,isReady:ve,install(A){const j=this;A.component("RouterLink",Zw),A.component("RouterView",rb),A.config.globalProperties.$router=j,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>Yr(a)}),Br&&!vt&&a.value===Nn&&(vt=!0,M(i.location).catch(ae=>{}));const F={};for(const ae in Nn)F[ae]=bt(()=>a.value[ae]);A.provide(cu,j),A.provide(Nc,_o(F)),A.provide(Ra,a);const z=A.unmount;Lr.add(A),A.unmount=function(){Lr.delete(A),Lr.size<1&&(c=Nn,et&&et(),et=null,a.value=Nn,vt=!1,Le=!1),z()}}};return Bo}function Fr(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function ob(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const u=t.matched[s];u&&(e.matched.find(c=>ti(c,u))?r.push(u):n.push(u));const a=e.matched[s];a&&(t.matched.find(c=>ti(c,a))||i.push(a))}return[n,r,i]}function _p(){return Wt(cu)}function sb(){return Wt(Nc)}const ub={props:["post"],setup(e){return{snippet:bt(()=>e.post.body.substring(0,100)+"....")}}},ab={class:"post"};function cb(e,t,n,r,i,o){const s=Ut("router-link");return me(),be("div",ab,[Ee(s,{to:{name:"Details",params:{id:n.post.id}}},{default:Ji(()=>[$e("h3",null,cn(n.post.title),1)]),_:1},8,["to"]),$e("p",null,cn(r.snippet),1),(me(!0),be(nt,null,iu(n.post.tags,u=>(me(),be("span",{key:u}," #"+cn(u),1))),128))])}const lb=pn(ub,[["render",cb]]),fb={components:{SinglePost:lb},props:["posts"]},hb={class:"post-list"};function db(e,t,n,r,i,o){const s=Ut("SinglePost");return me(),be("div",hb,[(me(!0),be(nt,null,iu(n.posts,u=>(me(),be("div",{key:u.id},[Ee(s,{post:u},null,8,["post"])]))),128))])}const Ep=pn(fb,[["render",db]]);var Oa=function(e,t){return Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Oa(e,t)};function Q(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Oa(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var no=function(){return no=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},no.apply(this,arguments)};function C(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(l){try{c(r.next(l))}catch(f){s(f)}}function a(l){try{c(r.throw(l))}catch(f){s(f)}}function c(l){l.done?o(l.value):i(l.value).then(u,a)}c((r=r.apply(e,t||[])).next())})}function S(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(c){return function(l){return a([c,l])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Zu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wo(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Pe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ip=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},pb=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){var o=e[n++],s=e[n++],u=e[n++],a=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(a&1023))}else{var o=e[n++],s=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},gb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,u=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=o>>2,f=(o&3)<<4|u>>4,h=(u&15)<<2|c>>6,d=c&63;a||(d=64,s||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ip(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):pb(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length,u=s?n[e.charAt(i)]:0;++i;var a=i<e.length,c=a?n[e.charAt(i)]:64;++i;var l=i<e.length,f=l?n[e.charAt(i)]:64;if(++i,o==null||u==null||c==null||f==null)throw Error();var h=o<<2|u>>4;if(r.push(h),c!==64){var d=u<<4&240|c>>2;if(r.push(d),f!==64){var g=c<<6&192|f;r.push(g)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},mb=function(e){var t=Ip(e);return gb.encodeByteArray(t,!0)},jf=function(e){return mb(e).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(e){return ro(void 0,e)}function ro(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!vb(r)||(e[r]=ro(e[r],t[r]));return e}function vb(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wb=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=no({iss:"https://securetoken.google.com/"+r,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[jf(JSON.stringify(n)),jf(JSON.stringify(s)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _b(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vr())}function Tp(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Eb(){return typeof self=="object"&&self.self===self}function Ib(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Tb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sb(){return vr().indexOf("Electron/")>=0}function Ab(){var e=vr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Cb(){return vr().indexOf("MSAppHost/")>=0}function Nb(){return!Tp()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xb="FirebaseError",Db=function(e){Q(t,e);function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=xb,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,xc.prototype.create),o}return t}(Error),xc=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},o=this.service+"/"+t,s=this.errors[t],u=s?Rb(s,i):"Error",a=this.serviceName+": "+u+" ("+o+").",c=new Db(o,a,i);return c},e}();function Rb(e,t){return e.replace(Ob,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var Ob=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Pb(e,t){var n=new kb(e,t);return n.subscribe.bind(n)}var kb=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,o;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Lb(t,["next","error","complete"])?o=t:o={next:t,error:n,complete:r},o.next===void 0&&(o.next=ea),o.error===void 0&&(o.error=ea),o.complete===void 0&&(o.complete=ea);var s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?o.error(i.finalError):o.complete()}catch{}}),this.observers.push(o),s},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function Lb(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function ea(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(e){return e&&e._delegate?e._delegate:e}var lu=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mb=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(t){var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new wb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n,r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service "+this.name+" is not available")}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,!!this.shouldAutoInitialize()){if(Ub(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}try{for(var i=Zu(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Wo(o.value,2),u=s[0],a=s[1],c=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:c});a.resolve(l)}catch{}}}catch(f){n={error:f}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}},e.prototype.clearInstance=function(t){t===void 0&&(t=rr),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Pe(Pe([],Wo(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}))),Wo(t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()}))))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.isInitialized=function(t){return t===void 0&&(t=rr),this.instances.has(t)},e.prototype.getOptions=function(t){return t===void 0&&(t=rr),this.instancesOptions.get(t)||{}},e.prototype.initialize=function(t){var n,r;t===void 0&&(t={});var i=t.options,o=i===void 0?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var a=Zu(this.instancesDeferred.entries()),c=a.next();!c.done;c=a.next()){var l=Wo(c.value,2),f=l[0],h=l[1],d=this.normalizeInstanceIdentifier(f);s===d&&h.resolve(u)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return u},e.prototype.onInit=function(t,n){var r,i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);var s=this.instances.get(i);return s&&t(s,i),function(){o.delete(t)}},e.prototype.invokeOnInitCallbacks=function(t,n){var r,i,o=this.onInitCallbacks.get(n);if(o)try{for(var s=Zu(o),u=s.next();!u.done;u=s.next()){var a=u.value;try{a(t,n)}catch{}}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.getOrInitializeService=function(t){var n=t.instanceIdentifier,r=t.options,i=r===void 0?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Fb(n),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null},e.prototype.normalizeInstanceIdentifier=function(t){return t===void 0&&(t=rr),this.component?this.component.multipleInstances?t:rr:t},e.prototype.shouldAutoInitialize=function(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"},e}();function Fb(e){return e===rr?void 0:e}function Ub(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vb=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new Mb(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function $t(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr,Dc=[],fe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(fe||(fe={}));var Sp={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},jb=fe.INFO,Bb=(tr={},tr[fe.DEBUG]="log",tr[fe.VERBOSE]="log",tr[fe.INFO]="info",tr[fe.WARN]="warn",tr[fe.ERROR]="error",tr),qb=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),o=Bb[t];if(o)console[o].apply(console,$t(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Ap=function(){function e(t){this.name=t,this._logLevel=jb,this._logHandler=qb,this._userLogHandler=null,Dc.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in fe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?Sp[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,fe.DEBUG],t)),this._logHandler.apply(this,$t([this,fe.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,fe.VERBOSE],t)),this._logHandler.apply(this,$t([this,fe.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,fe.INFO],t)),this._logHandler.apply(this,$t([this,fe.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,fe.WARN],t)),this._logHandler.apply(this,$t([this,fe.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,$t([this,fe.ERROR],t)),this._logHandler.apply(this,$t([this,fe.ERROR],t))},e}();function $b(e){Dc.forEach(function(t){t.setLogLevel(e)})}function Kb(e,t){for(var n=function(s){var u=null;t&&t.level&&(u=Sp[t.level]),e===null?s.userLogHandler=null:s.userLogHandler=function(a,c){for(var l=[],f=2;f<arguments.length;f++)l[f-2]=arguments[f];var h=l.map(function(d){if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(function(d){return d}).join(" ");c>=(u??a.logLevel)&&e({level:fe[c].toLowerCase(),message:h,args:l,type:a.name})}},r=0,i=Dc;r<i.length;r++){var o=i[r];n(o)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Hb=(xn={},xn["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",xn["bad-app-name"]="Illegal App name: '{$appName}",xn["duplicate-app"]="Firebase App named '{$appName}' already exists",xn["app-deleted"]="Firebase App named '{$appName}' already deleted",xn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",xn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",xn),qr=new xc("app","Firebase",Hb),Cp="@firebase/app",zb="0.6.30",Gb="@firebase/analytics",Wb="@firebase/app-check",Qb="@firebase/auth",Yb="@firebase/database",Xb="@firebase/functions",Jb="@firebase/installations",Zb="@firebase/messaging",e_="@firebase/performance",t_="@firebase/remote-config",n_="@firebase/storage",r_="@firebase/firestore",i_="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,Es="[DEFAULT]",o_=(tt={},tt[Cp]="fire-core",tt[Gb]="fire-analytics",tt[Wb]="fire-app-check",tt[Qb]="fire-auth",tt[Yb]="fire-rtdb",tt[Xb]="fire-fn",tt[Jb]="fire-iid",tt[Zb]="fire-fcm",tt[e_]="fire-perf",tt[t_]="fire-rc",tt[n_]="fire-gcs",tt[r_]="fire-fst",tt["fire-js"]="fire-js",tt[i_]="fire-js-all",tt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ri=new Ap("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cs=function(){function e(t,n,r){var i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=yb(t),this.container=new Vb(n.name),this._addComponent(new lu("app",function(){return i},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(o){return i._addComponent(o)})}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){var r;n===void 0&&(n=Es),this.checkDestroyed_();var i=this.container.getProvider(t);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=Es),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){ri.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw qr.create("app-deleted",{appName:this.name_})},e}();cs.prototype.name&&cs.prototype.options||cs.prototype.delete||console.log("dc");var s_="8.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(e){var t={},n=new Map,r={__esModule:!0,initializeApp:s,app:o,registerVersion:c,setLogLevel:$b,onLog:l,apps:null,SDK_VERSION:s_,INTERNAL:{registerComponent:a,removeApp:i,components:n,useAsService:f}};r.default=r,Object.defineProperty(r,"apps",{get:u});function i(h){delete t[h]}function o(h){if(h=h||Es,!Bf(t,h))throw qr.create("no-app",{appName:h});return t[h]}o.App=e;function s(h,d){if(d===void 0&&(d={}),typeof d!="object"||d===null){var g=d;d={name:g}}var m=d;m.name===void 0&&(m.name=Es);var w=m.name;if(typeof w!="string"||!w)throw qr.create("bad-app-name",{appName:String(w)});if(Bf(t,w))throw qr.create("duplicate-app",{appName:w});var v=new e(h,m,r);return t[w]=v,v}function u(){return Object.keys(t).map(function(h){return t[h]})}function a(h){var d=h.name;if(n.has(d))return ri.debug("There were multiple attempts to register component "+d+"."),h.type==="PUBLIC"?r[d]:null;if(n.set(d,h),h.type==="PUBLIC"){var g=function(T){if(T===void 0&&(T=o()),typeof T[d]!="function")throw qr.create("invalid-app-argument",{appName:d});return T[d]()};h.serviceProps!==void 0&&ro(g,h.serviceProps),r[d]=g,e.prototype[d]=function(){for(var T=[],E=0;E<arguments.length;E++)T[E]=arguments[E];var M=this._getService.bind(this,d);return M.apply(this,h.multipleInstances?T:[])}}for(var m=0,w=Object.keys(t);m<w.length;m++){var v=w[m];t[v]._addComponent(h)}return h.type==="PUBLIC"?r[d]:null}function c(h,d,g){var m,w=(m=o_[h])!==null&&m!==void 0?m:h;g&&(w+="-"+g);var v=w.match(/\s|\//),T=d.match(/\s|\//);if(v||T){var E=['Unable to register library "'+w+'" with version "'+d+'":'];v&&E.push('library name "'+w+'" contains illegal characters (whitespace or "/")'),v&&T&&E.push("and"),T&&E.push('version name "'+d+'" contains illegal characters (whitespace or "/")'),ri.warn(E.join(" "));return}a(new lu(w+"-version",function(){return{library:w,version:d}},"VERSION"))}function l(h,d){if(h!==null&&typeof h!="function")throw qr.create("invalid-log-argument");Kb(h,d)}function f(h,d){if(d==="serverAuth")return null;var g=d;return g}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var e=u_(cs);e.INTERNAL=no(no({},e.INTERNAL),{createFirebaseNamespace:Np,extendNamespace:t,createSubscribe:Pb,ErrorFactory:xc,deepExtend:ro});function t(n){ro(e,n)}return e}var Rc=Np();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a_=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(c_(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function c_(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(e,t){e.INTERNAL.registerComponent(new lu("platform-logger",function(n){return new a_(n)},"PRIVATE")),e.registerVersion(Cp,zb,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Eb()&&self.firebase!==void 0){ri.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var qf=self.firebase.SDK_VERSION;qf&&qf.indexOf("LITE")>=0&&ri.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var f_=Rc.initializeApp;Rc.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Tp()&&ri.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),f_.apply(void 0,e)};var Ar=Rc;l_(Ar);var h_="firebase",xp="8.10.1";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.registerVersion(h_,xp,"app");Ar.SDK_VERSION=xp;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pa=function(e,t){return Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Pa(e,t)};function d_(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Pa(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Dp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},B,Oc=Oc||{},J=p_||self;function Is(){}function ka(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Eo(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function g_(e){return Object.prototype.hasOwnProperty.call(e,ta)&&e[ta]||(e[ta]=++m_)}var ta="closure_uid_"+(1e9*Math.random()>>>0),m_=0;function y_(e,t,n){return e.call.apply(e.bind,arguments)}function v_(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function Xe(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Xe=y_:Xe=v_,Xe.apply(null,arguments)}function Qo(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function Ze(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(r,i,o){for(var s=Array(arguments.length-2),u=2;u<arguments.length;u++)s[u-2]=arguments[u];return t.prototype[i].apply(r,s)}}function Gn(){this.s=this.s,this.o=this.o}var w_=0;Gn.prototype.s=!1;Gn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),w_!=0)&&g_(this)};Gn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rp=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Op=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function b_(e){e:{for(var t=fE,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function $f(e){return Array.prototype.concat.apply([],arguments)}function Pc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ts(e){return/^[\s\xa0]*$/.test(e)}var Kf=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pt(e,t){return e.indexOf(t)!=-1}function na(e,t){return e<t?-1:e>t?1:0}var gt;e:{var Hf=J.navigator;if(Hf){var zf=Hf.userAgent;if(zf){gt=zf;break e}}gt=""}function kc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Pp(e){var t={};for(var n in e)t[n]=e[n];return t}var Gf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kp(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var o=0;o<Gf.length;o++)n=Gf[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Lc(e){return Lc[" "](e),e}Lc[" "]=Is;function __(e){var t=T_;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}var E_=pt(gt,"Opera"),ii=pt(gt,"Trident")||pt(gt,"MSIE"),Lp=pt(gt,"Edge"),La=Lp||ii,Mp=pt(gt,"Gecko")&&!(pt(gt.toLowerCase(),"webkit")&&!pt(gt,"Edge"))&&!(pt(gt,"Trident")||pt(gt,"MSIE"))&&!pt(gt,"Edge"),I_=pt(gt.toLowerCase(),"webkit")&&!pt(gt,"Edge");function Fp(){var e=J.document;return e?e.documentMode:void 0}var Ss;e:{var ra="",ia=function(){var e=gt;if(Mp)return/rv:([^\);]+)(\)|;)/.exec(e);if(Lp)return/Edge\/([\d\.]+)/.exec(e);if(ii)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(I_)return/WebKit\/(\S+)/.exec(e);if(E_)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(ia&&(ra=ia?ia[1]:""),ii){var oa=Fp();if(oa!=null&&oa>parseFloat(ra)){Ss=String(oa);break e}}Ss=ra}var T_={};function S_(){return __(function(){for(var e=0,t=Kf(String(Ss)).split("."),n=Kf("9").split("."),r=Math.max(t.length,n.length),i=0;e==0&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],o[0].length==0&&s[0].length==0)break;e=na(o[1].length==0?0:parseInt(o[1],10),s[1].length==0?0:parseInt(s[1],10))||na(o[2].length==0,s[2].length==0)||na(o[2],s[2]),o=o[3],s=s[3]}while(e==0)}return 0<=e})}var Ma;if(J.document&&ii){var Wf=Fp();Ma=Wf||parseInt(Ss,10)||void 0}else Ma=void 0;var A_=Ma,C_=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{J.addEventListener("test",Is,t),J.removeEventListener("test",Is,t)}catch{}return e}();function at(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};function io(e,t){if(at.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mp){e:{try{Lc(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:N_[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&io.Z.h.call(this)}}Ze(io,at);var N_={2:"touch",3:"pen",4:"mouse"};io.prototype.h=function(){io.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Io="closure_listenable_"+(1e6*Math.random()|0),x_=0;function D_(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++x_,this.ca=this.fa=!1}function fu(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function hu(e){this.src=e,this.g={},this.h=0}hu.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.g[o],e||(e=this.g[o]=[],this.h++);var s=Ua(e,t,r,i);return-1<s?(t=e[s],n||(t.fa=!1)):(t=new D_(t,this.src,o,!!r,i),t.fa=n,e.push(t)),t};function Fa(e,t){var n=t.type;if(n in e.g){var r=e.g[n],i=Rp(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(fu(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function Ua(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}var Mc="closure_lm_"+(1e6*Math.random()|0),sa={};function Up(e,t,n,r,i){if(r&&r.once)return jp(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Up(e,t[o],n,r,i);return null}return n=Vc(n),e&&e[Io]?e.N(t,n,Eo(r)?!!r.capture:!!r,i):Vp(e,t,n,!1,r,i)}function Vp(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Eo(i)?!!i.capture:!!i,u=Uc(e);if(u||(e[Mc]=u=new hu(e)),n=u.add(t,n,r,s,o),n.proxy)return n;if(r=R_(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)C_||(i=s),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qp(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function R_(){function e(n){return t.call(e.src,e.listener,n)}var t=O_;return e}function jp(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)jp(e,t[o],n,r,i);return null}return n=Vc(n),e&&e[Io]?e.O(t,n,Eo(r)?!!r.capture:!!r,i):Vp(e,t,n,!0,r,i)}function Bp(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Bp(e,t[o],n,r,i);else r=Eo(r)?!!r.capture:!!r,n=Vc(n),e&&e[Io]?(e=e.i,t=String(t).toString(),t in e.g&&(o=e.g[t],n=Ua(o,n,r,i),-1<n&&(fu(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete e.g[t],e.h--)))):e&&(e=Uc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ua(t,n,r,i)),(n=-1<e?t[e]:null)&&Fc(n))}function Fc(e){if(typeof e!="number"&&e&&!e.ca){var t=e.src;if(t&&t[Io])Fa(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qp(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Uc(t))?(Fa(n,e),n.h==0&&(n.src=null,t[Mc]=null)):fu(e)}}}function qp(e){return e in sa?sa[e]:sa[e]="on"+e}function O_(e,t){if(e.ca)e=!0;else{t=new io(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Fc(e),e=n.call(r,t)}return e}function Uc(e){return e=e[Mc],e instanceof hu?e:null}var ua="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vc(e){return typeof e=="function"?e:(e[ua]||(e[ua]=function(t){return e.handleEvent(t)}),e[ua])}function We(){Gn.call(this),this.i=new hu(this),this.P=this,this.I=null}Ze(We,Gn);We.prototype[Io]=!0;We.prototype.removeEventListener=function(e,t,n,r){Bp(this,e,t,n,r)};function Je(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,typeof t=="string")t=new at(t,e);else if(t instanceof at)t.target=t.target||e;else{var i=t;t=new at(r,e),kp(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Yo(s,r,!0,t)&&i}if(s=t.g=e,i=Yo(s,r,!0,t)&&i,i=Yo(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Yo(s,r,!1,t)&&i}We.prototype.M=function(){if(We.Z.M.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)fu(n[r]);delete e.g[t],e.h--}}this.I=null};We.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)};We.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Yo(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ca&&s.capture==n){var u=s.listener,a=s.ia||s.src;s.fa&&Fa(e.i,s),i=u.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var jc=J.JSON.stringify;function P_(){var e=Kp,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k_=function(){function e(){this.h=this.g=null}return e.prototype.add=function(t,n){var r=$p.get();r.set(t,n),this.h?this.h.next=r:this.g=r,this.h=r},e}(),$p=new(function(){function e(t,n){this.i=t,this.j=n,this.h=0,this.g=null}return e.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},e}())(function(){return new L_},function(e){return e.reset()}),L_=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(t,n){this.h=t,this.g=n,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function M_(e){J.setTimeout(function(){throw e},0)}function Bc(e,t){Va||F_(),ja||(Va(),ja=!0),Kp.add(e,t)}var Va;function F_(){var e=J.Promise.resolve(void 0);Va=function(){e.then(U_)}}var ja=!1,Kp=new k_;function U_(){for(var e;e=P_();){try{e.h.call(e.g)}catch(n){M_(n)}var t=$p;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ja=!1}function du(e,t){We.call(this),this.h=e||1,this.g=t||J,this.j=Xe(this.kb,this),this.l=Date.now()}Ze(du,We);B=du.prototype;B.da=!1;B.S=null;B.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Je(this,"tick"),this.da&&(qc(this),this.start()))}};B.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function qc(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}B.M=function(){du.Z.M.call(this),qc(this),delete this.g};function $c(e,t,n){if(typeof e=="function")n&&(e=Xe(e,n));else if(e&&typeof e.handleEvent=="function")e=Xe(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:J.setTimeout(e,t||0)}function Hp(e){e.g=$c(function(){e.g=null,e.i&&(e.i=!1,Hp(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}var V_=function(e){d_(t,e);function t(n,r){var i=e.call(this)||this;return i.m=n,i.j=r,i.h=null,i.i=!1,i.g=null,i}return t.prototype.l=function(n){this.h=arguments,this.g?this.i=!0:Hp(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(Gn);function oo(e){Gn.call(this),this.h=e,this.g={}}Ze(oo,Gn);var Qf=[];function zp(e,t,n,r){Array.isArray(n)||(n&&(Qf[0]=n.toString()),n=Qf);for(var i=0;i<n.length;i++){var o=Up(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Gp(e){kc(e.g,function(t,n){this.g.hasOwnProperty(n)&&Fc(t)},e),e.g={}}oo.prototype.M=function(){oo.Z.M.call(this),Gp(this)};oo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function pu(){this.g=!0}pu.prototype.Aa=function(){this.g=!1};function j_(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");s=2<=f.length&&f[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+s})}function B_(e,t,n,r,i,o,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+o+" "+s})}function Hr(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+$_(e,n)+(r?" "+r:"")})}function q_(e,t){e.info(function(){return"TIMEOUT: "+t})}pu.prototype.info=function(){};function $_(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return jc(n)}catch{return t}}var Cr={},Yf=null;function gu(){return Yf=Yf||new We}Cr.Ma="serverreachability";function Wp(e){at.call(this,Cr.Ma,e)}Ze(Wp,at);function so(e){var t=gu();Je(t,new Wp(t))}Cr.STAT_EVENT="statevent";function Qp(e,t){at.call(this,Cr.STAT_EVENT,e),this.stat=t}Ze(Qp,at);function mt(e){var t=gu();Je(t,new Qp(t,e))}Cr.Na="timingevent";function Yp(e,t){at.call(this,Cr.Na,e),this.size=t}Ze(Yp,at);function To(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){e()},t)}var mu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Kc(){}Kc.prototype.h=null;function Xf(e){return e.h||(e.h=e.i())}function Jp(){}var So={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Hc(){at.call(this,"d")}Ze(Hc,at);function zc(){at.call(this,"c")}Ze(zc,at);var Ba;function yu(){}Ze(yu,Kc);yu.prototype.g=function(){return new XMLHttpRequest};yu.prototype.i=function(){return{}};Ba=new yu;function Ao(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new oo(this),this.P=K_,e=La?125:void 0,this.W=new du(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zp}function Zp(){this.i=null,this.g="",this.h=!1}var K_=45e3,qa={},As={};B=Ao.prototype;B.setTimeout=function(e){this.P=e};function $a(e,t,n){e.K=1,e.v=wu(Tn(t)),e.s=n,e.U=!0,eg(e,null)}function eg(e,t){e.F=Date.now(),Co(e),e.A=Tn(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),ug(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Zp,e.g=Cg(e.l,n?t:null,!e.s),0<e.O&&(e.L=new V_(Xe(e.Ia,e,e.g),e.O)),zp(e.V,e.g,"readystatechange",e.gb),t=e.H?Pp(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),so(),j_(e.j,e.u,e.A,e.m,e.X,e.s)}B.gb=function(e){e=e.target;var t=this.L;t&&vn(e)==3?t.l():this.Ia(e)};B.Ia=function(e){try{if(e==this.g)e:{var t=vn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(t!=3||La||this.g&&(this.h.h||this.g.ga()||th(this.g)))){this.I||t!=4||n==7||(n==8||0>=r?so(3):so(2)),vu(this);var i=this.g.ba();this.N=i;t:if(tg(this)){var o=th(this.g);e="";var s=o.length,u=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cr(this),$i(this);var a="";break t}this.h.i=new J.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:u&&n==s-1});o.splice(0,s),this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=i==200,B_(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ts(c)){var f=c;break t}}f=null}if(i=f)Hr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ka(this,i);else{this.i=!1,this.o=3,mt(12),cr(this),$i(this);break e}}this.U?(ng(this,t,a),La&&this.i&&t==3&&(zp(this.V,this.W,"tick",this.fb),this.W.start())):(Hr(this.j,this.m,a,null),Ka(this,a)),t==4&&cr(this),this.i&&!this.I&&(t==4?Ig(this.l,this):(this.i=!1,Co(this)))}else i==400&&0<a.indexOf("Unknown SID")?(this.o=3,mt(12)):(this.o=0,mt(13)),cr(this),$i(this)}}}catch{}finally{}};function tg(e){return e.g?e.u=="GET"&&e.K!=2&&e.l.Ba:!1}function ng(e,t,n){for(var r=!0,i;!e.I&&e.C<n.length;)if(i=H_(e,n),i==As){t==4&&(e.o=4,mt(14),r=!1),Hr(e.j,e.m,null,"[Incomplete Response]");break}else if(i==qa){e.o=4,mt(15),Hr(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}else Hr(e.j,e.m,i,null),Ka(e,i);tg(e)&&i!=As&&i!=qa&&(e.h.g="",e.C=0),t!=4||n.length!=0||e.h.h||(e.o=1,mt(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.aa&&(e.aa=!0,t=e.l,t.g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),tl(t),t.L=!0,mt(11))):(Hr(e.j,e.m,n,"[Invalid Chunked Response]"),cr(e),$i(e))}B.fb=function(){if(this.g){var e=vn(this.g),t=this.g.ga();this.C<t.length&&(vu(this),ng(this,e,t),this.i&&e!=4&&Co(this))}};function H_(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?As:(n=Number(t.substring(n,r)),isNaN(n)?qa:(r+=1,r+n>t.length?As:(t=t.substr(r,n),e.C=r+n,t)))}B.cancel=function(){this.I=!0,cr(this)};function Co(e){e.Y=Date.now()+e.P,rg(e,e.P)}function rg(e,t){if(e.B!=null)throw Error("WatchDog timer not null");e.B=To(Xe(e.eb,e),t)}function vu(e){e.B&&(J.clearTimeout(e.B),e.B=null)}B.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(q_(this.j,this.A),this.K!=2&&(so(),mt(17)),cr(this),this.o=2,$i(this)):rg(this,this.Y-e)};function $i(e){e.l.G==0||e.I||Ig(e.l,e)}function cr(e){vu(e);var t=e.L;t&&typeof t.na=="function"&&t.na(),e.L=null,qc(e.W),Gp(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ka(e,t){try{var n=e.l;if(n.G!=0&&(n.g==e||Ha(n.i,e))){if(n.I=e.N,!e.J&&Ha(n.i,e)&&n.G==3){try{var r=n.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<e.F)Ds(n),Eu(n);else break e;el(n),mt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&n.A==0&&!n.v&&(n.v=To(Xe(n.ab,n),6e3));if(1>=lg(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else lr(n,11)}else if((e.J||n.g==e)&&Ds(n),!Ts(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],n.G==2)if(o[0]=="c"){n.J=o[1],n.la=o[2];var s=o[3];s!=null&&(n.ma=s,n.h.info("VER="+n.ma));var u=o[4];u!=null&&(n.za=u,n.h.info("SVER="+n.za));var a=o[5];a!=null&&typeof a=="number"&&0<a&&(r=1.5*a,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(pt(l,"spdy")||pt(l,"quic")||pt(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Qc(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ne(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms")),r=n;var d=e;if(r.oa=Ag(r,r.H?r.la:null,r.W),d.J){fg(r.i,d);var g=d,m=r.K;m&&g.setTimeout(m),g.B&&(vu(g),Co(g)),r.g=d}else _g(r);0<n.l.length&&Iu(n)}else o[0]!="stop"&&o[0]!="close"||lr(n,7);else n.G==3&&(o[0]=="stop"||o[0]=="close"?o[0]=="stop"?lr(n,7):Zc(n):o[0]!="noop"&&n.j&&n.j.wa(o),n.A=0)}}so(4)}catch{}}function z_(e){if(e.R&&typeof e.R=="function")return e.R();if(typeof e=="string")return e.split("");if(ka(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return t}function Gc(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(ka(e)||typeof e=="string")Op(e,t,void 0);else{if(e.T&&typeof e.T=="function")var n=e.T();else if(e.R&&typeof e.R=="function")n=void 0;else if(ka(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=z_(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ii(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ii)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}B=Ii.prototype;B.R=function(){Wc(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e};B.T=function(){return Wc(this),this.g.concat()};function Wc(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];wr(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)r=e.g[t],wr(i,r)||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}B.get=function(e,t){return wr(this.h,e)?this.h[e]:t};B.set=function(e,t){wr(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t};B.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};function wr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ig=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function G_(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function br(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof br){this.g=t!==void 0?t:e.g,Cs(this,e.j),this.s=e.s,Ns(this,e.i),xs(this,e.m),this.l=e.l,t=e.h;var n=new uo;n.i=t.i,t.g&&(n.g=new Ii(t.g),n.h=t.h),Jf(this,n),this.o=e.o}else e&&(n=String(e).match(ig))?(this.g=!!t,Cs(this,n[1]||"",!0),this.s=Ki(n[2]||""),Ns(this,n[3]||"",!0),xs(this,n[4]),this.l=Ki(n[5]||"",!0),Jf(this,n[6]||"",!0),this.o=Ki(n[7]||"")):(this.g=!!t,this.h=new uo(null,this.g))}br.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Fi(t,Zf,!0),":");var n=this.i;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Fi(t,Zf,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.i&&n.charAt(0)!="/"&&e.push("/"),e.push(Fi(n,n.charAt(0)=="/"?J_:X_,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Fi(n,eE)),e.join("")};function Tn(e){return new br(e)}function Cs(e,t,n){e.j=n?Ki(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ns(e,t,n){e.i=n?Ki(t,!0):t}function xs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Jf(e,t,n){t instanceof uo?(e.h=t,tE(e.h,e.g)):(n||(t=Fi(t,Z_)),e.h=new uo(t,e.g))}function Ne(e,t,n){e.h.set(t,n)}function wu(e){return Ne(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function W_(e){return e instanceof br?Tn(e):new br(e,void 0)}function Q_(e,t,n,r){var i=new br(null,void 0);return e&&Cs(i,e),t&&Ns(i,t),n&&xs(i,n),r&&(i.l=r),i}function Ki(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Fi(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Y_),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Y_(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Zf=/[#\/\?@]/g,X_=/[#\?:]/g,J_=/[#\?]/g,Z_=/[#\?@]/g,eE=/#/g;function uo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wn(e){e.g||(e.g=new Ii,e.h=0,e.i&&G_(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}B=uo.prototype;B.add=function(e,t){Wn(this),this.i=null,e=Ti(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function og(e,t){Wn(e),t=Ti(e,t),wr(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,e=e.g,wr(e.h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Wc(e)))}function sg(e,t){return Wn(e),t=Ti(e,t),wr(e.g.h,t)}B.forEach=function(e,t){Wn(this),this.g.forEach(function(n,r){Op(n,function(i){e.call(t,i,r,this)},this)},this)};B.T=function(){Wn(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n};B.R=function(e){Wn(this);var t=[];if(typeof e=="string")sg(this,e)&&(t=$f(t,this.g.get(Ti(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=$f(t,e[n])}return t};B.set=function(e,t){return Wn(this),this.i=null,e=Ti(this,e),sg(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};B.get=function(e,t){return e?(e=this.R(e),0<e.length?String(e[0]):t):t};function ug(e,t,n){og(e,t),0<n.length&&(e.i=null,e.g.set(Ti(e,t),Pc(n)),e.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;r[o]!==""&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.i=e.join("&")};function Ti(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tE(e,t){t&&!e.j&&(Wn(e),e.i=null,e.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(og(this,r),ug(this,i,n))},e)),e.j=t}var nE=function(){function e(t,n){this.h=t,this.g=n}return e}();function ag(e){this.l=e||rE,J.PerformanceNavigationTiming?(e=J.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(J.g&&J.g.Ea&&J.g.Ea()&&J.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rE=10;function cg(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function lg(e){return e.h?1:e.g?e.g.size:0}function Ha(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function Qc(e,t){e.g?e.g.add(t):e.h=t}function fg(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}ag.prototype.cancel=function(){var e,t;if(this.i=hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){try{for(var n=Dp(this.g.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}};function hg(e){var t,n;if(e.h!=null)return e.i.concat(e.h.D);if(e.g!=null&&e.g.size!==0){var r=e.i;try{for(var i=Dp(e.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Pc(e.i)}function Yc(){}Yc.prototype.stringify=function(e){return J.JSON.stringify(e,void 0)};Yc.prototype.parse=function(e){return J.JSON.parse(e,void 0)};function iE(){this.g=new Yc}function oE(e,t,n){var r=n||"";try{Gc(e,function(i,o){var s=i;Eo(i)&&(s=jc(i)),t.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sE(e,t){var n=new pu;if(J.Image){var r=new Image;r.onload=Qo(Xo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Qo(Xo,n,r,"TestLoadImage: error",!1,t),r.onabort=Qo(Xo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Qo(Xo,n,r,"TestLoadImage: timeout",!1,t),J.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Xo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function No(e){this.l=e.$b||null,this.j=e.ib||!1}Ze(No,Kc);No.prototype.g=function(){return new bu(this.l,this.j)};No.prototype.i=function(e){return function(){return e}}({});function bu(e,t){We.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Xc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ze(bu,We);var Xc=0;B=bu.prototype;B.open=function(e,t){if(this.readyState!=Xc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ao(this)};B.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||J).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=Xc};B.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dg(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))};function dg(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}B.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?xo(this):ao(this),this.readyState==3&&dg(this)}};B.Ua=function(e){this.g&&(this.response=this.responseText=e,xo(this))};B.Ta=function(e){this.g&&(this.response=e,xo(this))};B.ha=function(){this.g&&xo(this)};function xo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ao(e)}B.setRequestHeader=function(e,t){this.v.append(e,t)};B.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function ao(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var uE=J.JSON.parse;function Be(e){We.call(this),this.headers=new Ii,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pg,this.K=this.L=!1}Ze(Be,We);var pg="",aE=/^https?$/i,cE=["POST","PUT"];B=Be.prototype;B.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ba.g(),this.C=this.u?Xf(this.u):Xf(Ba),this.g.onreadystatechange=Xe(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){eh(this,o);return}e=n||"";var i=new Ii(this.headers);r&&Gc(r,function(o,s){i.set(s,o)}),r=b_(i.T()),n=J.FormData&&e instanceof J.FormData,!(0<=Rp(cE,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,s){this.g.setRequestHeader(s,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yg(this),0<this.B&&((this.K=lE(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xe(this.pa,this)):this.A=$c(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){eh(this,o)}};function lE(e){return ii&&S_()&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function fE(e){return e.toLowerCase()=="content-type"}B.pa=function(){typeof Oc<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Je(this,"timeout"),this.abort(8))};function eh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gg(e),_u(e)}function gg(e){e.D||(e.D=!0,Je(e,"complete"),Je(e,"error"))}B.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Je(this,"complete"),Je(this,"abort"),_u(this))};B.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_u(this,!0)),Be.Z.M.call(this)};B.Fa=function(){this.s||(this.F||this.v||this.l?mg(this):this.cb())};B.cb=function(){mg(this)};function mg(e){if(e.h&&typeof Oc<"u"&&(!e.C[1]||vn(e)!=4||e.ba()!=2)){if(e.v&&vn(e)==4)$c(e.Fa,0,e);else if(Je(e,"readystatechange"),vn(e)==4){e.h=!1;try{var t=e.ba();e:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var o=String(e.H).match(ig)[1]||null;if(!o&&J.self&&J.self.location){var s=J.self.location.protocol;o=s.substr(0,s.length-1)}i=!aE.test(o?o.toLowerCase():"")}r=i}if(r)Je(e,"complete"),Je(e,"success");else{e.m=6;try{var u=2<vn(e)?e.g.statusText:""}catch{u=""}e.j=u+" ["+e.ba()+"]",gg(e)}}finally{_u(e)}}}}function _u(e,t){if(e.g){yg(e);var n=e.g,r=e.C[0]?Is:null;e.g=null,e.C=null,t||Je(e,"ready");try{n.onreadystatechange=r}catch{}}}function yg(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(J.clearTimeout(e.A),e.A=null)}function vn(e){return e.g?e.g.readyState:0}B.ba=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}};B.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),uE(t)}};function th(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case pg:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}B.Da=function(){return this.m};B.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function hE(e){var t="";return kc(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Jc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=hE(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Ne(e,t,n))}function ki(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vg(e){this.za=0,this.l=[],this.h=new pu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ki("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ki("baseRetryDelayMs",5e3,e),this.$a=ki("retryDelaySeedMs",1e4,e),this.Ya=ki("forwardChannelMaxRetries",2,e),this.ra=ki("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ag(e&&e.concurrentRequestLimit),this.Ca=new iE,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||e.Xb!==!1}B=vg.prototype;B.ma=8;B.G=1;function Zc(e){if(wg(e),e.G==3){var t=e.V++,n=Tn(e.F);Ne(n,"SID",e.J),Ne(n,"RID",t),Ne(n,"TYPE","terminate"),Do(e,n),t=new Ao(e,e.h,t,void 0),t.K=2,t.v=wu(Tn(n)),n=!1,J.navigator&&J.navigator.sendBeacon&&(n=J.navigator.sendBeacon(t.v.toString(),"")),!n&&J.Image&&(new Image().src=t.v,n=!0),n||(t.g=Cg(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Co(t)}Sg(e)}B.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch{}};function Eu(e){e.g&&(tl(e),e.g.cancel(),e.g=null)}function wg(e){Eu(e),e.u&&(J.clearTimeout(e.u),e.u=null),Ds(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&J.clearTimeout(e.m),e.m=null)}function aa(e,t){e.l.push(new nE(e.Za++,t)),e.G==3&&Iu(e)}function Iu(e){cg(e.i)||e.m||(e.m=!0,Bc(e.Ha,e),e.C=0)}function dE(e,t){return lg(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.l=t.D.concat(e.l),!0):e.G==1||e.G==2||e.C>=(e.Xa?0:e.Ya)?!1:(e.m=To(Xe(e.Ha,e,t),Tg(e,e.C)),e.C++,!0)}B.Ha=function(e){if(this.m)if(this.m=null,this.G==1){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ao(this,this.h,e,void 0),n=this.s;if(this.P&&(n?(n=Pp(n),kp(n,this.P)):n=this.P),this.o===null&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){t:{var o=this.l[i];if("__data__"in o.g&&(o=o.g.__data__,typeof o=="string")){o=o.length;break t}o=void 0}if(o===void 0)break;if(r+=o,4096<r){r=i;break e}if(r===4096||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=bg(this,t,r),i=Tn(this.F),Ne(i,"RID",e),Ne(i,"CVER",22),this.D&&Ne(i,"X-HTTP-Session-Id",this.D),Do(this,i),this.o&&n&&Jc(i,this.o,n),Qc(this.i,t),this.Ra&&Ne(i,"TYPE","init"),this.ja?(Ne(i,"$req",r),Ne(i,"SID","null"),t.$=!0,$a(t,i,null)):$a(t,i,r),this.G=2}}else this.G==3&&(e?nh(this,e):this.l.length==0||cg(this.i)||nh(this))};function nh(e,t){var n;t?n=t.m:n=e.V++;var r=Tn(e.F);Ne(r,"SID",e.J),Ne(r,"RID",n),Ne(r,"AID",e.U),Do(e,r),e.o&&e.s&&Jc(r,e.o,e.s),n=new Ao(e,e.h,n,e.C+1),e.o===null&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=bg(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Qc(e.i,n),$a(n,r,t)}function Do(e,t){e.j&&Gc({},function(n,r){Ne(t,r,n)})}function bg(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Xe(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var s=["count="+n];o==-1?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].h,l=i[a].g;if(c-=o,0>c)o=Math.max(0,i[a].h-100),u=!1;else try{oE(l,s,"req"+c+"_")}catch{r&&r(l)}}if(u){r=s.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function _g(e){e.g||e.u||(e.Y=1,Bc(e.Ga,e),e.A=0)}function el(e){return e.g||e.u||3<=e.A?!1:(e.Y++,e.u=To(Xe(e.Ga,e),Tg(e,e.A)),e.A++,!0)}B.Ga=function(){if(this.u=null,Eg(this),this.$&&!(this.L||this.g==null||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=To(Xe(this.bb,this),e)}};B.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mt(10),Eu(this),Eg(this))};function tl(e){e.B!=null&&(J.clearTimeout(e.B),e.B=null)}function Eg(e){e.g=new Ao(e,e.h,"rpc",e.Y),e.o===null&&(e.g.H=e.s),e.g.O=0;var t=Tn(e.oa);Ne(t,"RID","rpc"),Ne(t,"SID",e.J),Ne(t,"CI",e.N?"0":"1"),Ne(t,"AID",e.U),Do(e,t),Ne(t,"TYPE","xmlhttp"),e.o&&e.s&&Jc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=wu(Tn(t)),n.s=null,n.U=!0,eg(n,e)}B.ab=function(){this.v!=null&&(this.v=null,Eu(this),el(this),mt(19))};function Ds(e){e.v!=null&&(J.clearTimeout(e.v),e.v=null)}function Ig(e,t){var n=null;if(e.g==t){Ds(e),tl(e),e.g=null;var r=2}else if(Ha(e.i,t))n=t.D,fg(e.i,t),r=1;else return;if(e.I=t.N,e.G!=0){if(t.i)if(r==1){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r=gu(),Je(r,new Yp(r,n)),Iu(e)}else _g(e);else if(i=t.o,i==3||i==0&&0<e.I||!(r==1&&dE(e,t)||r==2&&el(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:lr(e,5);break;case 4:lr(e,10);break;case 3:lr(e,6);break;default:lr(e,2)}}}function Tg(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function lr(e,t){if(e.h.info("Error code "+t),t==2){var n=null;e.j&&(n=null);var r=Xe(e.jb,e);n||(n=new br("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||Cs(n,"https"),wu(n)),sE(n.toString(),r)}else mt(2);e.G=0,e.j&&e.j.va(t),Sg(e),wg(e)}B.jb=function(e){e?(this.h.info("Successfully pinged google.com"),mt(2)):(this.h.info("Failed to ping google.com"),mt(1))};function Sg(e){e.G=0,e.I=-1,e.j&&((hg(e.i).length!=0||e.l.length!=0)&&(e.i.i.length=0,Pc(e.l),e.l.length=0),e.j.ua())}function Ag(e,t,n){var r=W_(n);if(r.i!="")t&&Ns(r,t+"."+r.i),xs(r,r.m);else{var i=J.location;r=Q_(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&kc(e.aa,function(o,s){Ne(r,s,o)}),t=e.D,n=e.sa,t&&n&&Ne(r,t,n),Ne(r,"VER",e.ma),Do(e,r),r}function Cg(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ba&&!e.qa?new Be(new No({ib:!0})):new Be(e.qa),t.L=e.H,t}function Ng(){}B=Ng.prototype;B.xa=function(){};B.wa=function(){};B.va=function(){};B.ua=function(){};B.Oa=function(){};function Rs(){if(ii&&!(10<=Number(A_)))throw Error("Environmental error: no available transport.")}Rs.prototype.g=function(e,t){return new Lt(e,t)};function Lt(e,t){We.call(this),this.g=new vg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ts(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ts(t)&&(this.g.D=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Si(this)}Ze(Lt,We);Lt.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Bc(Xe(e.hb,e,t))),mt(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ag(e,null,e.W),Iu(e)};Lt.prototype.close=function(){Zc(this.g)};Lt.prototype.u=function(e){if(typeof e=="string"){var t={};t.__data__=e,aa(this.g,t)}else this.v?(t={},t.__data__=jc(e),aa(this.g,t)):aa(this.g,e)};Lt.prototype.M=function(){this.g.j=null,delete this.j,Zc(this.g),delete this.g,Lt.Z.M.call(this)};function xg(e){Hc.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}Ze(xg,Hc);function Dg(){zc.call(this),this.status=1}Ze(Dg,zc);function Si(e){this.g=e}Ze(Si,Ng);Si.prototype.xa=function(){Je(this.g,"a")};Si.prototype.wa=function(e){Je(this.g,new xg(e))};Si.prototype.va=function(e){Je(this.g,new Dg)};Si.prototype.ua=function(){Je(this.g,"b")};Rs.prototype.createWebChannel=Rs.prototype.g;Lt.prototype.send=Lt.prototype.u;Lt.prototype.open=Lt.prototype.m;Lt.prototype.close=Lt.prototype.close;mu.NO_ERROR=0;mu.TIMEOUT=8;mu.HTTP_ERROR=6;Xp.COMPLETE="complete";Jp.EventType=So;So.OPEN="a";So.CLOSE="b";So.ERROR="c";So.MESSAGE="d";We.prototype.listen=We.prototype.N;Be.prototype.listenOnce=Be.prototype.O;Be.prototype.getLastError=Be.prototype.La;Be.prototype.getLastErrorCode=Be.prototype.Da;Be.prototype.getStatus=Be.prototype.ba;Be.prototype.getResponseJson=Be.prototype.Qa;Be.prototype.getResponseText=Be.prototype.ga;Be.prototype.send=Be.prototype.ea;var pE=function(){return new Rs},gE=function(){return gu()},ca=mu,mE=Xp,yE=Cr,rh={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vE=No,Jo=Jp,wE=Be;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.sequenceNumberHandler=function(i){return r.t(i)},this.i=function(i){return n.writeSequenceNumber(i)})}return e.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},e}();Ot.o=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Q(t,e),t}(Error),Yt=new Ap("@firebase/firestore");function za(){return Yt.logLevel}function O(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Yt.logLevel<=fe.DEBUG){var r=t.map(nl);Yt.debug.apply(Yt,Pe(["Firestore (8.10.1): "+e],r))}}function Ve(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Yt.logLevel<=fe.ERROR){var r=t.map(nl);Yt.error.apply(Yt,Pe(["Firestore (8.10.1): "+e],r))}}function Os(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Yt.logLevel<=fe.WARN){var r=t.map(nl);Yt.warn.apply(Yt,Pe(["Firestore (8.10.1): "+e],r))}}function nl(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.10.1) INTERNAL ASSERTION FAILED: "+e;throw Ve(t),new Error(t)}function Y(e,t){e||K()}function U(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rg=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=bE(40),o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=t.charAt(i[o]%t.length));return r},e}();function se(e,t){return e<t?-1:e>t?1:0}function oi(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function Og(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new x(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new x(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(t){return this.seconds===t.seconds?se(this.nanoseconds,t.nanoseconds):se(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),ie=function(){function e(t){this.timestamp=t}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Et(0,0))},e.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nr(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Pg(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kg=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&K(),r===void 0?r=t.length-n:r>t.length-n&&K(),this.segments=t,this.offset=n,this.len=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.comparator(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.isEmpty=function(){return this.length===0},e.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var o=t.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),de=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],o=0,s=n;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new x(b.INVALID_ARGUMENT,"Invalid segment ("+u+"). Paths must not contain // in them.");i.push.apply(i,u.split("/").filter(function(a){return a.length>0}))}return new t(i)},t.emptyPath=function(){return new t([])},t}(kg),_E=/^[_a-zA-Z][_a-zA-Z0-9]*$/,en=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.construct=function(n,r,i){return new t(n,r,i)},t.isValidIdentifier=function(n){return _E.test(n)},t.prototype.canonicalString=function(){return this.toArray().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return this.length===1&&this.get(0)==="__name__"},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(n){for(var r=[],i="",o=0,s=function(){if(i.length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},u=!1;o<n.length;){var a=n[o];if(a==="\\"){if(o+1===n.length)throw new x(b.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var c=n[o+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new x(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=c,o+=2}else a==="`"?(u=!u,o++):a!=="."||u?(i+=a,o++):(s(),o++)}if(s(),u)throw new x(b.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.emptyPath=function(){return new t([])},t}(kg),si=function(){function e(t){this.fields=t,t.sort(en.comparator)}return e.prototype.covers=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].isPrefixOf(t))return!0;return!1},e.prototype.isEqual=function(t){return oi(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),Tt=function(){function e(t){this.binaryString=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(t){return se(this.binaryString,t.binaryString)},e.prototype.isEqual=function(t){return this.binaryString===t.binaryString},e}();Tt.EMPTY_BYTE_STRING=new Tt("");var EE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hn(e){if(Y(!!e),typeof e=="string"){var t=0,n=EE.exec(e);if(Y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ue(e.seconds),nanos:Ue(e.nanos)}}function Ue(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ui(e){return typeof e=="string"?Tt.fromBase64String(e):Tt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lg(e){var t=e.mapValue.fields.__previous_value__;return rl(t)?Lg(t):t}function co(e){var t=Hn(e.mapValue.fields.__local_write_time__.timestampValue);return new Et(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e){return e==null}function Ps(e){return e===0&&1/e==-1/0}function Mg(e){return typeof e=="number"&&Number.isInteger(e)&&!Ps(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){function e(t){this.path=t}return e.fromPath=function(t){return new e(de.fromString(t))},e.fromName=function(t){return new e(de.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&de.comparator(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(t,n){return de.comparator(t.path,n.path)},e.isDocumentKey=function(t){return t.length%2==0},e.fromSegments=function(t){return new e(new de(t.slice()))},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rl(e)?4:10:K()}function hn(e,t){var n=_r(e);if(n!==_r(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return co(e).isEqual(co(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var o=Hn(r.timestampValue),s=Hn(i.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return ui(r.bytesValue).isEqual(ui(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return Ue(r.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(r.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ue(r.integerValue)===Ue(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var o=Ue(r.doubleValue),s=Ue(i.doubleValue);return o===s?Ps(o)===Ps(s):isNaN(o)&&isNaN(s)}return!1}(e,t);case 9:return oi(e.arrayValue.values||[],t.arrayValue.values||[],hn);case 10:return function(r,i){var o=r.mapValue.fields||{},s=i.mapValue.fields||{};if(ih(o)!==ih(s))return!1;for(var u in o)if(o.hasOwnProperty(u)&&(s[u]===void 0||!hn(o[u],s[u])))return!1;return!0}(e,t);default:return K()}}function lo(e,t){return(e.values||[]).find(function(n){return hn(n,t)})!==void 0}function ai(e,t){var n=_r(e),r=_r(t);if(n!==r)return se(n,r);switch(n){case 0:return 0;case 1:return se(e.booleanValue,t.booleanValue);case 2:return function(i,o){var s=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return s<u?-1:s>u?1:s===u?0:isNaN(s)?isNaN(u)?0:-1:1}(e,t);case 3:return oh(e.timestampValue,t.timestampValue);case 4:return oh(co(e),co(t));case 5:return se(e.stringValue,t.stringValue);case 6:return function(i,o){var s=ui(i),u=ui(o);return s.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(i,o){for(var s=i.split("/"),u=o.split("/"),a=0;a<s.length&&a<u.length;a++){var c=se(s[a],u[a]);if(c!==0)return c}return se(s.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,o){var s=se(Ue(i.latitude),Ue(o.latitude));return s!==0?s:se(Ue(i.longitude),Ue(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,o){for(var s=i.values||[],u=o.values||[],a=0;a<s.length&&a<u.length;++a){var c=ai(s[a],u[a]);if(c)return c}return se(s.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,o){var s=i.fields||{},u=Object.keys(s),a=o.fields||{},c=Object.keys(a);u.sort(),c.sort();for(var l=0;l<u.length&&l<c.length;++l){var f=se(u[l],c[l]);if(f!==0)return f;var h=ai(s[u[l]],a[c[l]]);if(h!==0)return h}return se(u.length,c.length)}(e.mapValue,t.mapValue);default:throw K()}}function oh(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return se(e,t);var n=Hn(e),r=Hn(t),i=se(n.seconds,r.seconds);return i!==0?i:se(n.nanos,r.nanos)}function il(e){return Ga(e)}function Ga(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Hn(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ui(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,H.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",o=!0,s=0,u=r.values||[];s<u.length;s++)o?o=!1:i+=",",i+=Ga(u[s]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",o=!0,s=0,u=Object.keys(r.fields||{}).sort();s<u.length;s++){var a=u[s];o?o=!1:i+=",",i+=a+":"+Ga(r.fields[a])}return i+"}"}(e.mapValue):K();var t,n}function ks(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function Wa(e){return!!e&&"integerValue"in e}function ol(e){return!!e&&"arrayValue"in e}function sh(e){return!!e&&"nullValue"in e}function uh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ls(e){return!!e&&"mapValue"in e}function Hi(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Nr(e.mapValue.fields,function(i,o){return t.mapValue.fields[i]=Hi(o)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Hi(e.arrayValue.values[r]);return n}return Object.assign({},e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt=function(){function e(t){this.value=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.isEmpty())return this.value;for(var n=this.value,r=0;r<t.length-1;++r)if(!ls(n=(n.mapValue.fields||{})[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.set=function(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hi(n)},e.prototype.setAll=function(t){var n=this,r=en.emptyPath(),i={},o=[];t.forEach(function(u,a){if(!r.isImmediateParentOf(a)){var c=n.getFieldsMap(r);n.applyChanges(c,i,o),i={},o=[],r=a.popLast()}u?i[a.lastSegment()]=Hi(u):o.push(a.lastSegment())});var s=this.getFieldsMap(r);this.applyChanges(s,i,o)},e.prototype.delete=function(t){var n=this.field(t.popLast());ls(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]},e.prototype.isEqual=function(t){return hn(this.value,t.value)},e.prototype.getFieldsMap=function(t){var n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(var r=0;r<t.length;++r){var i=n.mapValue.fields[t.get(r)];ls(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields},e.prototype.applyChanges=function(t,n,r){Nr(n,function(u,a){return t[u]=a});for(var i=0,o=r;i<o.length;i++){var s=o[i];delete t[s]}},e.prototype.clone=function(){return new e(Hi(this.value))},e}();function Fg(e){var t=[];return Nr(e.fields,function(n,r){var i=new en([n]);if(ls(r)){var o=Fg(r.mapValue).fields;if(o.length===0)t.push(i);else for(var s=0,u=o;s<u.length;s++){var a=u[s];t.push(i.child(a))}}else t.push(i)}),new si(t)}var lt=function(){function e(t,n,r,i,o){this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return e.newInvalidDocument=function(t){return new e(t,0,ie.min(),Dt.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,Dt.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,Dt.empty(),2)},e.prototype.convertToFoundDocument=function(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this},e.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return this.documentState===1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return this.documentState===2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return this.documentType!==0},e.prototype.isFoundDocument=function(){return this.documentType===1},e.prototype.isNoDocument=function(){return this.documentType===2},e.prototype.isUnknownDocument=function(){return this.documentType===3},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),IE=function(e,t,n,r,i,o,s){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(e,t,n,r,i,o,s){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),new IE(e,t,n,r,i,o,s)}function Ro(e){var t=U(e);if(t.h===null){var n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.canonicalString()+i.op.toString()+il(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+i.dir}(r)}).join(","),xr(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ms(t.startAt)),t.endAt&&(n+="|ub:",n+=Ms(t.endAt)),t.h=n}return t.h}function Tu(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!RE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!hn(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lh(e.startAt,t.startAt)&&lh(e.endAt,t.endAt)}function Ls(e){return H.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Pt=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).field=n,o.op=r,o.value=i,o}return Q(t,e),t.create=function(n,r,i){return n.isKeyField()?r==="in"||r==="not-in"?this.l(n,r,i):new TE(n,r,i):r==="array-contains"?new CE(n,i):r==="in"?new NE(n,i):r==="not-in"?new xE(n,i):r==="array-contains-any"?new DE(n,i):new t(n,r,i)},t.l=function(n,r,i){return r==="in"?new SE(n,i):new AE(n,i)},t.prototype.matches=function(n){var r=n.data.field(this.field);return this.op==="!="?r!==null&&this.m(ai(r,this.value)):r!==null&&_r(this.value)===_r(r)&&this.m(ai(r,this.value))},t.prototype.m=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return K()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),TE=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,i)||this).key=H.fromName(i.referenceValue),o}return Q(t,e),t.prototype.matches=function(n){var r=H.comparator(n.key,this.key);return this.m(r)},t}(Pt),SE=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=Ug("in",r),i}return Q(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(Pt),AE=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=Ug("not-in",r),i}return Q(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(Pt);function Ug(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return H.fromName(r.referenceValue)})}var CE=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return ol(r)&&lo(r.arrayValue,this.value)},t}(Pt),NE=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=n.data.field(this.field);return r!==null&&lo(this.value.arrayValue,r)},t}(Pt),xE=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return Q(t,e),t.prototype.matches=function(n){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.data.field(this.field);return r!==null&&!lo(this.value.arrayValue,r)},t}(Pt),DE=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return Q(t,e),t.prototype.matches=function(n){var r=this,i=n.data.field(this.field);return!(!ol(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(o){return lo(r.value.arrayValue,o)})},t}(Pt),fo=function(e,t){this.position=e,this.before=t};function Ms(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return il(t)}).join(",")}var Jr=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function RE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function ch(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],s=e.position[i];if(r=o.field.isKeyField()?H.comparator(H.fromName(s.referenceValue),n.key):ai(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function lh(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hn(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An=function(e,t,n,r,i,o,s,u){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),o===void 0&&(o="F"),s===void 0&&(s=null),u===void 0&&(u=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.p=null,this.T=null,this.startAt,this.endAt};function Vg(e,t,n,r,i,o,s,u){return new An(e,t,n,r,i,o,s,u)}function Oo(e){return new An(e)}function fs(e){return!xr(e.limit)&&e.limitType==="F"}function Fs(e){return!xr(e.limit)&&e.limitType==="L"}function sl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ul(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function al(e){return e.collectionGroup!==null}function ci(e){var t=U(e);if(t.p===null){t.p=[];var n=ul(t),r=sl(t);if(n!==null&&r===null)n.isKeyField()||t.p.push(new Jr(n)),t.p.push(new Jr(en.keyField(),"asc"));else{for(var i=!1,o=0,s=t.explicitOrderBy;o<s.length;o++){var u=s[o];t.p.push(u),u.field.isKeyField()&&(i=!0)}if(!i){var a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Jr(en.keyField(),a))}}}return t.p}function dn(e){var t=U(e);if(!t.T)if(t.limitType==="F")t.T=ah(t.path,t.collectionGroup,ci(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=ci(t);r<i.length;r++){var o=i[r],s=o.dir==="desc"?"asc":"desc";n.push(new Jr(o.field,s))}var u=t.endAt?new fo(t.endAt.position,!t.endAt.before):null,a=t.startAt?new fo(t.startAt.position,!t.startAt.before):null;t.T=ah(t.path,t.collectionGroup,n,t.filters,t.limit,u,a)}return t.T}function jg(e,t,n){return new An(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Po(e,t){return Tu(dn(e),dn(t))&&e.limitType===t.limitType}function Bg(e){return Ro(dn(e))+"|lt:"+e.limitType}function Qa(e){return"Query(target="+function(t){var n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.canonicalString()+" "+i.op+" "+il(i.value);var i}).join(", ")+"]"),xr(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.canonicalString()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Ms(t.startAt)),t.endAt&&(n+=", endAt: "+Ms(t.endAt)),"Target("+n+")"}(dn(e))+"; limitType="+e.limitType+")"}function ko(e,t){return t.isFoundDocument()&&function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):H.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(e,t)&&function(n,r){for(var i=0,o=n.explicitOrderBy;i<o.length;i++){var s=o[i];if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,o=n.filters;i<o.length;i++)if(!o[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!ch(n.startAt,ci(n),r))&&(!n.endAt||!ch(n.endAt,ci(n),r))}(e,t)}function qg(e){return function(t,n){for(var r=!1,i=0,o=ci(e);i<o.length;i++){var s=o[i],u=OE(s,t,n);if(u!==0)return u;r=r||s.field.isKeyField()}return 0}}function OE(e,t,n){var r=e.field.isKeyField()?H.comparator(t.key,n.key):function(i,o,s){var u=o.data.field(i),a=s.data.field(i);return u!==null&&a!==null?ai(u,a):K()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ps(t)?"-0":t}}function Kg(e){return{integerValue:""+e}}function Hg(e,t){return Mg(t)?Kg(t):$g(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Su=function(){this._=void 0};function PE(e,t,n){return e instanceof li?function(r,i){var o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,t):e instanceof Er?Gg(e,t):e instanceof Ir?Wg(e,t):function(r,i){var o=zg(r,i),s=fh(o)+fh(r.A);return Wa(o)&&Wa(r.A)?Kg(s):$g(r.R,s)}(e,t)}function kE(e,t,n){return e instanceof Er?Gg(e,t):e instanceof Ir?Wg(e,t):n}function zg(e,t){return e instanceof fi?Wa(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var li=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t}(Su),Er=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Q(t,e),t}(Su);function Gg(e,t){for(var n=Qg(t),r=function(s){n.some(function(u){return hn(u,s)})||n.push(s)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ir=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Q(t,e),t}(Su);function Wg(e,t){for(var n=Qg(t),r=function(s){n=n.filter(function(u){return!hn(u,s)})},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var fi=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).R=n,i.A=r,i}return Q(t,e),t}(Su);function fh(e){return Ue(e.integerValue||e.doubleValue)}function Qg(e){return ol(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo=function(e,t){this.field=e,this.transform=t},LE=function(e,t){this.version=e,this.transformResults=t},ut=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function hs(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Au=function(){};function ME(e,t,n){e instanceof Mo?function(r,i,o){var s=r.value.clone(),u=ph(r.fieldTransforms,i,o.transformResults);s.setAll(u),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(e,t,n):e instanceof Qn?function(r,i,o){if(hs(r.precondition,i)){var s=ph(r.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Yg(r)),u.setAll(s),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}else i.convertToUnknownDocument(o.version)}(e,t,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Ya(e,t,n){e instanceof Mo?function(r,i,o){if(hs(r.precondition,i)){var s=r.value.clone(),u=gh(r.fieldTransforms,o,i);s.setAll(u),i.convertToFoundDocument(dh(i),s).setHasLocalMutations()}}(e,t,n):e instanceof Qn?function(r,i,o){if(hs(r.precondition,i)){var s=gh(r.fieldTransforms,o,i),u=i.data;u.setAll(Yg(r)),u.setAll(s),i.convertToFoundDocument(dh(i),u).setHasLocalMutations()}}(e,t,n):function(r,i){hs(r.precondition,i)&&i.convertToNoDocument(ie.min())}(e,t)}function FE(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],s=t.data.field(o.field),u=zg(o.transform,s||null);u!=null&&(n==null&&(n=Dt.empty()),n.set(o.field,u))}return n||null}function hh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&oi(n,r,function(i,o){return function(s,u){return s.field.isEqual(u.field)&&function(a,c){return a instanceof Er&&c instanceof Er||a instanceof Ir&&c instanceof Ir?oi(a.elements,c.elements,hn):a instanceof fi&&c instanceof fi?hn(a.A,c.A):a instanceof li&&c instanceof li}(s.transform,u.transform)}(i,o)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function dh(e){return e.isFoundDocument()?e.version:ie.min()}var Mo=function(e){function t(n,r,i,o){o===void 0&&(o=[]);var s=this;return(s=e.call(this)||this).key=n,s.value=r,s.precondition=i,s.fieldTransforms=o,s.type=0,s}return Q(t,e),t}(Au),Qn=function(e){function t(n,r,i,o,s){s===void 0&&(s=[]);var u=this;return(u=e.call(this)||this).key=n,u.data=r,u.fieldMask=i,u.precondition=o,u.fieldTransforms=s,u.type=1,u}return Q(t,e),t}(Au);function Yg(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function ph(e,t,n){var r=new Map;Y(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],s=o.transform,u=t.data.field(o.field);r.set(o.field,kE(s,u,n[i]))}return r}function gh(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var s=o[i],u=s.transform,a=n.data.field(s.field);r.set(s.field,PE(u,a,t))}return r}var Fe,ue,Fo=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Q(t,e),t}(Au),cl=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Q(t,e),t}(Au),UE=function(e){this.count=e};function Xg(e){switch(e){case b.OK:return K();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0;default:return K()}}function Jg(e){if(e===void 0)return Ve("GRPC error has no .code"),b.UNKNOWN;switch(e){case Fe.OK:return b.OK;case Fe.CANCELLED:return b.CANCELLED;case Fe.UNKNOWN:return b.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return b.INTERNAL;case Fe.UNAVAILABLE:return b.UNAVAILABLE;case Fe.UNAUTHENTICATED:return b.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case Fe.NOT_FOUND:return b.NOT_FOUND;case Fe.ALREADY_EXISTS:return b.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return b.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case Fe.ABORTED:return b.ABORTED;case Fe.OUT_OF_RANGE:return b.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return b.UNIMPLEMENTED;case Fe.DATA_LOSS:return b.DATA_LOSS;default:return K()}}(ue=Fe||(Fe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft=function(){function e(t,n){this.comparator=t,this.root=n||Ln.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ln.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ln.BLACK,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.isEmpty();){var i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},e.prototype.forEach=function(t){this.inorderTraversal(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.inorderTraversal(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},e.prototype.getIterator=function(){return new Zo(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(t){return new Zo(this.root,t,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Zo(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(t){return new Zo(this.root,t,this.comparator,!0)},e}(),Zo=function(){function e(t,n,r,i){this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return e.prototype.getNext=function(){var t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(this.nodeStack.length===0)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},e}(),Ln=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,o=r(t,i.key);return(i=o<0?i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},e.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},e.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();var t=this.left.check();if(t!==this.right.check())throw K();return t+(this.isRed()?0:1)},e}();Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1,Ln.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw K()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,o){return this},e.prototype.insert=function(t,n,r){return new Ln(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He=function(){function e(t){this.comparator=t,this.data=new ft(this.comparator)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.forEachInRange=function(t,n){for(var r=this.data.getIteratorFrom(t[0]);r.hasNext();){var i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}},e.prototype.forEachWhile=function(t,n){var r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return},e.prototype.firstAfterOrEqual=function(t){var n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null},e.prototype.getIterator=function(){return new mh(this.data.getIterator())},e.prototype.getIteratorFrom=function(t){return new mh(this.data.getIteratorFrom(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0},e.prototype.toArray=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),mh=function(){function e(t){this.iter=t}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),VE=new ft(H.comparator);function Xt(){return VE}var jE=new ft(H.comparator);function Xa(){return jE}var BE=new ft(H.comparator);function qE(){return BE}var $E=new He(H.comparator);function Se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=$E,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var KE=new He(se);function Cu(){return KE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ll=function(){function e(t,n,r,i,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,fl.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ie.min(),r,Cu(),Xt(),Se())},e}(),fl=function(){function e(t,n,r,i,o){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Tt.EMPTY_BYTE_STRING,n,Se(),Se(),Se())},e}(),ds=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},Zg=function(e,t){this.targetId=e,this.V=t},em=function(e,t,n,r){n===void 0&&(n=Tt.EMPTY_BYTE_STRING),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},yh=function(){function e(){this.S=0,this.D=wh(),this.C=Tt.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return this.S!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},e.prototype.M=function(){var t=Se(),n=Se(),r=Se();return this.D.forEach(function(i,o){switch(o){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new fl(this.C,this.N,t,n,r)},e.prototype.L=function(){this.k=!1,this.D=wh()},e.prototype.B=function(t,n){this.k=!0,this.D=this.D.insert(t,n)},e.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),HE=function(){function e(t){this.W=t,this.G=new Map,this.H=Xt(),this.J=vh(),this.Y=new He(se)}return e.prototype.X=function(t){for(var n=0,r=t.v;n<r.length;n++){var i=r[n];t.P&&t.P.isFoundDocument()?this.Z(i,t.P):this.tt(i,t.key,t.P)}for(var o=0,s=t.removedTargetIds;o<s.length;o++)i=s[o],this.tt(i,t.key,t.P)},e.prototype.et=function(t){var n=this;this.forEachTarget(t,function(r){var i=n.nt(r);switch(t.state){case 0:n.st(r)&&i.O(t.resumeToken);break;case 1:i.K(),i.F||i.L(),i.O(t.resumeToken);break;case 2:i.K(),i.F||n.removeTarget(r);break;case 3:n.st(r)&&(i.j(),i.O(t.resumeToken));break;case 4:n.st(r)&&(n.it(r),i.O(t.resumeToken));break;default:K()}})},e.prototype.forEachTarget=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.G.forEach(function(i,o){r.st(o)&&n(o)})},e.prototype.rt=function(t){var n=t.targetId,r=t.V.count,i=this.ot(n);if(i){var o=i.target;if(Ls(o))if(r===0){var s=new H(o.path);this.tt(n,s,lt.newNoDocument(s,ie.min()))}else Y(r===1);else this.ct(n)!==r&&(this.it(n),this.Y=this.Y.add(n))}},e.prototype.ut=function(t){var n=this,r=new Map;this.G.forEach(function(s,u){var a=n.ot(u);if(a){if(s.current&&Ls(a.target)){var c=new H(a.target.path);n.H.get(c)!==null||n.at(u,c)||n.tt(u,c,lt.newNoDocument(c,t))}s.$&&(r.set(u,s.M()),s.L())}});var i=Se();this.J.forEach(function(s,u){var a=!0;u.forEachWhile(function(c){var l=n.ot(c);return!l||l.purpose===2||(a=!1,!1)}),a&&(i=i.add(s))});var o=new ll(t,r,this.Y,this.H,i);return this.H=Xt(),this.J=vh(),this.Y=new He(se),o},e.prototype.Z=function(t,n){if(this.st(t)){var r=this.at(t,n.key)?2:0;this.nt(t).B(n.key,r),this.H=this.H.insert(n.key,n),this.J=this.J.insert(n.key,this.ht(n.key).add(t))}},e.prototype.tt=function(t,n,r){if(this.st(t)){var i=this.nt(t);this.at(t,n)?i.B(n,1):i.q(n),this.J=this.J.insert(n,this.ht(n).delete(t)),r&&(this.H=this.H.insert(n,r))}},e.prototype.removeTarget=function(t){this.G.delete(t)},e.prototype.ct=function(t){var n=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size},e.prototype.U=function(t){this.nt(t).U()},e.prototype.nt=function(t){var n=this.G.get(t);return n||(n=new yh,this.G.set(t,n)),n},e.prototype.ht=function(t){var n=this.J.get(t);return n||(n=new He(se),this.J=this.J.insert(t,n)),n},e.prototype.st=function(t){var n=this.ot(t)!==null;return n||O("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.ot=function(t){var n=this.G.get(t);return n&&n.F?null:this.W.lt(t)},e.prototype.it=function(t){var n=this;this.G.set(t,new yh),this.W.getRemoteKeysForTarget(t).forEach(function(r){n.tt(t,r,null)})},e.prototype.at=function(t,n){return this.W.getRemoteKeysForTarget(t).has(n)},e}();function vh(){return new ft(H.comparator)}function wh(){return new ft(H.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zE={asc:"ASCENDING",desc:"DESCENDING"},GE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WE=function(e,t){this.databaseId=e,this.I=t};function ho(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function tm(e,t){return e.I?t.toBase64():t.toUint8Array()}function QE(e,t){return ho(e,t.toTimestamp())}function yt(e){return Y(!!e),ie.fromTimestamp(function(t){var n=Hn(t);return new Et(n.seconds,n.nanos)}(e))}function hl(e,t){return function(n){return new de(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).canonicalString()}function nm(e){var t=de.fromString(e);return Y(cm(t)),t}function po(e,t){return hl(e.databaseId,t.path)}function bn(e,t){var n=nm(t);if(n.get(1)!==e.databaseId.projectId)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new x(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new H(im(n))}function Ja(e,t){return hl(e.databaseId,t)}function rm(e){var t=nm(e);return t.length===4?de.emptyPath():im(t)}function go(e){return new de(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function im(e){return Y(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function bh(e,t,n){return{name:po(e,t),fields:n.value.mapValue.fields}}function YE(e,t,n){var r=bn(e,t.name),i=yt(t.updateTime),o=new Dt({mapValue:{fields:t.fields}}),s=lt.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Us(e,t){var n;if(t instanceof Mo)n={update:bh(e,t.key,t.value)};else if(t instanceof Fo)n={delete:po(e,t.key)};else if(t instanceof Qn)n={update:bh(e,t.key,t.data),updateMask:tI(t.fieldMask)};else{if(!(t instanceof cl))return K();n={verify:po(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,o){var s=o.transform;if(s instanceof li)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof Er)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof Ir)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof fi)return{fieldPath:o.field.canonicalString(),increment:s.A};throw K()}(0,r)})),t.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:QE(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:K()}(e,t.precondition)),n}function _h(e,t){var n=t.currentDocument?function(c){return c.updateTime!==void 0?ut.updateTime(yt(c.updateTime)):c.exists!==void 0?ut.exists(c.exists):ut.none()}(t.currentDocument):ut.none(),r=t.updateTransforms?t.updateTransforms.map(function(c){return function(l,f){var h=null;if("setToServerValue"in f)Y(f.setToServerValue==="REQUEST_TIME"),h=new li;else if("appendMissingElements"in f){var d=f.appendMissingElements.values||[];h=new Er(d)}else if("removeAllFromArray"in f){var g=f.removeAllFromArray.values||[];h=new Ir(g)}else"increment"in f?h=new fi(l,f.increment):K();var m=en.fromServerFormat(f.fieldPath);return new Lo(m,h)}(e,c)}):[];if(t.update){t.update.name;var i=bn(e,t.update.name),o=new Dt({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(c){var l=c.fieldPaths||[];return new si(l.map(function(f){return en.fromServerFormat(f)}))}(t.updateMask);return new Qn(i,o,s,n,r)}return new Mo(i,o,n,r)}if(t.delete){var u=bn(e,t.delete);return new Fo(u,n)}if(t.verify){var a=bn(e,t.verify);return new cl(a,n)}return K()}function om(e,t){return{documents:[Ja(e,t.path)]}}function sm(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=Ja(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ja(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(u){if(u.length!==0){var a=u.map(function(c){return function(l){if(l.op==="=="){if(uh(l.value))return{unaryFilter:{field:Ur(l.field),op:"IS_NAN"}};if(sh(l.value))return{unaryFilter:{field:Ur(l.field),op:"IS_NULL"}}}else if(l.op==="!="){if(uh(l.value))return{unaryFilter:{field:Ur(l.field),op:"IS_NOT_NAN"}};if(sh(l.value))return{unaryFilter:{field:Ur(l.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ur(l.field),op:JE(l.op),value:l.value}}}(c)});return a.length===1?a[0]:{compositeFilter:{op:"AND",filters:a}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(u){if(u.length!==0)return u.map(function(a){return function(c){return{field:Ur(c.field),direction:XE(c.dir)}}(a)})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(u,a){return u.I||xr(a)?a:{value:a}}(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=Eh(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Eh(t.endAt)),n}function um(e){var t=rm(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Y(r===1);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var s=[];n.where&&(s=am(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(f){return function(h){return new Jr(zr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(f)}));var a=null;n.limit&&(a=function(f){var h;return xr(h=typeof f=="object"?f.value:f)?null:h}(n.limit));var c=null;n.startAt&&(c=Ih(n.startAt));var l=null;return n.endAt&&(l=Ih(n.endAt)),Vg(t,i,u,s,a,"F",c,l)}function am(e){return e?e.unaryFilter!==void 0?[eI(e)]:e.fieldFilter!==void 0?[ZE(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return am(t)}).reduce(function(t,n){return t.concat(n)}):K():[]}function Eh(e){return{before:e.before,values:e.position}}function Ih(e){var t=!!e.before,n=e.values||[];return new fo(n,t)}function XE(e){return zE[e]}function JE(e){return GE[e]}function Ur(e){return{fieldPath:e.canonicalString()}}function zr(e){return en.fromServerFormat(e.fieldPath)}function ZE(e){return Pt.create(zr(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return K()}}(e.fieldFilter.op),e.fieldFilter.value)}function eI(e){switch(e.unaryFilter.op){case"IS_NAN":var t=zr(e.unaryFilter.field);return Pt.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=zr(e.unaryFilter.field);return Pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=zr(e.unaryFilter.field);return Pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=zr(e.unaryFilter.field);return Pt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return K()}}function tI(e){var t=[];return e.fields.forEach(function(n){return t.push(n.canonicalString())}),{fieldPaths:t}}function cm(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Th(t)),t=nI(e.get(n),t);return Th(t)}function nI(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Th(e){return e+""}function wn(e){var t=e.length;if(Y(t>=2),t===2)return Y(e.charAt(0)===""&&e.charAt(1)===""),de.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var s=e.indexOf("",o);switch((s<0||s>n)&&K(),e.charAt(s+1)){case"":var u=e.substring(o,s),a=void 0;i.length===0?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=e.substring(o,s),i+="\0";break;case"":i+=e.substring(o,s+1);break;default:K()}o=s+2}return new de(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rI=function(e,t){this.seconds=e,this.nanoseconds=t},Nt=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Nt.store="owner",Nt.key="owner";var Bn=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Bn.store="mutationQueues",Bn.keyPath="userId";var Ae=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Ae.store="mutations",Ae.keyPath="batchId",Ae.userMutationsIndex="userMutationsIndex",Ae.userMutationsKeyPath=["userId","batchId"];var rt=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Jt(n)]},e.key=function(t,n,r){return[t,Jt(n),r]},e}();rt.store="documentMutations",rt.PLACEHOLDER=new rt;var iI=function(e,t){this.path=e,this.readTime=t},oI=function(e,t){this.path=e,this.version=t},Oe=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Oe.store="remoteDocuments",Oe.readTimeIndex="readTimeIndex",Oe.readTimeIndexPath="readTime",Oe.collectionReadTimeIndex="collectionReadTimeIndex",Oe.collectionReadTimeIndexPath=["parentPath","readTime"];var an=function(e){this.byteSize=e};an.store="remoteDocumentGlobal",an.key="remoteDocumentGlobalKey";var _t=function(e,t,n,r,i,o,s){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};_t.store="targets",_t.keyPath="targetId",_t.queryTargetsIndexName="queryTargetsIndex",_t.queryTargetsKeyPath=["canonicalId","targetId"];var Ye=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};Ye.store="targetDocuments",Ye.keyPath=["targetId","path"],Ye.documentTargetsIndex="documentTargetsIndex",Ye.documentTargetsKeyPath=["path","targetId"];var xt=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xt.key="targetGlobalKey",xt.store="targetGlobal";var gr=function(e,t){this.collectionId=e,this.parent=t};gr.store="collectionParents",gr.keyPath=["collectionId","parent"];var _n=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};_n.store="clientMetadata",_n.keyPath="clientId";var hi=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};hi.store="bundles",hi.keyPath="bundleId";var di=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};di.store="namedQueries",di.keyPath="name";var sI=Pe(Pe([],Pe(Pe([],Pe(Pe([],Pe(Pe([],[Bn.store,Ae.store,rt.store,Oe.store,_t.store,Nt.store,xt.store,Ye.store]),[_n.store])),[an.store])),[gr.store])),[hi.store,di.store]),lm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",fm=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},e}(),St=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},R=function(){function e(t){var n=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(r){n.isDone=!0,n.result=r,n.nextCallback&&n.nextCallback(r)},function(r){n.isDone=!0,n.error=r,n.catchCallback&&n.catchCallback(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(i,o){r.nextCallback=function(s){r.wrapSuccess(t,s).next(i,o)},r.catchCallback=function(s){r.wrapFailure(n,s).next(i,o)}})},e.prototype.toPromise=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.waitFor=function(t){return new e(function(n,r){var i=0,o=0,s=!1;t.forEach(function(u){++i,u.next(function(){++o,s&&o===i&&n()},function(a){return r(a)})}),s=!0,o===i&&n()})},e.or=function(t){for(var n=e.resolve(!1),r=function(s){n=n.next(function(u){return u?e.resolve(u):s()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(o,s){i.push(n.call(r,o,s))}),this.waitFor(i)},e}(),hm=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.ft=new St,this.transaction.oncomplete=function(){r.ft.resolve()},this.transaction.onabort=function(){n.error?r.ft.reject(new zi(t,n.error)):r.ft.resolve()},this.transaction.onerror=function(i){var o=dl(i.target.error);r.ft.reject(new zi(t,o))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new zi(n,o)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(O("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new aI(n)},e}(),pi=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,e._t(vr())===12.2&&Ve("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return O("SimpleDb","Removing database:",t),ur(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if(typeof indexedDB>"u")return!1;if(e.gt())return!0;var t=vr(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Tt)==="YES"},e.It=function(t,n){return t.store(n)},e._t=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.Et=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.At=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(O("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(o,s){var u=indexedDB.open(r.name,r.version);u.onsuccess=function(a){var c=a.target.result;o(c)},u.onblocked=function(){s(new zi(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=function(a){var c=a.target.error;c.name==="VersionError"?s(new x(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s(new zi(t,c))},u.onupgradeneeded=function(a){O("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',a.oldVersion);var c=a.target.result;r.wt.Rt(c,u.transaction,a.oldVersion,r.version).next(function(){O("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(o){return r.bt(o)}),this.db)]}})})},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return C(this,void 0,void 0,function(){var o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:o=n==="readonly",s=0,u=function(){var f,h,d,g,m;return S(this,function(w){switch(w.label){case 0:++s,w.label=1;case 1:return w.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=w.sent(),f=hm.open(a.db,t,o?"readonly":"readwrite",r),h=i(f).catch(function(v){return f.abort(v),R.reject(v)}).toPromise(),d={},h.catch(function(){}),[4,f.dt];case 3:return[2,(d.value=(w.sent(),h),d)];case 4:return g=w.sent(),m=g.name!=="FirebaseError"&&s<3,O("SimpleDb","Transaction failed with error:",g.message,"Retrying:",m),a.close(),m?[3,5]:[2,{value:Promise.reject(g)}];case 5:return[2]}})},a=this,l.label=1;case 1:return[5,u()];case 2:if(typeof(c=l.sent())=="object")return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),uI=function(){function e(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(t){this.St=t},e.prototype.delete=function(){return ur(this.Pt.delete())},e}(),zi=function(e){function t(n,r){var i=this;return(i=e.call(this,b.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return Q(t,e),t}(x);function Dr(e){return e.name==="IndexedDbTransactionError"}var aI=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ur(r)},e.prototype.add=function(t){return O("SimpleDb","ADD",this.store.name,t,t),ur(this.store.add(t))},e.prototype.get=function(t){var n=this;return ur(this.store.get(t)).next(function(r){return r===void 0&&(r=null),O("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return O("SimpleDb","DELETE",this.store.name,t),ur(this.store.delete(t))},e.prototype.count=function(){return O("SimpleDb","COUNT",this.store.name),ur(this.store.count())},e.prototype.Nt=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.xt(r,function(o,s){i.push(s)}).next(function(){return i})},e.prototype.kt=function(t,n){O("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.Ft=!1;var i=this.cursor(r);return this.xt(i,function(o,s,u){return u.delete()})},e.prototype.$t=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.xt(i,n)},e.prototype.Ot=function(t){var n=this.cursor({});return new R(function(r,i){n.onerror=function(o){var s=dl(o.target.error);i(s)},n.onsuccess=function(o){var s=o.target.result;s?t(s.primaryKey,s.value).next(function(u){u?s.continue():r()}):r()}})},e.prototype.xt=function(t,n){var r=[];return new R(function(i,o){t.onerror=function(s){o(s.target.error)},t.onsuccess=function(s){var u=s.target.result;if(u){var a=new uI(u),c=n(u.primaryKey,u.value,a);if(c instanceof R){var l=c.catch(function(f){return a.done(),R.reject(f)});r.push(l)}a.isDone?i():a.Dt===null?u.continue():u.continue(a.Dt)}else i()}}).next(function(){return R.waitFor(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.Ft?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ur(e){return new R(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=dl(r.target.error);n(i)}})}var Sh=!1;function dl(e){var t=pi._t(vr());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new x("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Sh||(Sh=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ah=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Mt=n,i.currentSequenceNumber=r,i}return Q(t,e),t}(fm);function At(e,t){var n=U(e);return pi.It(n.Mt,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pl=function(){function e(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return e.prototype.applyToRemoteDocument=function(t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t.key)&&ME(o,t,r[i])}},e.prototype.applyToLocalView=function(t){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t.key)&&Ya(s,t,this.localWriteTime);for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t.key)&&Ya(s,t,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(t){var n=this;this.mutations.forEach(function(r){var i=t.get(r.key),o=i;n.applyToLocalView(o),i.isValidDocument()||o.convertToNoDocument(ie.min())})},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Se())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&oi(this.mutations,t.mutations,function(n,r){return hh(n,r)})&&oi(this.baseMutations,t.baseMutations,function(n,r){return hh(n,r)})},e}(),cI=function(){function e(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return e.from=function(t,n,r){Y(t.mutations.length===r.length);for(var i=qE(),o=t.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new e(t,n,r,i)},e}(),Nu=function(){function e(t,n,r,i,o,s,u){o===void 0&&(o=ie.min()),s===void 0&&(s=ie.min()),u===void 0&&(u=Tt.EMPTY_BYTE_STRING),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),dm=function(e){this.Lt=e};function Za(e,t){if(t.document)return YE(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=H.fromSegments(t.noDocument.path),r=mi(t.noDocument.readTime),i=lt.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=H.fromSegments(t.unknownDocument.path);return r=mi(t.unknownDocument.version),lt.newUnknownDocument(o,r)}return K()}function Ch(e,t,n){var r=gl(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(f,h){return{name:po(f,h.key),fields:h.data.value.mapValue.fields,updateTime:ho(f,h.version.toTimestamp())}}(e.Lt,t),s=t.hasCommittedMutations;return new Oe(null,null,o,s,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),a=gi(t.version);return s=t.hasCommittedMutations,new Oe(null,new iI(u,a),null,s,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=gi(t.version);return new Oe(new oI(c,l),null,null,!0,r,i)}return K()}function gl(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function pm(e){var t=new Et(e[0],e[1]);return ie.fromTimestamp(t)}function gi(e){var t=e.toTimestamp();return new rI(t.seconds,t.nanoseconds)}function mi(e){var t=new Et(e.seconds,e.nanoseconds);return ie.fromTimestamp(t)}function $r(e,t){for(var n=(t.baseMutations||[]).map(function(a){return _h(e.Lt,a)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var s=t.mutations.map(function(a){return _h(e.Lt,a)}),u=Et.fromMillis(t.localWriteTimeMs);return new pl(t.batchId,u,n,s)}function Ui(e){var t,n,r=mi(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?mi(e.lastLimboFreeSnapshotVersion):ie.min();return e.query.documents!==void 0?(Y((n=e.query).documents.length===1),t=dn(Oo(rm(n.documents[0])))):t=function(o){return dn(um(o))}(e.query),new Nu(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Tt.fromBase64String(e.resumeToken))}function gm(e,t){var n,r=gi(t.snapshotVersion),i=gi(t.lastLimboFreeSnapshotVersion);n=Ls(t.target)?om(e.Lt,t.target):sm(e.Lt,t.target);var o=t.resumeToken.toBase64();return new _t(t.targetId,Ro(t.target),r,o,t.sequenceNumber,i,n)}function mm(e){var t=um({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?jg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lI=function(){function e(){}return e.prototype.getBundleMetadata=function(t,n){return Nh(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:mi(i.createTime),version:i.version};var i})},e.prototype.saveBundleMetadata=function(t,n){return Nh(t).put({bundleId:(r=n).id,createTime:gi(yt(r.createTime)),version:r.version});var r},e.prototype.getNamedQuery=function(t,n){return xh(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:mm(i.bundledQuery),readTime:mi(i.readTime)};var i})},e.prototype.saveNamedQuery=function(t,n){return xh(t).put(function(r){return{name:r.name,readTime:gi(yt(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function Nh(e){return At(e,hi.store)}function xh(e){return At(e,di.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fI=function(){function e(){this.Bt=new ml}return e.prototype.addToCollectionParentIndex=function(t,n){return this.Bt.add(n),R.resolve()},e.prototype.getCollectionParents=function(t,n){return R.resolve(this.Bt.getEntries(n))},e}(),ml=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new He(de.comparator),o=!i.has(r);return this.index[n]=i.add(r),o},e.prototype.has=function(t){var n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new He(de.comparator)).toArray()},e}(),hI=function(){function e(){this.qt=new ml}return e.prototype.addToCollectionParentIndex=function(t,n){var r=this;if(!this.qt.has(n)){var i=n.lastSegment(),o=n.popLast();t.addOnCommittedListener(function(){r.qt.add(n)});var s={collectionId:i,parent:Jt(o)};return Dh(t).put(s)}return R.resolve()},e.prototype.getCollectionParents=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[Og(n),""],!1,!0);return Dh(t).Nt(i).next(function(o){for(var s=0,u=o;s<u.length;s++){var a=u[s];if(a.collectionId!==n)break;r.push(wn(a.parent))}return r})},e}();function Dh(e){return At(e,gr.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rn=function(){function e(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(e,t,n){var r=e.store(Ae.store),i=e.store(rt.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.$t({range:s},function(g,m,w){return u++,w.delete()});o.push(a.next(function(){Y(u===1)}));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],d=rt.key(t,h.key.path,n.batchId);o.push(i.delete(d)),c.push(h.key)}return R.waitFor(o).next(function(){return c})}function Vs(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw K();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);var dI=function(){function e(t,n,r,i){this.userId=t,this.R=n,this.Ut=r,this.referenceDelegate=i,this.Kt={}}return e.Qt=function(t,n,r,i){return Y(t.uid!==""),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dn(t).$t({index:Ae.userMutationsIndex,range:r},function(i,o,s){n=!1,s.done()}).next(function(){return n})},e.prototype.addMutationBatch=function(t,n,r,i){var o=this,s=Kr(t),u=Dn(t);return u.add({}).next(function(a){Y(typeof a=="number");for(var c=new pl(a,n,r,i),l=function(v,T,E){var M=E.baseMutations.map(function(X){return Us(v.Lt,X)}),$=E.mutations.map(function(X){return Us(v.Lt,X)});return new Ae(T,E.batchId,E.localWriteTime.toMillis(),M,$)}(o.R,o.userId,c),f=[],h=new He(function(v,T){return se(v.canonicalString(),T.canonicalString())}),d=0,g=i;d<g.length;d++){var m=g[d],w=rt.key(o.userId,m.key.path,a);h=h.add(m.key.path.popLast()),f.push(u.put(l)),f.push(s.put(w,rt.PLACEHOLDER))}return h.forEach(function(v){f.push(o.Ut.addToCollectionParentIndex(t,v))}),t.addOnCommittedListener(function(){o.Kt[a]=c.keys()}),R.waitFor(f).next(function(){return c})})},e.prototype.lookupMutationBatch=function(t,n){var r=this;return Dn(t).get(n).next(function(i){return i?(Y(i.userId===r.userId),$r(r.R,i)):null})},e.prototype.jt=function(t,n){var r=this;return this.Kt[n]?R.resolve(this.Kt[n]):this.lookupMutationBatch(t,n).next(function(i){if(i){var o=i.keys();return r.Kt[n]=o,o}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=this,i=n+1,o=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Dn(t).$t({index:Ae.userMutationsIndex,range:o},function(u,a,c){a.userId===r.userId&&(Y(a.batchId>=i),s=$r(r.R,a)),c.done()}).next(function(){return s})},e.prototype.getHighestUnacknowledgedBatchId=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Dn(t).$t({index:Ae.userMutationsIndex,range:n,reverse:!0},function(i,o,s){r=o.batchId,s.done()}).next(function(){return r})},e.prototype.getAllMutationBatches=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dn(t).Nt(Ae.userMutationsIndex,r).next(function(i){return i.map(function(o){return $r(n.R,o)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=rt.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),s=[];return Kr(t).$t({range:o},function(u,a,c){var l=u[0],f=u[1],h=u[2],d=wn(f);if(l===r.userId&&n.path.isEqual(d))return Dn(t).get(h).next(function(g){if(!g)throw K();Y(g.userId===r.userId),s.push($r(r.R,g))});c.done()}).next(function(){return s})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new He(se),o=[];return n.forEach(function(s){var u=rt.prefixForPath(r.userId,s.path),a=IDBKeyRange.lowerBound(u),c=Kr(t).$t({range:a},function(l,f,h){var d=l[0],g=l[1],m=l[2],w=wn(g);d===r.userId&&s.path.isEqual(w)?i=i.add(m):h.done()});o.push(c)}),R.waitFor(o).next(function(){return r.Wt(t,i)})},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=this,i=n.path,o=i.length+1,s=rt.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(s),a=new He(se);return Kr(t).$t({range:u},function(c,l,f){var h=c[0],d=c[1],g=c[2],m=wn(d);h===r.userId&&i.isPrefixOf(m)?m.length===o&&(a=a.add(g)):f.done()}).next(function(){return r.Wt(t,a)})},e.prototype.Wt=function(t,n){var r=this,i=[],o=[];return n.forEach(function(s){o.push(Dn(t).get(s).next(function(u){if(u===null)throw K();Y(u.userId===r.userId),i.push($r(r.R,u))}))}),R.waitFor(o).next(function(){return i})},e.prototype.removeMutationBatch=function(t,n){var r=this;return ym(t.Mt,this.userId,n).next(function(i){return t.addOnCommittedListener(function(){r.Gt(n.batchId)}),R.forEach(i,function(o){return r.referenceDelegate.markPotentiallyOrphaned(t,o)})})},e.prototype.Gt=function(t){delete this.Kt[t]},e.prototype.performConsistencyCheck=function(t){var n=this;return this.checkEmpty(t).next(function(r){if(!r)return R.resolve();var i=IDBKeyRange.lowerBound(rt.prefixForUser(n.userId)),o=[];return Kr(t).$t({range:i},function(s,u,a){if(s[0]===n.userId){var c=wn(s[1]);o.push(c)}else a.done()}).next(function(){Y(o.length===0)})})},e.prototype.containsKey=function(t,n){return vm(t,this.userId,n)},e.prototype.zt=function(t){var n=this;return wm(t).get(this.userId).next(function(r){return r||new Bn(n.userId,-1,"")})},e}();function vm(e,t,n){var r=rt.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Kr(e).$t({range:o,Ft:!0},function(u,a,c){var l=u[0],f=u[1];u[2],l===t&&f===i&&(s=!0),c.done()}).next(function(){return s})}function Dn(e){return At(e,Ae.store)}function Kr(e){return At(e,rt.store)}function wm(e){return At(e,Bn.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var js=function(){function e(t){this.Ht=t}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),pI=function(){function e(t,n){this.referenceDelegate=t,this.R=n}return e.prototype.allocateTargetId=function(t){var n=this;return this.Xt(t).next(function(r){var i=new js(r.highestTargetId);return r.highestTargetId=i.next(),n.Zt(t,r).next(function(){return r.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(n){return ie.fromTimestamp(new Et(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.Xt(t).next(function(o){return o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),i.Zt(t,o)})},e.prototype.addTargetData=function(t,n){var r=this;return this.te(t,n).next(function(){return r.Xt(t).next(function(i){return i.targetCount+=1,r.ee(n,i),r.Zt(t,i)})})},e.prototype.updateTargetData=function(t,n){return this.te(t,n)},e.prototype.removeTargetData=function(t,n){var r=this;return this.removeMatchingKeysForTargetId(t,n.targetId).next(function(){return Vr(t).delete(n.targetId)}).next(function(){return r.Xt(t)}).next(function(i){return Y(i.targetCount>0),i.targetCount-=1,r.Zt(t,i)})},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,s=[];return Vr(t).$t(function(u,a){var c=Ui(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(o++,s.push(i.removeTargetData(t,c)))}).next(function(){return R.waitFor(s)}).next(function(){return o})},e.prototype.forEachTarget=function(t,n){return Vr(t).$t(function(r,i){var o=Ui(i);n(o)})},e.prototype.Xt=function(t){return Oh(t).get(xt.key).next(function(n){return Y(n!==null),n})},e.prototype.Zt=function(t,n){return Oh(t).put(xt.key,n)},e.prototype.te=function(t,n){return Vr(t).put(gm(this.R,n))},e.prototype.ee=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.getTargetCount=function(t){return this.Xt(t).next(function(n){return n.targetCount})},e.prototype.getTargetData=function(t,n){var r=Ro(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Vr(t).$t({range:i,index:_t.queryTargetsIndexName},function(s,u,a){var c=Ui(u);Tu(n,c.target)&&(o=c,a.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(t,n,r){var i=this,o=[],s=Mn(t);return n.forEach(function(u){var a=Jt(u.path);o.push(s.put(new Ye(r,a))),o.push(i.referenceDelegate.addReference(t,r,u))}),R.waitFor(o)},e.prototype.removeMatchingKeys=function(t,n,r){var i=this,o=Mn(t);return R.forEach(n,function(s){var u=Jt(s.path);return R.waitFor([o.delete([r,u]),i.referenceDelegate.removeReference(t,r,s)])})},e.prototype.removeMatchingKeysForTargetId=function(t,n){var r=Mn(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Mn(t),o=Se();return i.$t({range:r,Ft:!0},function(s,u,a){var c=wn(s[1]),l=new H(c);o=o.add(l)}).next(function(){return o})},e.prototype.containsKey=function(t,n){var r=Jt(n.path),i=IDBKeyRange.bound([r],[Og(r)],!1,!0),o=0;return Mn(t).$t({index:Ye.documentTargetsIndex,Ft:!0,range:i},function(s,u,a){var c=s[0];s[1],c!==0&&(o++,a.done())}).next(function(){return o>0})},e.prototype.lt=function(t,n){return Vr(t).get(n).next(function(r){return r?Ui(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(e){return At(e,_t.store)}function Oh(e){return At(e,xt.store)}function Mn(e){return At(e,Ye.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e){return C(this,void 0,void 0,function(){return S(this,function(t){if(e.code!==b.FAILED_PRECONDITION||e.message!==lm)throw e;return O("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],s=se(n,i);return s===0?se(r,o):s}var gI=function(){function e(t){this.ne=t,this.buffer=new He(Ph),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(t){var n=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();Ph(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),mI=function(){function e(t,n){this.garbageCollector=t,this.asyncQueue=n,this.oe=!1,this.ce=null}return e.prototype.start=function(t){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.ue(t)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return this.ce!==null},enumerable:!1,configurable:!0}),e.prototype.ue=function(t){var n=this,r=this.oe?3e5:6e4;O("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,function(){return C(n,void 0,void 0,function(){var i;return S(this,function(o){switch(o.label){case 0:this.ce=null,this.oe=!0,o.label=1;case 1:return o.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return o.sent(),[3,7];case 3:return Dr(i=o.sent())?(O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Rr(i)];case 5:o.sent(),o.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return o.sent(),[2]}})})})},e}(),yI=function(){function e(t,n){this.ae=t,this.params=n}return e.prototype.calculateTargetCount=function(t,n){return this.ae.he(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.nthSequenceNumber=function(t,n){var r=this;if(n===0)return R.resolve(Ot.o);var i=new gI(n);return this.ae.forEachTarget(t,function(o){return i.re(o.sequenceNumber)}).next(function(){return r.ae.le(t,function(o){return i.re(o)})}).next(function(){return i.maxValue})},e.prototype.removeTargets=function(t,n,r){return this.ae.removeTargets(t,n,r)},e.prototype.removeOrphanedDocuments=function(t,n){return this.ae.removeOrphanedDocuments(t,n)},e.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Rh)):this.getCacheSize(t).next(function(i){return i<r.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Rh):r.fe(t,n)})},e.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},e.prototype.fe=function(t,n){var r,i,o,s,u,a,c,l=this,f=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(h){return h>l.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+h),i=l.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),l.nthSequenceNumber(t,i)}).next(function(h){return r=h,u=Date.now(),l.removeTargets(t,r,n)}).next(function(h){return o=h,a=Date.now(),l.removeOrphanedDocuments(t,r)}).next(function(h){return c=Date.now(),za()<=fe.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(s-f)+`ms
	Determined least recently used `+i+" in "+(u-s)+`ms
	Removed `+o+" targets in "+(a-u)+`ms
	Removed `+h+" documents in "+(c-a)+`ms
Total Duration: `+(c-f)+"ms"),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})})},e}(),vI=function(){function e(t,n){this.db=t,this.garbageCollector=function(r,i){return new yI(r,i)}(this,n)}return e.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.de=function(t){var n=0;return this.le(t,function(r){n++}).next(function(){return n})},e.prototype.forEachTarget=function(t,n){return this.db.getTargetCache().forEachTarget(t,n)},e.prototype.le=function(t,n){return this.we(t,function(r,i){return n(i)})},e.prototype.addReference=function(t,n,r){return es(t,r)},e.prototype.removeReference=function(t,n,r){return es(t,r)},e.prototype.removeTargets=function(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)},e.prototype.markPotentiallyOrphaned=function(t,n){return es(t,n)},e.prototype._e=function(t,n){return function(r,i){var o=!1;return wm(r).Ot(function(s){return vm(r,s,i).next(function(u){return u&&(o=!0),R.resolve(!u)})}).next(function(){return o})}(t,n)},e.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[],s=0;return this.we(t,function(u,a){if(a<=n){var c=r._e(t,u).next(function(l){if(!l)return s++,i.getEntry(t,u).next(function(){return i.removeEntry(u),Mn(t).delete([0,Jt(u.path)])})});o.push(c)}}).next(function(){return R.waitFor(o)}).next(function(){return i.apply(t)}).next(function(){return s})},e.prototype.removeTarget=function(t,n){var r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)},e.prototype.updateLimboDocument=function(t,n){return es(t,n)},e.prototype.we=function(t,n){var r,i=Mn(t),o=Ot.o;return i.$t({index:Ye.documentTargetsIndex},function(s,u){var a=s[0];s[1];var c=u.path,l=u.sequenceNumber;a===0?(o!==Ot.o&&n(new H(wn(r)),o),o=l,r=c):o=Ot.o}).next(function(){o!==Ot.o&&n(new H(wn(r)),o)})},e.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},e}();function es(e,t){return Mn(e).put(function(n,r){return new Ye(0,Jt(n.path),r)}(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai=function(){function e(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return e.prototype.get=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0)for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];if(this.equalsFn(u,t))return a}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.mapKeyFn(t),i=this.inner[r];if(i!==void 0){for(var o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,n]);i.push([t,n])}else this.inner[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Nr(this.inner,function(n,r){for(var i=0,o=r;i<o.length;i++){var s=o[i],u=s[0],a=s[1];t(u,a)}})},e.prototype.isEmpty=function(){return Pg(this.inner)},e}(),bm=function(){function e(){this.changes=new Ai(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.changesApplied=!1}return e.prototype.getReadTime=function(t){var n=this.changes.get(t);return n?n.readTime:ie.min()},e.prototype.addEntry=function(t,n){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:n})},e.prototype.removeEntry=function(t,n){n===void 0&&(n=null),this.assertNotApplied(),this.changes.set(t,{document:lt.newInvalidDocument(t),readTime:n})},e.prototype.getEntry=function(t,n){this.assertNotApplied();var r=this.changes.get(n);return r!==void 0?R.resolve(r.document):this.getFromCache(t,n)},e.prototype.getEntries=function(t,n){return this.getAllFromCache(t,n)},e.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},e.prototype.assertNotApplied=function(){},e}(),wI=function(){function e(t,n){this.R=t,this.Ut=n}return e.prototype.addEntry=function(t,n,r){return kn(t).put(ts(n),r)},e.prototype.removeEntry=function(t,n){var r=kn(t),i=ts(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.me(t,i)})},e.prototype.getEntry=function(t,n){var r=this;return kn(t).get(ts(n)).next(function(i){return r.ye(n,i)})},e.prototype.ge=function(t,n){var r=this;return kn(t).get(ts(n)).next(function(i){return{document:r.ye(n,i),size:Vs(i)}})},e.prototype.getEntries=function(t,n){var r=this,i=Xt();return this.pe(t,n,function(o,s){var u=r.ye(o,s);i=i.insert(o,u)}).next(function(){return i})},e.prototype.Ee=function(t,n){var r=this,i=Xt(),o=new ft(H.comparator);return this.pe(t,n,function(s,u){var a=r.ye(s,u);i=i.insert(s,a),o=o.insert(s,Vs(u))}).next(function(){return{documents:i,Te:o}})},e.prototype.pe=function(t,n,r){if(n.isEmpty())return R.resolve();var i=IDBKeyRange.bound(n.first().path.toArray(),n.last().path.toArray()),o=n.getIterator(),s=o.getNext();return kn(t).$t({range:i},function(u,a,c){for(var l=H.fromSegments(u);s&&H.comparator(s,l)<0;)r(s,null),s=o.getNext();s&&s.isEqual(l)&&(r(s,a),s=o.hasNext()?o.getNext():null),s?c.Ct(s.path.toArray()):c.done()}).next(function(){for(;s;)r(s,null),s=o.hasNext()?o.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){var i=this,o=Xt(),s=n.path.length+1,u={};if(r.isEqual(ie.min())){var a=n.path.toArray();u.range=IDBKeyRange.lowerBound(a)}else{var c=n.path.toArray(),l=gl(r);u.range=IDBKeyRange.lowerBound([c,l],!0),u.index=Oe.collectionReadTimeIndex}return kn(t).$t(u,function(f,h,d){if(f.length===s){var g=Za(i.R,h);n.path.isPrefixOf(g.key.path)?ko(n,g)&&(o=o.insert(g.key,g)):d.done()}}).next(function(){return o})},e.prototype.newChangeBuffer=function(t){return new bI(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return kh(t).get(an.key).next(function(n){return Y(!!n),n})},e.prototype.me=function(t,n){return kh(t).put(an.key,n)},e.prototype.ye=function(t,n){if(n){var r=Za(this.R,n);if(!r.isNoDocument()||!r.version.isEqual(ie.min()))return r}return lt.newInvalidDocument(t)},e}(),bI=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Ie=n,i.trackRemovals=r,i.Ae=new Ai(function(o){return o.toString()},function(o,s){return o.isEqual(s)}),i}return Q(t,e),t.prototype.applyChanges=function(n){var r=this,i=[],o=0,s=new He(function(u,a){return se(u.canonicalString(),a.canonicalString())});return this.changes.forEach(function(u,a){var c=r.Ae.get(u);if(a.document.isValidDocument()){var l=Ch(r.Ie.R,a.document,r.getReadTime(u));s=s.add(u.path.popLast());var f=Vs(l);o+=f-c,i.push(r.Ie.addEntry(n,u,l))}else if(o-=c,r.trackRemovals){var h=Ch(r.Ie.R,lt.newNoDocument(u,ie.min()),r.getReadTime(u));i.push(r.Ie.addEntry(n,u,h))}else i.push(r.Ie.removeEntry(n,u))}),s.forEach(function(u){i.push(r.Ie.Ut.addToCollectionParentIndex(n,u))}),i.push(this.Ie.updateMetadata(n,o)),R.waitFor(i)},t.prototype.getFromCache=function(n,r){var i=this;return this.Ie.ge(n,r).next(function(o){return i.Ae.set(r,o.size),o.document})},t.prototype.getAllFromCache=function(n,r){var i=this;return this.Ie.Ee(n,r).next(function(o){var s=o.documents;return o.Te.forEach(function(u,a){i.Ae.set(u,a)}),s})},t}(bm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(e){return At(e,an.store)}function kn(e){return At(e,Oe.store)}function ts(e){return e.path.toArray()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _I=function(){function e(t){this.R=t}return e.prototype.Rt=function(t,n,r,i){var o=this;Y(r<i&&r>=0&&i<=11);var s=new hm("createOrUpgrade",n);r<1&&i>=1&&(function(a){a.createObjectStore(Nt.store)}(t),function(a){a.createObjectStore(Bn.store,{keyPath:Bn.keyPath}),a.createObjectStore(Ae.store,{keyPath:Ae.keyPath,autoIncrement:!0}).createIndex(Ae.userMutationsIndex,Ae.userMutationsKeyPath,{unique:!0}),a.createObjectStore(rt.store)}(t),Lh(t),function(a){a.createObjectStore(Oe.store)}(t));var u=R.resolve();return r<3&&i>=3&&(r!==0&&(function(a){a.deleteObjectStore(Ye.store),a.deleteObjectStore(_t.store),a.deleteObjectStore(xt.store)}(t),Lh(t)),u=u.next(function(){return function(a){var c=a.store(xt.store),l=new xt(0,0,ie.min().toTimestamp(),0);return c.put(xt.key,l)}(s)})),r<4&&i>=4&&(r!==0&&(u=u.next(function(){return function(a,c){return c.store(Ae.store).Nt().next(function(l){a.deleteObjectStore(Ae.store),a.createObjectStore(Ae.store,{keyPath:Ae.keyPath,autoIncrement:!0}).createIndex(Ae.userMutationsIndex,Ae.userMutationsKeyPath,{unique:!0});var f=c.store(Ae.store),h=l.map(function(d){return f.put(d)});return R.waitFor(h)})}(t,s)})),u=u.next(function(){(function(a){a.createObjectStore(_n.store,{keyPath:_n.keyPath})})(t)})),r<5&&i>=5&&(u=u.next(function(){return o.Re(s)})),r<6&&i>=6&&(u=u.next(function(){return function(a){a.createObjectStore(an.store)}(t),o.be(s)})),r<7&&i>=7&&(u=u.next(function(){return o.ve(s)})),r<8&&i>=8&&(u=u.next(function(){return o.Pe(t,s)})),r<9&&i>=9&&(u=u.next(function(){(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(t),function(a){var c=a.objectStore(Oe.store);c.createIndex(Oe.readTimeIndex,Oe.readTimeIndexPath,{unique:!1}),c.createIndex(Oe.collectionReadTimeIndex,Oe.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(u=u.next(function(){return o.Ve(s)})),r<11&&i>=11&&(u=u.next(function(){(function(a){a.createObjectStore(hi.store,{keyPath:hi.keyPath})})(t),function(a){a.createObjectStore(di.store,{keyPath:di.keyPath})}(t)})),u},e.prototype.be=function(t){var n=0;return t.store(Oe.store).$t(function(r,i){n+=Vs(i)}).next(function(){var r=new an(n);return t.store(an.store).put(an.key,r)})},e.prototype.Re=function(t){var n=this,r=t.store(Bn.store),i=t.store(Ae.store);return r.Nt().next(function(o){return R.forEach(o,function(s){var u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.Nt(Ae.userMutationsIndex,u).next(function(a){return R.forEach(a,function(c){Y(c.userId===s.userId);var l=$r(n.R,c);return ym(t,s.userId,l).next(function(){})})})})})},e.prototype.ve=function(t){var n=t.store(Ye.store),r=t.store(Oe.store);return t.store(xt.store).get(xt.key).next(function(i){var o=[];return r.$t(function(s,u){var a=new de(s),c=function(l){return[0,Jt(l)]}(a);o.push(n.get(c).next(function(l){return l?R.resolve():function(f){return n.put(new Ye(0,Jt(f),i.highestListenSequenceNumber))}(a)}))}).next(function(){return R.waitFor(o)})})},e.prototype.Pe=function(t,n){t.createObjectStore(gr.store,{keyPath:gr.keyPath});var r=n.store(gr.store),i=new ml,o=function(s){if(i.add(s)){var u=s.lastSegment(),a=s.popLast();return r.put({collectionId:u,parent:Jt(a)})}};return n.store(Oe.store).$t({Ft:!0},function(s,u){var a=new de(s);return o(a.popLast())}).next(function(){return n.store(rt.store).$t({Ft:!0},function(s,u){s[0];var a=s[1];s[2];var c=wn(a);return o(c.popLast())})})},e.prototype.Ve=function(t){var n=this,r=t.store(_t.store);return r.$t(function(i,o){var s=Ui(o),u=gm(n.R,s);return r.put(u)})},e}();function Lh(e){e.createObjectStore(Ye.store,{keyPath:Ye.keyPath}).createIndex(Ye.documentTargetsIndex,Ye.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(_t.store,{keyPath:_t.keyPath}).createIndex(_t.queryTargetsIndexName,_t.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(xt.store)}var la="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",EI=function(){function e(t,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=u,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(f){return Promise.resolve()},!e.yt())throw new x(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vI(this,i),this.Le=n+"main",this.R=new dm(a),this.Be=new pi(this.Le,11,new _I(this.R)),this.qe=new pI(this.referenceDelegate,this.R),this.Ut=new hI,this.Ue=function(f,h){return new wI(f,h)}(this.R,this.Ut),this.Ke=new lI,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,l===!1&&Ve("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,la);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t.qe.getHighestSequenceNumber(n)})}).then(function(n){t.Ne=new Ot(n,t.De)}).then(function(){t.xe=!0}).catch(function(n){return t.Be&&t.Be.close(),Promise.reject(n)})},e.prototype.He=function(t){var n=this;return this.Me=function(r){return C(n,void 0,void 0,function(){return S(this,function(i){return this.started?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(t){var n=this;this.Be.vt(function(r){return C(n,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return C(n,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return ns(n).put(new _n(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(n).next(function(r){r||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(n)}).next(function(r){return t.isPrimary&&!r?t.Xe(n).next(function(){return!1}):!!r&&t.Ze(n).next(function(){return!0})})}).catch(function(n){if(Dr(n))return O("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Se.enqueueRetryable(function(){return t.Me(n)}),t.isPrimary=n})},e.prototype.Je=function(t){var n=this;return Li(t).get(Nt.key).next(function(r){return R.resolve(n.tn(r))})},e.prototype.en=function(t){return ns(t).delete(this.clientId)},e.prototype.nn=function(){return C(this,void 0,void 0,function(){var t,n,r,i,o=this;return S(this,function(s){switch(s.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(u){var a=At(u,_n.store);return a.Nt().next(function(c){var l=o.rn(c,18e5),f=c.filter(function(h){return l.indexOf(h)===-1});return R.forEach(f,function(h){return a.delete(h.clientId)}).next(function(){return f})})}).catch(function(){return[]})]);case 1:if(t=s.sent(),this.Qe)for(n=0,r=t;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));s.label=2;case 2:return[2]}})})},e.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},e.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.Ye=function(t){var n=this;return this.Ce?R.resolve(!0):Li(t).get(Nt.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)){if(n.tn(r)&&n.networkEnabled)return!0;if(!n.tn(r)){if(!r.allowTabSynchronization)throw new x(b.FAILED_PRECONDITION,la);return!1}}return!(!n.networkEnabled||!n.inForeground)||ns(t).Nt().next(function(i){return n.rn(i,5e3).find(function(o){if(n.clientId!==o.clientId){var s=!n.networkEnabled&&o.networkEnabled,u=!n.inForeground&&o.inForeground,a=n.networkEnabled===o.networkEnabled;if(s||u&&a)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&O("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.shutdown=function(){return C(this,void 0,void 0,function(){var t=this;return S(this,function(n){switch(n.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Nt.store,_n.store],function(r){var i=new Ah(r,Ot.o);return t.Xe(i).next(function(){return t.en(i)})})];case 1:return n.sent(),this.Be.close(),this.ln(),[2]}})})},e.prototype.rn=function(t,n){var r=this;return t.filter(function(i){return r.sn(i.updateTimeMs,n)&&!r.cn(i.clientId)})},e.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return ns(n).Nt().next(function(r){return t.rn(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(t){return dI.Qt(t,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;O("IndexedDbPersistence","Starting transaction:",t);var o,s=n==="readonly"?"readonly":"readwrite";return this.Be.runTransaction(t,s,sI,function(u){return o=new Ah(u,i.Ne?i.Ne.next():Ot.o),n==="readwrite-primary"?i.Je(o).next(function(a){return!!a||i.Ye(o)}).next(function(a){if(!a)throw Ve("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new x(b.FAILED_PRECONDITION,lm);return r(o)}).next(function(a){return i.Ze(o).next(function(){return a})}):i.dn(o).next(function(){return r(o)})}).then(function(u){return o.raiseOnCommittedEvent(),u})},e.prototype.dn=function(t){var n=this;return Li(t).get(Nt.key).next(function(r){if(r!==null&&n.sn(r.leaseTimestampMs,5e3)&&!n.cn(r.ownerId)&&!n.tn(r)&&!(n.Ce||n.allowTabSynchronization&&r.allowTabSynchronization))throw new x(b.FAILED_PRECONDITION,la)})},e.prototype.Ze=function(t){var n=new Nt(this.clientId,this.allowTabSynchronization,Date.now());return Li(t).put(Nt.key,n)},e.yt=function(){return pi.yt()},e.prototype.Xe=function(t){var n=this,r=Li(t);return r.get(Nt.key).next(function(i){return n.tn(i)?(O("IndexedDbPersistence","Releasing primary lease."),r.delete(Nt.key)):R.resolve()})},e.prototype.sn=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Ve("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.We=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Fe=function(){t.Se.enqueueAndForget(function(){return t.inForeground=t.document.visibilityState==="visible",t.je()})},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground=this.document.visibilityState==="visible")},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ke=function(){n.un(),Nb()&&navigator.appVersion.match("Version/14")&&n.Se.enterRestrictedMode(!0),n.Se.enqueueAndForget(function(){return n.shutdown()})},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(t){var n;try{var r=((n=this.Qe)===null||n===void 0?void 0:n.getItem(this.on(t)))!==null;return O("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Ve("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ve("Failed to set zombie client id.",t)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch{}},e.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Li(e){return At(e,Nt.store)}function ns(e){return At(e,_n.store)}function yl(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var _m=function(){function e(t,n,r){this.Ue=t,this._n=n,this.Ut=r}return e.prototype.mn=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(i){return r.yn(t,n,i)})},e.prototype.yn=function(t,n,r){return this.Ue.getEntry(t,n).next(function(i){for(var o=0,s=r;o<s.length;o++)s[o].applyToLocalView(i);return i})},e.prototype.gn=function(t,n){t.forEach(function(r,i){for(var o=0,s=n;o<s.length;o++)s[o].applyToLocalView(i)})},e.prototype.pn=function(t,n){var r=this;return this.Ue.getEntries(t,n).next(function(i){return r.En(t,i).next(function(){return i})})},e.prototype.En=function(t,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,n).next(function(i){return r.gn(n,i)})},e.prototype.getDocumentsMatchingQuery=function(t,n,r){return function(i){return H.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.Tn(t,n.path):al(n)?this.In(t,n,r):this.An(t,n,r)},e.prototype.Tn=function(t,n){return this.mn(t,new H(n)).next(function(r){var i=Xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})},e.prototype.In=function(t,n,r){var i=this,o=n.collectionGroup,s=Xa();return this.Ut.getCollectionParents(t,o).next(function(u){return R.forEach(u,function(a){var c=function(l,f){return new An(f,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(n,a.child(o));return i.An(t,c,r).next(function(l){l.forEach(function(f,h){s=s.insert(f,h)})})}).next(function(){return s})})},e.prototype.An=function(t,n,r){var i,o,s=this;return this.Ue.getDocumentsMatchingQuery(t,n,r).next(function(u){return i=u,s._n.getAllMutationBatchesAffectingQuery(t,n)}).next(function(u){return o=u,s.Rn(t,o,i).next(function(a){i=a;for(var c=0,l=o;c<l.length;c++)for(var f=l[c],h=0,d=f.mutations;h<d.length;h++){var g=d[h],m=g.key,w=i.get(m);w==null&&(w=lt.newInvalidDocument(m),i=i.insert(m,w)),Ya(g,w,f.localWriteTime),w.isFoundDocument()||(i=i.remove(m))}})}).next(function(){return i.forEach(function(u,a){ko(n,a)||(i=i.remove(u))}),i})},e.prototype.Rn=function(t,n,r){for(var i=Se(),o=0,s=n;o<s.length;o++)for(var u=0,a=s[o].mutations;u<a.length;u++){var c=a[u];c instanceof Qn&&r.get(c.key)===null&&(i=i.add(c.key))}var l=r;return this.Ue.getEntries(t,i).next(function(f){return f.forEach(function(h,d){d.isFoundDocument()&&(l=l.insert(h,d))}),l})},e}(),II=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.bn=r,this.vn=i}return e.Pn=function(t,n){for(var r=Se(),i=Se(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Em=function(){function e(){}return e.prototype.Vn=function(t){this.Sn=t},e.prototype.getDocumentsMatchingQuery=function(t,n,r,i){var o=this;return function(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}(n)||r.isEqual(ie.min())?this.Dn(t,n):this.Sn.pn(t,i).next(function(s){var u=o.Cn(n,s);return(fs(n)||Fs(n))&&o.Nn(n.limitType,u,i,r)?o.Dn(t,n):(za()<=fe.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qa(n)),o.Sn.getDocumentsMatchingQuery(t,n,r).next(function(a){return u.forEach(function(c){a=a.insert(c.key,c)}),a}))})},e.prototype.Cn=function(t,n){var r=new He(qg(t));return n.forEach(function(i,o){ko(t,o)&&(r=r.add(o))}),r},e.prototype.Nn=function(t,n,r,i){if(r.size!==n.size)return!0;var o=t==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)},e.prototype.Dn=function(t,n){return za()<=fe.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.Sn.getDocumentsMatchingQuery(t,n,ie.min())},e}(),TI=function(){function e(t,n,r,i){this.persistence=t,this.xn=n,this.R=i,this.kn=new ft(se),this.Fn=new Ai(function(o){return Ro(o)},Tu),this.$n=ie.min(),this._n=t.getMutationQueue(r),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new _m(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.collect(r,n.kn)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(e,t,n,r){return new TI(e,t,n,r)}function Tm(e,t){return C(this,void 0,void 0,function(){var n,r,i,o;return S(this,function(s){switch(s.label){case 0:return n=U(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(u){var a;return n._n.getAllMutationBatches(u).next(function(c){return a=c,r=n.persistence.getMutationQueue(t),i=new _m(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(u)}).next(function(c){for(var l=[],f=[],h=Se(),d=0,g=a;d<g.length;d++){var m=g[d];l.push(m.batchId);for(var w=0,v=m.mutations;w<v.length;w++){var T=v[w];h=h.add(T.key)}}for(var E=0,M=c;E<M.length;E++){var $=M[E];f.push($.batchId);for(var X=0,le=$.mutations;X<le.length;X++){var te=le[X];h=h.add(te.key)}}return i.pn(u,h).next(function(_e){return{Ln:_e,removedBatchIds:l,addedBatchIds:f}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function SI(e,t){var n=U(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),o=n.On.newChangeBuffer({trackRemovals:!0});return function(s,u,a,c){var l=a.batch,f=l.keys(),h=R.resolve();return f.forEach(function(d){h=h.next(function(){return c.getEntry(u,d)}).next(function(g){var m=a.docVersions.get(d);Y(m!==null),g.version.compareTo(m)<0&&(l.applyToRemoteDocument(g,a),g.isValidDocument()&&c.addEntry(g,a.commitVersion))})}),h.next(function(){return s._n.removeMutationBatch(u,l)})}(n,r,t,o).next(function(){return o.apply(r)}).next(function(){return n._n.performConsistencyCheck(r)}).next(function(){return n.Mn.pn(r,i)})})}function Sm(e){var t=U(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t.qe.getLastRemoteSnapshotVersion(n)})}function AI(e,t){var n=U(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var s=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var u=[];t.targetChanges.forEach(function(l,f){var h=i.get(f);if(h){u.push(n.qe.removeMatchingKeys(o,l.removedDocuments,f).next(function(){return n.qe.addMatchingKeys(o,l.addedDocuments,f)}));var d=l.resumeToken;if(d.approximateByteSize()>0){var g=h.withResumeToken(d,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(f,g),function(m,w,v){return Y(w.resumeToken.approximateByteSize()>0),m.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8||v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,g,l)&&u.push(n.qe.updateTargetData(o,g))}}});var a=Xt();if(t.documentUpdates.forEach(function(l,f){t.resolvedLimboDocuments.has(l)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),u.push(CI(o,s,t.documentUpdates,r,void 0).next(function(l){a=l})),!r.isEqual(ie.min())){var c=n.qe.getLastRemoteSnapshotVersion(o).next(function(l){return n.qe.setTargetsMetadata(o,o.currentSequenceNumber,r)});u.push(c)}return R.waitFor(u).next(function(){return s.apply(o)}).next(function(){return n.Mn.En(o,a)}).next(function(){return a})}).then(function(o){return n.kn=i,o})}function CI(e,t,n,r,i){var o=Se();return n.forEach(function(s){return o=o.add(s)}),t.getEntries(e,o).next(function(s){var u=Xt();return n.forEach(function(a,c){var l=s.get(a),f=(i==null?void 0:i.get(a))||r;c.isNoDocument()&&c.version.isEqual(ie.min())?(t.removeEntry(a,f),u=u.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c,f),u=u.insert(a,c)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),u})}function NI(e,t){var n=U(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n._n.getNextMutationBatchAfterBatchId(r,t)})}function Bs(e,t){var n=U(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n.qe.getTargetData(r,t).next(function(o){return o?(i=o,R.resolve(i)):n.qe.allocateTargetId(r).next(function(s){return i=new Nu(t,s,0,r.currentSequenceNumber),n.qe.addTargetData(r,i).next(function(){return i})})})}).then(function(r){var i=n.kn.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.kn=n.kn.insert(r.targetId,r),n.Fn.set(t,r.targetId)),r})}function yi(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:r=U(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(a){return r.persistence.referenceDelegate.removeTarget(a,i)})];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!Dr(s=u.sent()))throw s;return O("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}})})}function qs(e,t,n){var r=U(e),i=ie.min(),o=Se();return r.persistence.runTransaction("Execute query","readonly",function(s){return function(u,a,c){var l=U(u),f=l.Fn.get(c);return f!==void 0?R.resolve(l.kn.get(f)):l.qe.getTargetData(a,c)}(r,s,dn(t)).next(function(u){if(u)return i=u.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(s,u.targetId).next(function(a){o=a})}).next(function(){return r.xn.getDocumentsMatchingQuery(s,t,n?i:ie.min(),n?o:Se())}).next(function(u){return{documents:u,Bn:o}})})}function Am(e,t){var n=U(e),r=U(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(o){return r.lt(o,t).next(function(s){return s?s.target:null})})}function Cm(e){var t=U(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,o){var s=U(r),u=Xt(),a=gl(o),c=kn(i),l=IDBKeyRange.lowerBound(a,!0);return c.$t({index:Oe.readTimeIndex,range:l},function(f,h){var d=Za(s.R,h);u=u.insert(d.key,d),a=h.readTime}).next(function(){return{wn:u,readTime:pm(a)}})}(t.On,n,t.$n)}).then(function(n){var r=n.wn,i=n.readTime;return t.$n=i,r})}function xI(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,(t=U(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var o=kn(i),s=ie.min();return o.$t({index:Oe.readTimeIndex,reverse:!0},function(u,a,c){a.readTime&&(s=pm(a.readTime)),c.done()}).next(function(){return s})}(r)}).then(function(r){t.$n=r})]})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DI=function(){function e(t){this.R=t,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(t,n){return R.resolve(this.Qn.get(n))},e.prototype.saveBundleMetadata=function(t,n){var r;return this.Qn.set(n.id,{id:(r=n).id,version:r.version,createTime:yt(r.createTime)}),R.resolve()},e.prototype.getNamedQuery=function(t,n){return R.resolve(this.jn.get(n))},e.prototype.saveNamedQuery=function(t,n){return this.jn.set(n.name,function(r){return{name:r.name,query:mm(r.bundledQuery),readTime:yt(r.readTime)}}(n)),R.resolve()},e}(),vl=function(){function e(){this.Wn=new He(Ge.Gn),this.zn=new He(Ge.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(t,n){var r=new Ge(t,n);this.Wn=this.Wn.add(r),this.zn=this.zn.add(r)},e.prototype.Jn=function(t,n){var r=this;t.forEach(function(i){return r.addReference(i,n)})},e.prototype.removeReference=function(t,n){this.Yn(new Ge(t,n))},e.prototype.Xn=function(t,n){var r=this;t.forEach(function(i){return r.removeReference(i,n)})},e.prototype.Zn=function(t){var n=this,r=new H(new de([])),i=new Ge(r,t),o=new Ge(r,t+1),s=[];return this.zn.forEachInRange([i,o],function(u){n.Yn(u),s.push(u.key)}),s},e.prototype.ts=function(){var t=this;this.Wn.forEach(function(n){return t.Yn(n)})},e.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},e.prototype.es=function(t){var n=new H(new de([])),r=new Ge(n,t),i=new Ge(n,t+1),o=Se();return this.zn.forEachInRange([r,i],function(s){o=o.add(s.key)}),o},e.prototype.containsKey=function(t){var n=new Ge(t,0),r=this.Wn.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)},e}(),Ge=function(){function e(t,n){this.key=t,this.ns=n}return e.Gn=function(t,n){return H.comparator(t.key,n.key)||se(t.ns,n.ns)},e.Hn=function(t,n){return se(t.ns,n.ns)||H.comparator(t.key,n.key)},e}(),RI=function(){function e(t,n){this.Ut=t,this.referenceDelegate=n,this._n=[],this.ss=1,this.rs=new He(Ge.Gn)}return e.prototype.checkEmpty=function(t){return R.resolve(this._n.length===0)},e.prototype.addMutationBatch=function(t,n,r,i){var o=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var s=new pl(o,n,r,i);this._n.push(s);for(var u=0,a=i;u<a.length;u++){var c=a[u];this.rs=this.rs.add(new Ge(c.key,o)),this.Ut.addToCollectionParentIndex(t,c.key.path.popLast())}return R.resolve(s)},e.prototype.lookupMutationBatch=function(t,n){return R.resolve(this.os(n))},e.prototype.getNextMutationBatchAfterBatchId=function(t,n){var r=n+1,i=this.cs(r),o=i<0?0:i;return R.resolve(this._n.length>o?this._n[o]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return R.resolve(this._n.length===0?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(t){return R.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,n){var r=this,i=new Ge(n,0),o=new Ge(n,Number.POSITIVE_INFINITY),s=[];return this.rs.forEachInRange([i,o],function(u){var a=r.os(u.ns);s.push(a)}),R.resolve(s)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,n){var r=this,i=new He(se);return n.forEach(function(o){var s=new Ge(o,0),u=new Ge(o,Number.POSITIVE_INFINITY);r.rs.forEachInRange([s,u],function(a){i=i.add(a.ns)})}),R.resolve(this.us(i))},e.prototype.getAllMutationBatchesAffectingQuery=function(t,n){var r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));var s=new Ge(new H(o),0),u=new He(se);return this.rs.forEachWhile(function(a){var c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(u=u.add(a.ns)),!0)},s),R.resolve(this.us(u))},e.prototype.us=function(t){var n=this,r=[];return t.forEach(function(i){var o=n.os(i);o!==null&&r.push(o)}),r},e.prototype.removeMutationBatch=function(t,n){var r=this;Y(this.hs(n.batchId,"removed")===0),this._n.shift();var i=this.rs;return R.forEach(n.mutations,function(o){var s=new Ge(o.key,n.batchId);return i=i.delete(s),r.referenceDelegate.markPotentiallyOrphaned(t,o.key)}).next(function(){r.rs=i})},e.prototype.Gt=function(t){},e.prototype.containsKey=function(t,n){var r=new Ge(n,0),i=this.rs.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))},e.prototype.performConsistencyCheck=function(t){return this._n.length,R.resolve()},e.prototype.hs=function(t,n){return this.cs(t)},e.prototype.cs=function(t){return this._n.length===0?0:t-this._n[0].batchId},e.prototype.os=function(t){var n=this.cs(t);return n<0||n>=this._n.length?null:this._n[n]},e}(),OI=function(){function e(t,n){this.Ut=t,this.ls=n,this.docs=new ft(H.comparator),this.size=0}return e.prototype.addEntry=function(t,n,r){var i=n.key,o=this.docs.get(i),s=o?o.size:0,u=this.ls(n);return this.docs=this.docs.insert(i,{document:n.clone(),size:u,readTime:r}),this.size+=u-s,this.Ut.addToCollectionParentIndex(t,i.path.popLast())},e.prototype.removeEntry=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype.getEntry=function(t,n){var r=this.docs.get(n);return R.resolve(r?r.document.clone():lt.newInvalidDocument(n))},e.prototype.getEntries=function(t,n){var r=this,i=Xt();return n.forEach(function(o){var s=r.docs.get(o);i=i.insert(o,s?s.document.clone():lt.newInvalidDocument(o))}),R.resolve(i)},e.prototype.getDocumentsMatchingQuery=function(t,n,r){for(var i=Xt(),o=new H(n.path.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),a=u.key,c=u.value,l=c.document,f=c.readTime;if(!n.path.isPrefixOf(a.path))break;f.compareTo(r)<=0||ko(n,l)&&(i=i.insert(l.key,l.clone()))}return R.resolve(i)},e.prototype.fs=function(t,n){return R.forEach(this.docs,function(r){return n(r)})},e.prototype.newChangeBuffer=function(t){return new PI(this)},e.prototype.getSize=function(t){return R.resolve(this.size)},e}(),PI=function(e){function t(n){var r=this;return(r=e.call(this)||this).Ie=n,r}return Q(t,e),t.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(o,s){s.document.isValidDocument()?i.push(r.Ie.addEntry(n,s.document,r.getReadTime(o))):r.Ie.removeEntry(o)}),R.waitFor(i)},t.prototype.getFromCache=function(n,r){return this.Ie.getEntry(n,r)},t.prototype.getAllFromCache=function(n,r){return this.Ie.getEntries(n,r)},t}(bm),kI=function(){function e(t){this.persistence=t,this.ds=new Ai(function(n){return Ro(n)},Tu),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.ws=0,this._s=new vl,this.targetCount=0,this.ys=js.Jt()}return e.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(r,i){return n(i)}),R.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(t){return R.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(t){return R.resolve(this.ws)},e.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),R.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ws&&(this.ws=n),R.resolve()},e.prototype.te=function(t){this.ds.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.ys=new js(n),this.highestTargetId=n),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},e.prototype.addTargetData=function(t,n){return this.te(n),this.targetCount+=1,R.resolve()},e.prototype.updateTargetData=function(t,n){return this.te(n),R.resolve()},e.prototype.removeTargetData=function(t,n){return this.ds.delete(n.target),this._s.Zn(n.targetId),this.targetCount-=1,R.resolve()},e.prototype.removeTargets=function(t,n,r){var i=this,o=0,s=[];return this.ds.forEach(function(u,a){a.sequenceNumber<=n&&r.get(a.targetId)===null&&(i.ds.delete(u),s.push(i.removeMatchingKeysForTargetId(t,a.targetId)),o++)}),R.waitFor(s).next(function(){return o})},e.prototype.getTargetCount=function(t){return R.resolve(this.targetCount)},e.prototype.getTargetData=function(t,n){var r=this.ds.get(n)||null;return R.resolve(r)},e.prototype.addMatchingKeys=function(t,n,r){return this._s.Jn(n,r),R.resolve()},e.prototype.removeMatchingKeys=function(t,n,r){this._s.Xn(n,r);var i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(function(s){o.push(i.markPotentiallyOrphaned(t,s))}),R.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(t,n){return this._s.Zn(n),R.resolve()},e.prototype.getMatchingKeysForTargetId=function(t,n){var r=this._s.es(n);return R.resolve(r)},e.prototype.containsKey=function(t,n){return R.resolve(this._s.containsKey(n))},e}(),LI=function(){function e(t,n){var r=this;this.gs={},this.Ne=new Ot(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new kI(this),this.Ut=new fI,this.Ue=function(i,o){return new OI(i,function(s){return r.referenceDelegate.ps(s)})}(this.Ut),this.R=new dm(n),this.Ke=new DI(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(t){var n=this.gs[t.toKey()];return n||(n=new RI(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=n),n},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(t,n,r){var i=this;O("MemoryPersistence","Starting transaction:",t);var o=new MI(this.Ne.next());return this.referenceDelegate.Es(),r(o).next(function(s){return i.referenceDelegate.Ts(o).next(function(){return s})}).toPromise().then(function(s){return o.raiseOnCommittedEvent(),s})},e.prototype.Is=function(t,n){return R.or(Object.values(this.gs).map(function(r){return function(){return r.containsKey(t,n)}}))},e}(),MI=function(e){function t(n){var r=this;return(r=e.call(this)||this).currentSequenceNumber=n,r}return Q(t,e),t}(fm),FI=function(){function e(t){this.persistence=t,this.As=new vl,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw K()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(t,n,r){return this.As.addReference(r,n),this.vs.delete(r.toString()),R.resolve()},e.prototype.removeReference=function(t,n,r){return this.As.removeReference(r,n),this.vs.add(r.toString()),R.resolve()},e.prototype.markPotentiallyOrphaned=function(t,n){return this.vs.add(n.toString()),R.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.As.Zn(n.targetId).forEach(function(o){return r.vs.add(o.toString())});var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(function(o){o.forEach(function(s){return r.vs.add(s.toString())})}).next(function(){return i.removeTargetData(t,n)})},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.vs,function(i){var o=H.fromPath(i);return n.Ps(t,o).next(function(s){s||r.removeEntry(o)})}).next(function(){return n.Rs=null,r.apply(t)})},e.prototype.updateLimboDocument=function(t,n){var r=this;return this.Ps(t,n).next(function(i){i?r.vs.delete(n.toString()):r.vs.add(n.toString())})},e.prototype.ps=function(t){return 0},e.prototype.Ps=function(t,n){var r=this;return R.or([function(){return R.resolve(r.As.containsKey(n))},function(){return r.persistence.getTargetCache().containsKey(t,n)},function(){return r.persistence.Is(t,n)}])},e}(),Qe=function(){function e(t){this.uid=t}return e.prototype.isAuthenticated=function(){return this.uid!=null},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(e,t){return"firestore_clients_"+e+"_"+t}function Fh(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function fa(e,t){return"firestore_targets_"+e+"_"+t}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var Uh=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),s=typeof o=="object"&&["pending","acknowledged","rejected"].indexOf(o.state)!==-1&&(o.error===void 0||typeof o.error=="object");return s&&o.error&&(s=typeof o.error.message=="string"&&typeof o.error.code=="string")&&(i=new x(o.error.code,o.error.message)),s?new e(t,n,o.state,i):(Ve("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),ha=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.Vs=function(t,n){var r,i=JSON.parse(n),o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new x(i.error.code,i.error.message)),o?new e(t,i.state,r):(Ve("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Vh=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.Vs=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Cu(),s=0;i&&s<r.activeTargetIds.length;++s)i=Mg(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new e(t,o):(Ve("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),UI=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.Vs=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Ve("SharedClientState","Failed to parse online state: "+t),null)},e}(),ec=function(){function e(){this.activeTargetIds=Cu()}return e.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),da=function(){function e(t,n,r,i,o){this.window=t,this.Se=n,this.persistenceKey=r,this.Ns=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new ft(se),this.started=!1,this.$s=[];var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Os=Mh(this.persistenceKey,this.Ns),this.Ms=function(u){return"firestore_sequence_number_"+u}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new ec),this.Ls=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Us=function(u){return"firestore_online_state_"+u}(this.persistenceKey),this.Ks=function(u){return"firestore_bundle_loaded_"+u}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return C(this,void 0,void 0,function(){var t,n,r,i,o,s,u,a,c,l,f,h=this;return S(this,function(d){switch(d.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=d.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.Ns&&(o=this.getItem(Mh(this.persistenceKey,i)))&&(s=Vh.Vs(i,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(u=this.storage.getItem(this.Us))&&(a=this.js(u))&&this.Ws(a),c=0,l=this.$s;c<l.length;c++)f=l[c],this.ks(f);return this.$s=[],this.window.addEventListener("pagehide",function(){return h.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(t){var n=!1;return this.Fs.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.addPendingMutation=function(t){this.zs(t,"pending")},e.prototype.updateMutationState=function(t,n,r){this.zs(t,n,r),this.Hs(t)},e.prototype.addLocalQueryTarget=function(t){var n="not-current";if(this.isActiveQueryTarget(t)){var r=this.storage.getItem(fa(this.persistenceKey,t));if(r){var i=ha.Vs(t,r);i&&(n=i.state)}}return this.Js.Ds(t),this.Qs(),n},e.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},e.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){this.removeItem(fa(this.persistenceKey,t))},e.prototype.updateQueryState=function(t,n,r){this.Ys(t,n,r)},e.prototype.handleUserChange=function(t,n,r){var i=this;n.forEach(function(o){i.Hs(o)}),this.currentUser=t,r.forEach(function(o){i.addPendingMutation(o)})},e.prototype.setOnlineState=function(t){this.Xs(t)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return O("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){O("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){O("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.ks=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(O("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Os)return void Ve("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return C(n,void 0,void 0,function(){var i,o,s,u,a,c;return S(this,function(l){if(this.started){if(r.key!==null){if(this.Ls.test(r.key)){if(r.newValue==null)return i=this.ti(r.key),[2,this.ei(i,null)];if(o=this.ni(r.key,r.newValue))return[2,this.ei(o.clientId,o)]}else if(this.Bs.test(r.key)){if(r.newValue!==null&&(s=this.si(r.key,r.newValue)))return[2,this.ii(s)]}else if(this.qs.test(r.key)){if(r.newValue!==null&&(u=this.ri(r.key,r.newValue)))return[2,this.oi(u)]}else if(r.key===this.Us){if(r.newValue!==null&&(a=this.js(r.newValue)))return[2,this.Ws(a)]}else if(r.key===this.Ms)(c=function(f){var h=Ot.o;if(f!=null)try{var d=JSON.parse(f);Y(typeof d=="number"),h=d}catch(g){Ve("SharedClientState","Failed to read sequence number from WebStorage",g)}return h}(r.newValue))!==Ot.o&&this.sequenceNumberHandler(c);else if(r.key===this.Ks)return[2,this.syncEngine.ci()]}}else this.$s.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(t,n,r){var i=new Uh(this.currentUser,t,n,r),o=Fh(this.persistenceKey,this.currentUser,t);this.setItem(o,i.Ss())},e.prototype.Hs=function(t){var n=Fh(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Xs=function(t){var n={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(n))},e.prototype.Ys=function(t,n,r){var i=fa(this.persistenceKey,t),o=new ha(t,n,r);this.setItem(i,o.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(t){var n=this.Ls.exec(t);return n?n[1]:null},e.prototype.ni=function(t,n){var r=this.ti(t);return Vh.Vs(r,n)},e.prototype.si=function(t,n){var r=this.Bs.exec(t),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Uh.Vs(new Qe(o),i,n)},e.prototype.ri=function(t,n){var r=this.qs.exec(t),i=Number(r[1]);return ha.Vs(i,n)},e.prototype.js=function(t){return UI.Vs(t)},e.prototype.ii=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(O("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},e.prototype.ei=function(t,n){var r=this,i=n?this.Fs.insert(t,n):this.Fs.remove(t),o=this.Gs(this.Fs),s=this.Gs(i),u=[],a=[];return s.forEach(function(c){o.has(c)||u.push(c)}),o.forEach(function(c){s.has(c)||a.push(c)}),this.syncEngine.hi(u,a).then(function(){r.Fs=i})},e.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},e.prototype.Gs=function(t){var n=Cu();return t.forEach(function(r,i){n=n.unionWith(i.activeTargetIds)}),n},e}(),Nm=function(){function e(){this.li=new ec,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(t){},e.prototype.updateMutationState=function(t,n,r){},e.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},e.prototype.updateQueryState=function(t,n,r){this.fi[t]=n},e.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},e.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.clearQueryState=function(t){delete this.fi[t]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},e.prototype.start=function(){return this.li=new ec,Promise.resolve()},e.prototype.handleUserChange=function(t,n,r){},e.prototype.setOnlineState=function(t){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(t){},e.prototype.notifyBundleLoaded=function(){},e}(),VI=function(){function e(){}return e.prototype.di=function(t){},e.prototype.shutdown=function(){},e}(),jh=function(){function e(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return e.prototype.di=function(t){this.gi.push(t)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(0)},e.prototype.yi=function(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.gi;t<n.length;t++)(0,n[t])(1)},e.yt=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),jI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},BI=function(){function e(t){this.Ei=t.Ei,this.Ti=t.Ti}return e.prototype.Ii=function(t){this.Ai=t},e.prototype.Ri=function(t){this.bi=t},e.prototype.onMessage=function(t){this.vi=t},e.prototype.close=function(){this.Ti()},e.prototype.send=function(t){this.Ei(t)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(t){this.bi(t)},e.prototype.Si=function(t){this.vi(t)},e}(),qI=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.autoDetectLongPolling=n.autoDetectLongPolling,r.useFetchStreams=n.useFetchStreams,r}return Q(t,e),t.prototype.Fi=function(n,r,i,o){return new Promise(function(s,u){var a=new wE;a.listenOnce(mE.COMPLETE,function(){try{switch(a.getLastErrorCode()){case ca.NO_ERROR:var l=a.getResponseJson();O("Connection","XHR received:",JSON.stringify(l)),s(l);break;case ca.TIMEOUT:O("Connection",'RPC "'+n+'" timed out'),u(new x(b.DEADLINE_EXCEEDED,"Request time out"));break;case ca.HTTP_ERROR:var f=a.getStatus();if(O("Connection",'RPC "'+n+'" failed with status:',f,"response text:",a.getResponseText()),f>0){var h=a.getResponseJson().error;if(h&&h.status&&h.message){var d=function(g){var m=g.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(m)>=0?m:b.UNKNOWN}(h.status);u(new x(d,h.message))}else u(new x(b.UNKNOWN,"Server responded with status "+a.getStatus()))}else u(new x(b.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O("Connection",'RPC "'+n+'" completed.')}});var c=JSON.stringify(o);a.send(r,"POST",c,i,15)})},t.prototype.Oi=function(n,r){var i=[this.Di,"/","google.firestore.v1.Firestore","/",n,"/channel"],o=pE(),s=gE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new vE({})),this.ki(u.initMessageHeaders,r),_b()||Tb()||Sb()||Ab()||Cb()||Ib()||(u.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");O("Connection","Creating WebChannel: "+a,u);var c=o.createWebChannel(a,u),l=!1,f=!1,h=new BI({Ei:function(g){f?O("Connection","Not sending because WebChannel is closed:",g):(l||(O("Connection","Opening WebChannel transport."),c.open(),l=!0),O("Connection","WebChannel sending:",g),c.send(g))},Ti:function(){return c.close()}}),d=function(g,m,w){g.listen(m,function(v){try{w(v)}catch(T){setTimeout(function(){throw T},0)}})};return d(c,Jo.EventType.OPEN,function(){f||O("Connection","WebChannel transport opened.")}),d(c,Jo.EventType.CLOSE,function(){f||(f=!0,O("Connection","WebChannel transport closed"),h.Vi())}),d(c,Jo.EventType.ERROR,function(g){f||(f=!0,Os("Connection","WebChannel transport errored:",g),h.Vi(new x(b.UNAVAILABLE,"The operation could not be completed")))}),d(c,Jo.EventType.MESSAGE,function(g){var m;if(!f){var w=g.data[0];Y(!!w);var v=w,T=v.error||((m=v[0])===null||m===void 0?void 0:m.error);if(T){O("Connection","WebChannel received error:",T);var E=T.status,M=function(X){var le=Fe[X];if(le!==void 0)return Jg(le)}(E),$=T.message;M===void 0&&(M=b.INTERNAL,$="Unknown error status: "+E+" with message "+T.message),f=!0,h.Vi(new x(M,$)),c.close()}else O("Connection","WebChannel received:",w),h.Si(w)}}),d(s,yE.STAT_EVENT,function(g){g.stat===rh.PROXY?O("Connection","Detected buffering proxy"):g.stat===rh.NOPROXY&&O("Connection","Detected no buffering proxy")}),setTimeout(function(){h.Pi()},0),h},t}(function(){function e(t){this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Di=n+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(t,n,r,i){var o=this.xi(t,n);O("RestConnection","Sending: ",o,r);var s={};return this.ki(s,i),this.Fi(t,o,s,r).then(function(u){return O("RestConnection","Received: ",u),u},function(u){throw Os("RestConnection",t+" failed with error: ",u,"url: ",o,"request:",r),u})},e.prototype.$i=function(t,n,r,i){return this.Ni(t,n,r,i)},e.prototype.ki=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n)for(var r in n.authHeaders)n.authHeaders.hasOwnProperty(r)&&(t[r]=n.authHeaders[r])},e.prototype.xi=function(t,n){var r=jI[t];return this.Di+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(){return typeof window<"u"?window:null}function ps(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e){return new WE(e,!0)}var wl=function(){function e(t,n,r,i,o){r===void 0&&(r=1e3),i===void 0&&(i=1.5),o===void 0&&(o=6e4),this.Se=t,this.timerId=n,this.Mi=r,this.Li=i,this.Bi=o,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(t){var n=this;this.cancel();var r=Math.floor(this.qi+this.Wi()),i=Math.max(0,Date.now()-this.Ki),o=Math.max(0,r-i);o>0&&O("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.qi+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,o,function(){return n.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){this.Ui!==null&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){this.Ui!==null&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Dm=function(){function e(t,n,r,i,o,s){this.Se=t,this.zi=r,this.Hi=i,this.Ji=o,this.listener=s,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new wl(t,n)}return e.prototype.tr=function(){return this.state===1||this.state===2||this.state===4},e.prototype.er=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.nr()},e.prototype.stop=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var t=this;this.er()&&this.Xi===null&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},e.prototype.cr=function(t){this.ur(),this.stream.send(t)},e.prototype.rr=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(t,n){return C(this,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,t!==3?this.Zi.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(Ve(n.toString()),Ve("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===b.UNAUTHENTICATED&&this.Ji.invalidateToken(),this.stream!==null&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(n)];case 1:return r.sent(),[2]}})})},e.prototype.ar=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.hr(this.Yi),r=this.Yi;this.Ji.getToken().then(function(i){t.Yi===r&&t.lr(i)},function(i){n(function(){var o=new x(b.UNKNOWN,"Fetching auth token failed: "+i.message);return t.dr(o)})})},e.prototype.lr=function(t){var n=this,r=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){r(function(){return n.state=2,n.listener.Ii()})}),this.stream.Ri(function(i){r(function(){return n.dr(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return C(t,void 0,void 0,function(){return S(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.dr=function(t){return O("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.hr=function(t){var n=this;return function(r){n.Se.enqueueAndForget(function(){return n.Yi===t?r():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),$I=function(e){function t(n,r,i,o,s){var u=this;return(u=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,s)||this).R=o,u}return Q(t,e),t.prototype.wr=function(n){return this.Hi.Oi("Listen",n)},t.prototype.onMessage=function(n){this.Zi.reset();var r=function(o,s){var u;if("targetChange"in s){s.targetChange;var a=function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:K()}(s.targetChange.targetChangeType||"NO_CHANGE"),c=s.targetChange.targetIds||[],l=function(w,v){return w.I?(Y(v===void 0||typeof v=="string"),Tt.fromBase64String(v||"")):(Y(v===void 0||v instanceof Uint8Array),Tt.fromUint8Array(v||new Uint8Array))}(o,s.targetChange.resumeToken),f=(h=s.targetChange.cause)&&function(w){var v=w.code===void 0?b.UNKNOWN:Jg(w.code);return new x(v,w.message||"")}(h);u=new em(a,c,l,f||null)}else if("documentChange"in s){s.documentChange,(a=s.documentChange).document,a.document.name,a.document.updateTime,c=bn(o,a.document.name),l=yt(a.document.updateTime);var h=new Dt({mapValue:{fields:a.document.fields}}),d=(f=lt.newFoundDocument(c,l,h),a.targetIds||[]),g=a.removedTargetIds||[];u=new ds(d,g,f.key,f)}else if("documentDelete"in s)s.documentDelete,(a=s.documentDelete).document,c=bn(o,a.document),l=a.readTime?yt(a.readTime):ie.min(),h=lt.newNoDocument(c,l),f=a.removedTargetIds||[],u=new ds([],f,h.key,h);else if("documentRemove"in s)s.documentRemove,(a=s.documentRemove).document,c=bn(o,a.document),l=a.removedTargetIds||[],u=new ds([],l,c,null);else{if(!("filter"in s))return K();s.filter;var m=s.filter;m.targetId,a=m.count||0,c=new UE(a),l=m.targetId,u=new Zg(l,c)}return u}(this.R,n),i=function(o){if(!("targetChange"in o))return ie.min();var s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?yt(s.readTime):ie.min()}(n);return this.listener._r(r,i)},t.prototype.mr=function(n){var r={};r.database=go(this.R),r.addTarget=function(o,s){var u,a=s.target;return(u=Ls(a)?{documents:om(o,a)}:{query:sm(o,a)}).targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=tm(o,s.resumeToken):s.snapshotVersion.compareTo(ie.min())>0&&(u.readTime=ho(o,s.snapshotVersion.toTimestamp())),u}(this.R,n);var i=function(o,s){var u=function(a,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return K()}}(0,s.purpose);return u==null?null:{"goog-listen-tags":u}}(this.R,n);i&&(r.labels=i),this.cr(r)},t.prototype.yr=function(n){var r={};r.database=go(this.R),r.removeTarget=n,this.cr(r)},t}(Dm),KI=function(e){function t(n,r,i,o,s){var u=this;return(u=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,s)||this).R=o,u.gr=!1,u}return Q(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(n){return this.Hi.Oi("Write",n)},t.prototype.onMessage=function(n){if(Y(!!n.streamToken),this.lastStreamToken=n.streamToken,this.gr){this.Zi.reset();var r=function(o,s){return o&&o.length>0?(Y(s!==void 0),o.map(function(u){return function(a,c){var l=a.updateTime?yt(a.updateTime):yt(c);return l.isEqual(ie.min())&&(l=yt(c)),new LE(l,a.transformResults||[])}(u,s)})):[]}(n.writeResults,n.commitTime),i=yt(n.commitTime);return this.listener.Tr(i,r)}return Y(!n.writeResults||n.writeResults.length===0),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var n={};n.database=go(this.R),this.cr(n)},t.prototype.Er=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(o){return Us(r.R,o)})};this.cr(i)},t}(Dm),HI=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).credentials=n,o.Hi=r,o.R=i,o.Rr=!1,o}return Q(t,e),t.prototype.br=function(){if(this.Rr)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.Ni(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new x(b.UNKNOWN,s.toString())})},t.prototype.$i=function(n,r,i){var o=this;return this.br(),this.credentials.getToken().then(function(s){return o.Hi.$i(n,r,i,s)}).catch(function(s){throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&o.credentials.invalidateToken(),s):new x(b.UNKNOWN,s.toString())})},t.prototype.terminate=function(){this.Rr=!0},t}(function(){}),zI=function(){function e(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var t=this;this.vr===0&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},e.prototype.Nr=function(t){this.state==="Online"?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},e.prototype.set=function(t){this.kr(),this.vr=0,t==="Online"&&(this.Vr=!1),this.Dr(t)},e.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},e.prototype.Cr=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Vr?(Ve(n),this.Vr=!1):O("OnlineStateTracker",n)},e.prototype.kr=function(){this.Pr!==null&&(this.Pr.cancel(),this.Pr=null)},e}(),GI=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(s){n.enqueueAndForget(function(){return C(o,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return Yn(this)?(O("RemoteStore","Restarting streams for network reachability change."),[4,function(a){return C(this,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return(c=U(a)).Or.add(4),[4,Ci(c)];case 1:return l.sent(),c.Br.set("Unknown"),c.Or.delete(4),[4,Uo(c)];case 2:return l.sent(),[2]}})})}(this)]):[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})})}),this.Br=new zI(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:if(!Yn(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Ci(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Du(e,t){var n=U(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),El(n)?_l(n):xi(n).er()&&bl(n,t))}function mo(e,t){var n=U(e),r=xi(n);n.$r.delete(t),r.er()&&Rm(n,t),n.$r.size===0&&(r.er()?r.ir():Yn(n)&&n.Br.set("Unknown"))}function bl(e,t){e.qr.U(t.targetId),xi(e).mr(t)}function Rm(e,t){e.qr.U(t),xi(e).yr(t)}function _l(e){e.qr=new HE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),xi(e).start(),e.Br.Sr()}function El(e){return Yn(e)&&!xi(e).tr()&&e.$r.size>0}function Yn(e){return U(e).Or.size===0}function Om(e){e.qr=void 0}function WI(e){return C(this,void 0,void 0,function(){return S(this,function(t){return e.$r.forEach(function(n,r){bl(e,n)}),[2]})})}function QI(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){return Om(e),El(e)?(e.Br.Nr(t),_l(e)):e.Br.set("Unknown"),[2]})})}function YI(e,t,n){return C(this,void 0,void 0,function(){var r,i,o;return S(this,function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof em&&t.state===2&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(u,a){return C(this,void 0,void 0,function(){var c,l,f,h;return S(this,function(d){switch(d.label){case 0:c=a.cause,l=0,f=a.targetIds,d.label=1;case 1:return l<f.length?(h=f[l],u.$r.has(h)?[4,u.remoteSyncer.rejectListen(h,c)]:[3,3]):[3,5];case 2:d.sent(),u.$r.delete(h),u.qr.removeTarget(h),d.label=3;case 3:d.label=4;case 4:return l++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),O("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,$s(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ds?e.qr.X(t):t instanceof Zg?e.qr.rt(t):e.qr.et(t),n.isEqual(ie.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Sm(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(u,a){var c=u.qr.ut(a);return c.targetChanges.forEach(function(l,f){if(l.resumeToken.approximateByteSize()>0){var h=u.$r.get(f);h&&u.$r.set(f,h.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach(function(l){var f=u.$r.get(l);if(f){u.$r.set(l,f.withResumeToken(Tt.EMPTY_BYTE_STRING,f.snapshotVersion)),Rm(u,l);var h=new Nu(f.target,l,1,f.sequenceNumber);bl(u,h)}}),u.remoteSyncer.applyRemoteEvent(c)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return O("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,$s(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function $s(e,t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:if(!Dr(t))throw t;return e.Or.add(1),[4,Ci(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Sm(e.localStore)}),e.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(o){switch(o.label){case 0:return O("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return o.sent(),e.Or.delete(1),[4,Uo(e)];case 2:return o.sent(),[2]}})})}),[2]}})})}function Pm(e,t){return t().catch(function(n){return $s(e,n,t)})}function Ni(e){return C(this,void 0,void 0,function(){var t,n,r,i,o;return S(this,function(s){switch(s.label){case 0:t=U(e),n=zn(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,s.label=1;case 1:if(!function(u){return Yn(u)&&u.Fr.length<10}(t))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,NI(t.localStore,r)];case 3:return(i=s.sent())===null?(t.Fr.length===0&&n.ir(),[3,7]):(r=i.batchId,function(u,a){u.Fr.push(a);var c=zn(u);c.er()&&c.pr&&c.Er(a.mutations)}(t,i),[3,6]);case 4:return o=s.sent(),[4,$s(t,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return km(t)&&Lm(t),[2]}})})}function km(e){return Yn(e)&&!zn(e).tr()&&e.Fr.length>0}function Lm(e){zn(e).start()}function XI(e){return C(this,void 0,void 0,function(){return S(this,function(t){return zn(e).Ar(),[2]})})}function JI(e){return C(this,void 0,void 0,function(){var t,n,r,i;return S(this,function(o){for(t=zn(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]})})}function ZI(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=cI.from(r,t,n),[4,Pm(e,function(){return e.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Ni(e)];case 2:return o.sent(),[2]}})})}function eT(e,t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return t&&zn(e).pr?[4,function(r,i){return C(this,void 0,void 0,function(){var o,s;return S(this,function(u){switch(u.label){case 0:return Xg(s=i.code)&&s!==b.ABORTED?(o=r.Fr.shift(),zn(r).sr(),[4,Pm(r,function(){return r.remoteSyncer.rejectFailedWrite(o.batchId,i)})]):[3,3];case 1:return u.sent(),[4,Ni(r)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return km(e)&&Lm(e),[2]}})})}function tc(e,t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=U(e),t?(n.Or.delete(2),[4,Uo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Ci(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function xi(e){var t=this;return e.Ur||(e.Ur=function(n,r,i){var o=U(n);return o.br(),new $I(r,o.Hi,o.credentials,o.R,i)}(e.datastore,e.asyncQueue,{Ii:WI.bind(null,e),Ri:QI.bind(null,e),_r:YI.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Ur.sr(),El(e)?_l(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:r.sent(),Om(e),r.label=3;case 3:return[2]}})})})),e.Ur}function zn(e){var t=this;return e.Kr||(e.Kr=function(n,r,i){var o=U(n);return o.br(),new KI(r,o.Hi,o.credentials,o.R,i)}(e.datastore,e.asyncQueue,{Ii:XI.bind(null,e),Ri:eT.bind(null,e),Ir:JI.bind(null,e),Tr:ZI.bind(null,e)}),e.Mr.push(function(n){return C(t,void 0,void 0,function(){return S(this,function(r){switch(r.label){case 0:return n?(e.Kr.sr(),[4,Ni(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:r.sent(),e.Fr.length>0&&(O("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),r.label=4;case 4:return[2]}})})})),e.Kr}var tT=function(){function e(t,n,r,i,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(s){})}return e.createAndSchedule=function(t,n,r,i,o){var s=new e(t,n,Date.now()+r,i,o);return s.start(r),s},e.prototype.start=function(t){var n=this;this.timerHandle=setTimeout(function(){return n.handleDelayElapsed()},t)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(b.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.timerHandle!==null?(t.clearTimeout(),t.op().then(function(n){return t.deferred.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Di(e,t){if(Ve("AsyncQueue",t+": "+e),Dr(e))return new x(b.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mm=function(){function e(t){this.comparator=t?function(n,r){return t(n,r)||H.comparator(n.key,r.key)}:function(n,r){return H.comparator(n.key,r.key)},this.keyedMap=Xa(),this.sortedSet=new ft(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(t){return this.keyedMap.get(t)!=null},e.prototype.get=function(t){return this.keyedMap.get(t)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(t){var n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Bh=function(){function e(){this.Qr=new ft(H.comparator)}return e.prototype.track=function(t){var n=t.doc.key,r=this.Qr.get(n);r?t.type!==0&&r.type===3?this.Qr=this.Qr.insert(n,t):t.type===3&&r.type!==1?this.Qr=this.Qr.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Qr=this.Qr.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Qr=this.Qr.remove(n):t.type===1&&r.type===2?this.Qr=this.Qr.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Qr=this.Qr.insert(n,{type:2,doc:t.doc}):K():this.Qr=this.Qr.insert(n,t)},e.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(n,r){t.push(r)}),t},e}(),Ks=function(){function e(t,n,r,i,o,s,u,a){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=a}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(s){o.push({type:0,doc:s})}),new e(t,n,Mm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Po(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),nT=function(){this.Wr=void 0,this.listeners=[]},rT=function(){this.queries=new Ai(function(e){return Bg(e)},Po),this.onlineState="Unknown",this.Gr=new Set};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u,a;return S(this,function(c){switch(c.label){case 0:if(n=U(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new nT),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return u=c.sent(),a=Di(u,"Initialization of query '"+Qa(t.query)+"' failed"),[2,void t.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&Sl(n),[2]}})})}function Tl(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s;return S(this,function(u){return n=U(e),r=t.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function iT(e,t){for(var n=U(e),r=!1,i=0,o=t;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);a.Wr=s}}r&&Sl(n)}function oT(e,t,n){var r=U(e),i=r.queries.get(t);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(t)}function Sl(e){e.Gr.forEach(function(t){t.next()})}var Al=function(){function e(t,n,r){this.query=t,this.Jr=n,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var o=i[r];o.type!==3&&n.push(o)}t=new Ks(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var s=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),s=!0):this.eo(t,this.onlineState)&&(this.no(t),s=!0),this.Xr=t,s},e.prototype.onError=function(t){this.Jr.error(t)},e.prototype.zr=function(t){this.onlineState=t;var n=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),n=!0),n},e.prototype.eo=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.so&&r||t.docs.isEmpty()&&n!=="Offline")},e.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var n=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.no=function(t){t=Ks.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fm=function(e){this.key=e},Um=function(e){this.key=e},Vm=function(){function e(t,n){this.query=t,this.uo=n,this.ao=null,this.current=!1,this.ho=Se(),this.mutatedKeys=Se(),this.lo=qg(t),this.fo=new Mm(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(t,n){var r=this,i=n?n.mo:new Bh,o=n?n.fo:this.fo,s=n?n.mutatedKeys:this.mutatedKeys,u=o,a=!1,c=fs(this.query)&&o.size===this.query.limit?o.last():null,l=Fs(this.query)&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(function(h,d){var g=o.get(h),m=ko(r.query,d)?d:null,w=!!g&&r.mutatedKeys.has(g.key),v=!!m&&(m.hasLocalMutations||r.mutatedKeys.has(m.key)&&m.hasCommittedMutations),T=!1;g&&m?g.data.isEqual(m.data)?w!==v&&(i.track({type:3,doc:m}),T=!0):r.yo(g,m)||(i.track({type:2,doc:m}),T=!0,(c&&r.lo(m,c)>0||l&&r.lo(m,l)<0)&&(a=!0)):!g&&m?(i.track({type:0,doc:m}),T=!0):g&&!m&&(i.track({type:1,doc:g}),T=!0,(c||l)&&(a=!0)),T&&(m?(u=u.add(m),s=v?s.add(h):s.delete(h)):(u=u.delete(h),s=s.delete(h)))}),fs(this.query)||Fs(this.query))for(;u.size>this.query.limit;){var f=fs(this.query)?u.last():u.first();u=u.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{fo:u,mo:i,Nn:a,mutatedKeys:s}},e.prototype.yo=function(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations},e.prototype.applyChanges=function(t,n,r){var i=this,o=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var s=t.mo.jr();s.sort(function(l,f){return function(h,d){var g=function(m){switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return g(h)-g(d)}(l.type,f.type)||i.lo(l.doc,f.doc)}),this.po(r);var u=n?this.Eo():[],a=this.ho.size===0&&this.current?1:0,c=a!==this.ao;return this.ao=a,s.length!==0||c?{snapshot:new Ks(this.query,t.fo,o,s,t.mutatedKeys,a===0,c,!1),To:u}:{To:u}},e.prototype.zr=function(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Bh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},e.prototype.po=function(t){var n=this;t&&(t.addedDocuments.forEach(function(r){return n.uo=n.uo.add(r)}),t.modifiedDocuments.forEach(function(r){}),t.removedDocuments.forEach(function(r){return n.uo=n.uo.delete(r)}),this.current=t.current)},e.prototype.Eo=function(){var t=this;if(!this.current)return[];var n=this.ho;this.ho=Se(),this.fo.forEach(function(i){t.Io(i.key)&&(t.ho=t.ho.add(i.key))});var r=[];return n.forEach(function(i){t.ho.has(i)||r.push(new Um(i))}),this.ho.forEach(function(i){n.has(i)||r.push(new Fm(i))}),r},e.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Se();var n=this._o(t.documents);return this.applyChanges(n,!0)},e.prototype.Ro=function(){return Ks.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,this.ao===0)},e}(),sT=function(e,t,n){this.query=e,this.targetId=t,this.view=n},uT=function(e){this.key=e,this.bo=!1},aT=function(){function e(t,n,r,i,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.vo={},this.Po=new Ai(function(u){return Bg(u)},Po),this.Vo=new Map,this.So=new Set,this.Do=new ft(H.comparator),this.Co=new Map,this.No=new vl,this.xo={},this.ko=new Map,this.Fo=js.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return this.$o===!0},enumerable:!1,configurable:!0}),e}();function cT(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u;return S(this,function(a){switch(a.label){case 0:return n=Rl(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Bs(n.localStore,dn(t))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Cl(n,t,r,u==="current")];case 3:i=a.sent(),n.isPrimaryClient&&Du(n.remoteStore,s),a.label=4;case 4:return[2,i]}})})}function Cl(e,t,n,r){return C(this,void 0,void 0,function(){var i,o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:return e.Oo=function(f,h,d){return function(g,m,w,v){return C(this,void 0,void 0,function(){var T,E,M;return S(this,function($){switch($.label){case 0:return T=m.view._o(w),T.Nn?[4,qs(g.localStore,m.query,!1).then(function(X){var le=X.documents;return m.view._o(le,T)})]:[3,2];case 1:T=$.sent(),$.label=2;case 2:return E=v&&v.targetChanges.get(m.targetId),M=m.view.applyChanges(T,g.isPrimaryClient,E),[2,(nc(g,m.targetId,M.To),M.snapshot)]}})})}(e,f,h,d)},[4,qs(e.localStore,t,!0)];case 1:return i=l.sent(),o=new Vm(t,i.Bn),s=o._o(i.documents),u=fl.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline"),a=o.applyChanges(s,e.isPrimaryClient,u),nc(e,n,a.To),c=new sT(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),a.snapshot)]}})})}function lT(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:return n=U(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(s){return!Po(s,t)})),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,yi(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),mo(n.remoteStore,r.targetId),vi(n,r.targetId)}).catch(Rr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return vi(n,r.targetId),[4,yi(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function fT(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:r=Ol(e),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,function(a,c){var l,f=U(a),h=Et.now(),d=c.reduce(function(g,m){return g.add(m.key)},Se());return f.persistence.runTransaction("Locally write mutations","readwrite",function(g){return f.Mn.pn(g,d).next(function(m){l=m;for(var w=[],v=0,T=c;v<T.length;v++){var E=T[v],M=FE(E,l.get(E.key));M!=null&&w.push(new Qn(E.key,M,Fg(M.value.mapValue),ut.exists(!0)))}return f._n.addMutationBatch(g,h,w,c)})}).then(function(g){return g.applyToLocalDocumentSet(l),{batchId:g.batchId,changes:l}})}(r.localStore,t)];case 2:return i=u.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(a,c,l){var f=a.xo[a.currentUser.toKey()];f||(f=new ft(se)),f=f.insert(c,l),a.xo[a.currentUser.toKey()]=f}(r,i.batchId,n),[4,Xn(r,i.changes)];case 3:return u.sent(),[4,Ni(r.remoteStore)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Di(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function jm(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:n=U(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,AI(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach(function(o,s){var u=n.Co.get(s);u&&(Y(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?u.bo=!0:o.modifiedDocuments.size>0?Y(u.bo):o.removedDocuments.size>0&&(Y(u.bo),u.bo=!1))}),[4,Xn(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Rr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function qh(e,t,n){var r=U(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){var i=[];r.Po.forEach(function(o,s){var u=s.view.zr(t);u.snapshot&&i.push(u.snapshot)}),function(o,s){var u=U(o);u.onlineState=s;var a=!1;u.queries.forEach(function(c,l){for(var f=0,h=l.listeners;f<h.length;f++)h[f].zr(s)&&(a=!0)}),a&&Sl(u)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function hT(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a;return S(this,function(c){switch(c.label){case 0:return(r=U(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(s=(s=new ft(H.comparator)).insert(o,lt.newNoDocument(o,ie.min())),u=Se().add(o),a=new ll(ie.min(),new Map,new He(se),s,u),[4,jm(r,a)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),Dl(r),[3,4];case 2:return[4,yi(r.localStore,t,!1).then(function(){return vi(r,t,n)}).catch(Rr)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function dT(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:n=U(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,SI(n.localStore,t)];case 2:return i=o.sent(),xl(n,r,null),Nl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Xn(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function pT(e,t,n){return C(this,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:r=U(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(s,u){var a=U(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",function(c){var l;return a._n.lookupMutationBatch(c,u).next(function(f){return Y(f!==null),l=f.keys(),a._n.removeMutationBatch(c,f)}).next(function(){return a._n.performConsistencyCheck(c)}).next(function(){return a.Mn.pn(c,l)})})}(r.localStore,t)];case 2:return i=o.sent(),xl(r,t,n),Nl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Xn(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function gT(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s;return S(this,function(u){switch(u.label){case 0:Yn((n=U(e)).remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(a){var c=U(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(l){return c._n.getHighestUnacknowledgedBatchId(l)})}(n.localStore)];case 2:return(r=u.sent())===-1?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=u.sent(),s=Di(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}})})}function Nl(e,t){(e.ko.get(t)||[]).forEach(function(n){n.resolve()}),e.ko.delete(t)}function xl(e,t,n){var r=U(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function vi(e,t,n){n===void 0&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(s){e.No.containsKey(s)||Bm(e,s)})}function Bm(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);n!==null&&(mo(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Dl(e))}function nc(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Fm?(e.No.addReference(o.key,t),mT(e,o)):o instanceof Um?(O("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Bm(e,o.key)):K()}}function mT(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(O("SyncEngine","New document in limbo: "+n),e.So.add(r),Dl(e))}function Dl(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new H(de.fromString(t)),r=e.Fo.next();e.Co.set(r,new uT(n)),e.Do=e.Do.insert(n,r),Du(e.remoteStore,new Nu(dn(Oo(n.path)),r,2,Ot.o))}}function Xn(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s;return S(this,function(u){switch(u.label){case 0:return r=U(e),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(a,c){s.push(r.Oo(c,t,n).then(function(l){if(l){r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l.fromCache?"not-current":"current"),i.push(l);var f=II.Pn(c.targetId,l);o.push(f)}}))}),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(a,c){return C(this,void 0,void 0,function(){var l,f,h,d,g,m,w,v,T;return S(this,function(E){switch(E.label){case 0:l=U(a),E.label=1;case 1:return E.trys.push([1,3,,4]),[4,l.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(M){return R.forEach(c,function($){return R.forEach($.bn,function(X){return l.persistence.referenceDelegate.addReference(M,$.targetId,X)}).next(function(){return R.forEach($.vn,function(X){return l.persistence.referenceDelegate.removeReference(M,$.targetId,X)})})})})];case 2:return E.sent(),[3,4];case 3:if(!Dr(f=E.sent()))throw f;return O("LocalStore","Failed to update sequence numbers: "+f),[3,4];case 4:for(h=0,d=c;h<d.length;h++)g=d[h],m=g.targetId,g.fromCache||(w=l.kn.get(m),v=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(v),l.kn=l.kn.insert(m,T));return[2]}})})}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}})})}function yT(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return(n=U(e)).currentUser.isEqual(t)?[3,3]:(O("SyncEngine","User change. New user:",t.toKey()),[4,Tm(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(o,s){o.ko.forEach(function(u){u.forEach(function(a){a.reject(new x(b.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.ko.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Xn(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function vT(e,t){var n=U(e),r=n.Co.get(t);if(r&&r.bo)return Se().add(r.key);var i=Se(),o=n.Vo.get(t);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Po.get(a);i=i.unionWith(c.view.wo)}return i}function wT(e,t){return C(this,void 0,void 0,function(){var n,r,i;return S(this,function(o){switch(o.label){case 0:return[4,qs((n=U(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&nc(n,t.targetId,i.To),i)]}})})}function bT(e){return C(this,void 0,void 0,function(){var t;return S(this,function(n){return[2,Cm((t=U(e)).localStore).then(function(r){return Xn(t,r)})]})})}function _T(e,t,n,r){return C(this,void 0,void 0,function(){var i,o;return S(this,function(s){switch(s.label){case 0:return[4,function(u,a){var c=U(u),l=U(c._n);return c.persistence.runTransaction("Lookup mutation documents","readonly",function(f){return l.jt(f,a).next(function(h){return h?c.Mn.pn(f,h):R.resolve(null)})})}((i=U(e)).localStore,t)];case 1:return(o=s.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Ni(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(xl(i,t,r||null),Nl(i,t),function(u,a){U(U(u)._n).Gt(a)}(i.localStore,t)):K(),s.label=4;case 4:return[4,Xn(i,o)];case 5:return s.sent(),[3,7];case 6:O("SyncEngine","Cannot apply mutation batch with id: "+t),s.label=7;case 7:return[2]}})})}function ET(e,t){return C(this,void 0,void 0,function(){var n,r,i,o,s,u,a,c;return S(this,function(l){switch(l.label){case 0:return Rl(n=U(e)),Ol(n),t!==!0||n.$o===!0?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,$h(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,tc(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)u=s[o],Du(n.remoteStore,u);return[3,7];case 3:return t!==!1||n.$o===!1?[3,7]:(a=[],c=Promise.resolve(),n.Vo.forEach(function(f,h){n.sharedClientState.isLocalQueryTarget(h)?a.push(h):c=c.then(function(){return vi(n,h),yi(n.localStore,h,!0)}),mo(n.remoteStore,h)}),[4,c]);case 4:return l.sent(),[4,$h(n,a)];case 5:return l.sent(),function(f){var h=U(f);h.Co.forEach(function(d,g){mo(h.remoteStore,g)}),h.No.ts(),h.Co=new Map,h.Do=new ft(H.comparator)}(n),n.$o=!1,[4,tc(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}})})}function $h(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h,d,g,m,w;return S(this,function(v){switch(v.label){case 0:r=U(e),i=[],o=[],s=0,u=t,v.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(l=r.Vo.get(a))&&l.length!==0?[4,Bs(r.localStore,dn(l[0]))]:[3,7]):[3,13];case 2:c=v.sent(),f=0,h=l,v.label=3;case 3:return f<h.length?(d=h[f],g=r.Po.get(d),[4,wT(r,g)]):[3,6];case 4:(m=v.sent()).snapshot&&o.push(m.snapshot),v.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Am(r.localStore,a)];case 8:return w=v.sent(),[4,Bs(r.localStore,w)];case 9:return c=v.sent(),[4,Cl(r,qm(w),a,!1)];case 10:v.sent(),v.label=11;case 11:i.push(c),v.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vo._r(o),i)]}})})}function qm(e){return Vg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function IT(e){var t=U(e);return U(U(t.localStore).persistence).fn()}function TT(e,t,n,r){return C(this,void 0,void 0,function(){var i,o,s;return S(this,function(u){switch(u.label){case 0:return(i=U(e)).$o?(O("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cm(i.localStore)];case 3:return o=u.sent(),s=ll.createSynthesizedRemoteEventForCurrentChange(t,n==="current"),[4,Xn(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,yi(i.localStore,t,!0)];case 6:return u.sent(),vi(i,t,r),[3,8];case 7:K(),u.label=8;case 8:return[2]}})})}function ST(e,t,n){return C(this,void 0,void 0,function(){var r,i,o,s,u,a,c,l,f,h;return S(this,function(d){switch(d.label){case 0:if(!(r=Rl(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(O("SyncEngine","Adding an already active target "+s),[3,5]):[4,Am(r.localStore,s)]):[3,6];case 2:return u=d.sent(),[4,Bs(r.localStore,u)];case 3:return a=d.sent(),[4,Cl(r,qm(u),a.targetId,!1)];case 4:d.sent(),Du(r.remoteStore,a),d.label=5;case 5:return i++,[3,1];case 6:c=function(g){return S(this,function(m){switch(m.label){case 0:return r.Vo.has(g)?[4,yi(r.localStore,g,!1).then(function(){mo(r.remoteStore,g),vi(r,g)}).catch(Rr)]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})},l=0,f=n,d.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Rl(e){var t=U(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=jm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hT.bind(null,t),t.vo._r=iT.bind(null,t.eventManager),t.vo.Mo=oT.bind(null,t.eventManager),t}function Ol(e){var t=U(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pT.bind(null,t),t}var $m=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return C(this,void 0,void 0,function(){return S(this,function(n){switch(n.label){case 0:return this.R=xu(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return n.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},e.prototype.Uo=function(t){return null},e.prototype.Ko=function(t){return Im(this.persistence,new Em,t.initialUser,this.R)},e.prototype.qo=function(t){return new LI(FI.bs,this.R)},e.prototype.Bo=function(t){return new Nm},e.prototype.terminate=function(){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},e}(),Km=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).Qo=n,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return Q(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return i.sent(),[4,xI(this.localStore)];case 2:return i.sent(),[4,this.Qo.initialize(this,n)];case 3:return i.sent(),[4,Ol(this.Qo.syncEngine)];case 4:return i.sent(),[4,Ni(this.Qo.remoteStore)];case 5:return i.sent(),[4,this.persistence.He(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()})];case 6:return i.sent(),[2]}})})},t.prototype.Ko=function(n){return Im(this.persistence,new Em,n.initialUser,this.R)},t.prototype.Uo=function(n){var r=this.persistence.referenceDelegate.garbageCollector;return new mI(r,n.asyncQueue)},t.prototype.qo=function(n){var r=yl(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new EI(this.synchronizeTabs,r,n.clientId,i,n.asyncQueue,xm(),ps(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(n){return new Nm},t}($m),AT=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Qo=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Q(t,e),t.prototype.initialize=function(n){return C(this,void 0,void 0,function(){var r,i=this;return S(this,function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Qo.syncEngine,this.sharedClientState instanceof da?(this.sharedClientState.syncEngine={ui:_T.bind(null,r),ai:TT.bind(null,r),hi:ST.bind(null,r),fn:IT.bind(null,r),ci:bT.bind(null,r)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He(function(s){return C(i,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return[4,ET(this.Qo.syncEngine,s)];case 1:return u.sent(),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):s||this.gcScheduler.stop()),[2]}})})})];case 4:return o.sent(),[2]}})})},t.prototype.Bo=function(n){var r=xm();if(!da.yt(r))throw new x(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=yl(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new da(r,n.asyncQueue,i,n.clientId,n.initialUser)},t}(Km),rc=function(){function e(){}return e.prototype.initialize=function(t,n){return C(this,void 0,void 0,function(){var r=this;return S(this,function(i){switch(i.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(o){return qh(r.syncEngine,o,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yT.bind(null,this.syncEngine),[4,tc(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.createEventManager=function(t){return new rT},e.prototype.createDatastore=function(t){var n,r=xu(t.databaseInfo.databaseId),i=(n=t.databaseInfo,new qI(n));return function(o,s,u){return new HI(o,s,u)}(t.credentials,i,r)},e.prototype.createRemoteStore=function(t){var n,r,i,o,s,u=this;return n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(a){return qh(u.syncEngine,a,0)},s=jh.yt()?new jh:new VI,new GI(n,r,i,o,s)},e.prototype.createSyncEngine=function(t,n){return function(r,i,o,s,u,a,c){var l=new aT(r,i,o,s,u,a);return c&&(l.$o=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)},e.prototype.terminate=function(){return function(t){return C(this,void 0,void 0,function(){var n;return S(this,function(r){switch(r.label){case 0:return n=U(t),O("RemoteStore","RemoteStore shutting down."),n.Or.add(5),[4,Ci(n)];case 1:return r.sent(),n.Lr.shutdown(),n.Br.set("Unknown"),[2]}})})}(this.remoteStore)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),CT=function(){function e(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(t){return C(this,void 0,void 0,function(){var n,r=this;return S(this,function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new x(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(o,s){return C(this,void 0,void 0,function(){var u,a,c,l,f,h;return S(this,function(d){switch(d.label){case 0:return u=U(o),a=go(u.R)+"/documents",c={documents:s.map(function(g){return po(u.R,g)})},[4,u.$i("BatchGetDocuments",a,c)];case 1:return l=d.sent(),f=new Map,l.forEach(function(g){var m=function(w,v){return"found"in v?function(T,E){Y(!!E.found),E.found.name,E.found.updateTime;var M=bn(T,E.found.name),$=yt(E.found.updateTime),X=new Dt({mapValue:{fields:E.found.fields}});return lt.newFoundDocument(M,$,X)}(w,v):"missing"in v?function(T,E){Y(!!E.missing),Y(!!E.readTime);var M=bn(T,E.missing),$=yt(E.readTime);return lt.newNoDocument(M,$)}(w,v):K()}(u.R,g);f.set(m.key.toString(),m)}),h=[],[2,(s.forEach(function(g){var m=f.get(g.toString());Y(!!m),h.push(m)}),h)]}})})}(this.datastore,t)];case 1:return[2,((n=i.sent()).forEach(function(o){return r.recordVersion(o)}),n)]}})})},e.prototype.set=function(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())},e.prototype.delete=function(t){this.write(new Fo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},e.prototype.commit=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,o){var s=H.fromPath(o);n.mutations.push(new cl(s,n.precondition(s)))}),[4,function(i,o){return C(this,void 0,void 0,function(){var s,u,a;return S(this,function(c){switch(c.label){case 0:return s=U(i),u=go(s.R)+"/documents",a={writes:o.map(function(l){return Us(s.R,l)})},[4,s.Ni("Commit",u,a)];case 1:return c.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return r.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(t){var n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw K();n=ie.min()}var r=this.readVersions.get(t.key.toString());if(r){if(!n.isEqual(r))throw new x(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)},e.prototype.precondition=function(t){var n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?ut.updateTime(n):ut.none()},e.prototype.preconditionForUpdate=function(t){var n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(ie.min()))throw new x(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(n)}return ut.exists(!0)},e.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},e.prototype.ensureCommitNotCalled=function(){},e}(),NT=function(){function e(t,n,r,i){this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ec=5,this.Zi=new wl(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var t=this;this.Zi.ji(function(){return C(t,void 0,void 0,function(){var n,r,i=this;return S(this,function(o){return n=new CT(this.datastore),(r=this.sc(n))&&r.then(function(s){i.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){i.deferred.resolve(s)}).catch(function(u){i.ic(u)})})}).catch(function(s){i.ic(s)}),[2]})})})},e.prototype.sc=function(t){try{var n=this.updateFunction(t);return!xr(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}},e.prototype.ic=function(t){var n=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return n.nc(),Promise.resolve()})):this.deferred.reject(t)},e.prototype.rc=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!Xg(n)}return!1},e}(),xT=function(){function e(t,n,r){var i=this;this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Qe.UNAUTHENTICATED,this.clientId=Rg.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(n,function(o){return C(i,void 0,void 0,function(){return S(this,function(s){switch(s.label){case 0:return O("FirestoreClient","Received user=",o.uid),[4,this.credentialListener(o)];case 1:return s.sent(),this.user=o,[2]}})})})}return e.prototype.getConfiguration=function(){return C(this,void 0,void 0,function(){return S(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},e.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new x(b.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return C(t,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:o.sent(),o.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return r=o.sent(),i=Di(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(e,t){return C(this,void 0,void 0,function(){var n,r,i=this;return S(this,function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener(function(s){return C(i,void 0,void 0,function(){return S(this,function(u){switch(u.label){case 0:return r.isEqual(s)?[3,2]:[4,Tm(t.localStore,s)];case 1:u.sent(),r=s,u.label=2;case 2:return[2]}})})}),t.persistence.setDatabaseDeletedListener(function(){return e.terminate()}),e.offlineComponents=t,[2]}})})}function zm(e,t){return C(this,void 0,void 0,function(){var n,r;return S(this,function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,Pl(e)];case 1:return n=i.sent(),O("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener(function(o){return function(s,u){return C(this,void 0,void 0,function(){var a,c;return S(this,function(l){switch(l.label){case 0:return(a=U(s)).asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials"),c=Yn(a),a.Or.add(3),[4,Ci(a)];case 1:return l.sent(),c&&a.Br.set("Unknown"),[4,a.remoteSyncer.handleCredentialChange(u)];case 2:return l.sent(),a.Or.delete(3),[4,Uo(a)];case 3:return l.sent(),[2]}})})}(t.remoteStore,o)}),e.onlineComponents=t,[2]}})})}function Pl(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(O("FirestoreClient","Using default OfflineComponentProvider"),[4,Hm(e,new $m)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function Ou(e){return C(this,void 0,void 0,function(){return S(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(O("FirestoreClient","Using default OnlineComponentProvider"),[4,zm(e,new rc)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function Kh(e){return Pl(e).then(function(t){return t.persistence})}function Gm(e){return Pl(e).then(function(t){return t.localStore})}function Hh(e){return Ou(e).then(function(t){return t.remoteStore})}function Wm(e){return Ou(e).then(function(t){return t.syncEngine})}function wi(e){return C(this,void 0,void 0,function(){var t,n;return S(this,function(r){switch(r.label){case 0:return[4,Ou(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=cT.bind(null,t.syncEngine),n.onUnlisten=lT.bind(null,t.syncEngine),n)]}})})}function zh(e,t,n){var r=this;n===void 0&&(n={});var i=new St;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new Ru({next:function(g){a.enqueueAndForget(function(){return Tl(u,d)});var m=g.docs.has(c);!m&&g.fromCache?f.reject(new x(b.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&l&&l.source==="server"?f.reject(new x(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Al(Oo(c.path),h,{includeMetadataChanges:!0,so:!0});return Il(u,d)},[4,wi(e)];case 1:return[2,o.apply(void 0,[s.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}function Gh(e,t,n){var r=this;n===void 0&&(n={});var i=new St;return e.asyncQueue.enqueueAndForget(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return o=function(u,a,c,l,f){var h=new Ru({next:function(g){a.enqueueAndForget(function(){return Tl(u,d)}),g.fromCache&&l.source==="server"?f.reject(new x(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(g)},error:function(g){return f.reject(g)}}),d=new Al(c,h,{includeMetadataChanges:!0,so:!0});return Il(u,d)},[4,wi(e)];case 1:return[2,o.apply(void 0,[s.sent(),e.asyncQueue,t,n,i])]}})})}),i.promise}var DT=function(e,t,n,r,i,o,s,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u},Hs=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Wh=new Map,Qm=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Qh=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){this.changeListener=n,t.enqueueRetryable(function(){return n(Qe.UNAUTHENTICATED)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),RT=function(){function e(t){this.token=t,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(t,n){var r=this;this.changeListener=n,t.enqueueRetryable(function(){return n(r.token.user)})},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),OT=function(){function e(t){var n=this;this.currentUser=Qe.UNAUTHENTICATED,this.oc=new St,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};var r=function(i){O("FirebaseCredentialsProvider","Auth detected"),n.auth=i,n.auth.addAuthTokenListener(n.uc)};t.onInit(function(i){return r(i)}),setTimeout(function(){if(!n.auth){var i=t.getImmediate({optional:!0});i?r(i):(O("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve())}},0)}return e.prototype.getToken=function(){var t=this,n=this.cc,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.cc!==n?(O("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(Y(typeof i.accessToken=="string"),new Qm(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(t,n){var r=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return C(r,void 0,void 0,function(){return S(this,function(i){switch(i.label){case 0:return[4,this.oc.promise];case 1:return i.sent(),[4,n(this.currentUser)];case 2:return i.sent(),this.changeListener=n,[2]}})})})},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Y(t===null||typeof t=="string"),new Qe(t)},e}(),PT=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},n=this.hc.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),e}(),kT=function(){function e(t,n,r){this.hc=t,this.lc=n,this.fc=r}return e.prototype.getToken=function(){return Promise.resolve(new PT(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(t,n){t.enqueueRetryable(function(){return n(Qe.FIRST_PARTY)})},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(e,t,n){if(!n)throw new x(b.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Ll(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new x(b.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ym(e,t,n,r){if(t===!0&&r===!0)throw new x(b.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Yh(e){if(!H.isDocumentKey(e))throw new x(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Xh(e){if(H.isDocumentKey(e))throw new x(b.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Pu(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":K()}function pe(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new x(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Pu(e);throw new x(b.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Jh(e,t){if(t<=0)throw new x(b.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zh=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new x(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new x(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ym("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},e}(),yo=function(){function e(t,n){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zh({}),this._settingsFrozen=!1,t instanceof Hs?(this._databaseId=t,this._credentials=new Qh):(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new x(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(r.options.projectId)}(t),this._credentials=new OT(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return this._terminateTask!==void 0},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(t){if(this._settingsFrozen)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zh(t),t.credentials!==void 0&&(this._credentials=function(n){if(!n)return new Qh;switch(n.type){case"gapi":var r=n.client;return Y(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new kT(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new x(b.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return t=this,(n=Wh.get(t))&&(O("ComponentProvider","Removing Datastore"),Wh.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),Re=function(){function e(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new qn(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),kt=function(){function e(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),qn=function(e){function t(n,r,i){var o=this;return(o=e.call(this,n,r,Oo(i))||this)._path=i,o.type="collection",o}return Q(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._path.popLast();return n.isEmpty()?null:new Re(this.firestore,null,new H(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this._path)},t}(kt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=je(e),kl("collection","path",t),e instanceof yo)return Xh(n=de.fromString.apply(de,Pe([t],r))),new qn(e,null,n);if(!(e instanceof Re||e instanceof qn))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Xh(n=de.fromString.apply(de,Pe([e.path],r)).child(de.fromString(t))),new qn(e.firestore,null,n)}function gs(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=je(e),arguments.length===1&&(t=Rg.u()),kl("doc","path",t),e instanceof yo)return Yh(n=de.fromString.apply(de,Pe([t],r))),new Re(e,null,new H(n));if(!(e instanceof Re||e instanceof qn))throw new x(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Yh(n=e._path.child(de.fromString.apply(de,Pe([t],r)))),new Re(e.firestore,e instanceof qn?e.converter:null,new H(n))}function Jm(e,t){return e=je(e),t=je(t),(e instanceof Re||e instanceof qn)&&(t instanceof Re||t instanceof qn)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Zm(e,t){return e=je(e),t=je(t),e instanceof kt&&t instanceof kt&&e.firestore===t.firestore&&Po(e._query,t._query)&&e.converter===t.converter}var LT=function(){function e(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new wl(this,"async_queue_retry"),this.Ic=function(){var r=ps();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Zi.Gi()};var n=ps();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(t){this.enqueue(t)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},e.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var n=ps();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(t){var n=this;if(this.Ac(),this._c)return new Promise(function(){});var r=new St;return this.Rc(function(){return n._c&&n.Ec?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)}).then(function(){return r.promise})},e.prototype.enqueueRetryable=function(t){var n=this;this.enqueueAndForget(function(){return n.wc.push(t),n.bc()})},e.prototype.bc=function(){return C(this,void 0,void 0,function(){var t,n=this;return S(this,function(r){switch(r.label){case 0:if(this.wc.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return r.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Dr(t=r.sent()))throw t;return O("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return n.bc()}),r.label=5;case 5:return[2]}})})},e.prototype.Rc=function(t){var n=this,r=this.dc.then(function(){return n.gc=!0,t().catch(function(i){throw n.yc=i,n.gc=!1,Ve("INTERNAL UNHANDLED ERROR: ",function(o){var s=o.message||"";return o.stack&&(s=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),s}(i)),i}).then(function(i){return n.gc=!1,i})});return this.dc=r,r},e.prototype.enqueueAfterDelay=function(t,n,r){var i=this;this.Ac(),this.Tc.indexOf(t)>-1&&(n=0);var o=tT.createAndSchedule(this,t,n,r,function(s){return i.vc(s)});return this.mc.push(o),o},e.prototype.Ac=function(){this.yc&&K()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return C(this,void 0,void 0,function(){var t;return S(this,function(n){switch(n.label){case 0:return[4,t=this.dc];case 1:n.sent(),n.label=2;case 2:if(t!==this.dc)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.Vc=function(t){for(var n=0,r=this.mc;n<r.length;n++)if(r[n].timerId===t)return!0;return!1},e.prototype.Sc=function(t){var n=this;return this.Pc().then(function(){n.mc.sort(function(s,u){return s.targetTimeMs-u.targetTimeMs});for(var r=0,i=n.mc;r<i.length;r++){var o=i[r];if(o.skipDelay(),t!=="all"&&o.timerId===t)break}return n.Pc()})},e.prototype.Dc=function(t){this.Tc.push(t)},e.prototype.vc=function(t){var n=this.mc.indexOf(t);this.mc.splice(n,1)},e}();function bi(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,o=["next","error","complete"];i<o.length;i++){var s=o[i];if(s in r&&typeof r[s]=="function")return!0}return!1}(e)}var MT=-1,Ke=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).type="firestore",i._queue=new LT,i._persistenceKey="name"in n?n.name:"[DEFAULT]",i}return Q(t,e),t.prototype._terminate=function(){return this._firestoreClient||ey(this),this._firestoreClient.terminate()},t}(yo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(e){return e._firestoreClient||ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ey(e){var t,n=e._freezeSettings(),r=function(i,o,s,u){return new DT(i,o,s,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new xT(e._credentials,e._queue,r)}function ed(e,t,n){var r=this,i=new St;return e.asyncQueue.enqueue(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,Hm(e,n)];case 1:return s.sent(),[4,zm(e,t)];case 2:return s.sent(),i.resolve(),[3,4];case 3:if(!function(u){return u.name==="FirebaseError"?u.code===b.FAILED_PRECONDITION||u.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(o=s.sent()))throw o;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),i.reject(o),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function td(e){if(e._initialized||e._terminated)throw new x(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new x(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}return e.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},e}(),Tr=function(){function e(t){this._byteString=t}return e.fromBase64String=function(t){try{return new e(Tt.fromBase64String(t))}catch(n){throw new x(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Tt.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},e}(),Or=function(e){this._methodName=e},ku=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new x(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new x(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(t){return se(this._lat,t._lat)||se(this._long,t._long)},e}(),FT=/^__.*__$/,UT=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return this.fieldMask!==null?new Qn(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mo(t,this.data,n,this.fieldTransforms)},e}(),ty=function(){function e(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}return e.prototype.toMutation=function(t,n){return new Qn(t,this.data,this.fieldMask,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var ry=function(){function e(t,n,r,i,o,s){this.settings=t,this.databaseId=n,this.R=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Cc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.$c(t),i},e.prototype.Oc=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xc({path:r,Fc:!1});return i.Cc(),i},e.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(t){return zs(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(t){return this.fieldMask.find(function(n){return t.isPrefixOf(n)})!==void 0||this.fieldTransforms.find(function(n){return t.isPrefixOf(n.field)})!==void 0},e.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},e.prototype.$c=function(t){if(t.length===0)throw this.Lc("Document fields must not be empty");if(ny(this.Nc)&&FT.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),VT=function(){function e(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.R=r||xu(t)}return e.prototype.Uc=function(t,n,r,i){return i===void 0&&(i=!1),new ry({Nc:t,methodName:n,qc:r,path:en.emptyPath(),Fc:!1,Bc:i},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function Pr(e){var t=e._freezeSettings(),n=xu(e._databaseId);return new VT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lu(e,t,n,r,i,o){o===void 0&&(o={});var s=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);Vl("Data must be an object, but it was:",s,r);var u,a,c=sy(r,s);if(o.merge)u=new si(s.fieldMask),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var d=ic(t,h[f],n);if(!s.contains(d))throw new x(b.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");ay(l,d)||l.push(d)}u=new si(l),a=s.fieldTransforms.filter(function(g){return u.covers(g.field)})}else u=null,a=s.fieldTransforms;return new UT(new Dt(c),u,a)}var Ml=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype._toFieldTransform=function(n){if(n.Nc!==2)throw n.Nc===1?n.Lc(this._methodName+"() can only appear at the top level of your update data"):n.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.fieldMask.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(Or);function iy(e,t,n){return new ry({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var jT=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype._toFieldTransform=function(n){return new Lo(n.path,new li)},t.prototype.isEqual=function(n){return n instanceof t},t}(Or),BT=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=iy(this,n,!0),i=this.Kc.map(function(s){return kr(s,r)}),o=new Er(i);return new Lo(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(Or),qT=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Kc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=iy(this,n,!0),i=this.Kc.map(function(s){return kr(s,r)}),o=new Ir(i);return new Lo(n.path,o)},t.prototype.isEqual=function(n){return this===n},t}(Or),$T=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).Qc=r,i}return Q(t,e),t.prototype._toFieldTransform=function(n){var r=new fi(n.R,Hg(n.R,this.Qc));return new Lo(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(Or);function Fl(e,t,n,r){var i=e.Uc(1,t,n);Vl("Data must be an object, but it was:",i,r);var o=[],s=Dt.empty();Nr(r,function(a,c){var l=jl(t,a,n);c=je(c);var f=i.Oc(l);if(c instanceof Ml)o.push(l);else{var h=kr(c,f);h!=null&&(o.push(l),s.set(l,h))}});var u=new si(o);return new ty(s,u,i.fieldTransforms)}function Ul(e,t,n,r,i,o){var s=e.Uc(1,t,n),u=[ic(t,r,n)],a=[i];if(o.length%2!=0)throw new x(b.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(ic(t,o[c])),a.push(o[c+1]);for(var l=[],f=Dt.empty(),h=u.length-1;h>=0;--h)if(!ay(l,u[h])){var d=u[h],g=a[h];g=je(g);var m=s.Oc(d);if(g instanceof Ml)l.push(d);else{var w=kr(g,m);w!=null&&(l.push(d),f.set(d,w))}}var v=new si(l);return new ty(f,v,s.fieldTransforms)}function oy(e,t,n,r){return r===void 0&&(r=!1),kr(n,e.Uc(r?4:3,t))}function kr(e,t){if(uy(e=je(e)))return Vl("Unsupported field value:",t,e),sy(e,t);if(e instanceof Or)return function(n,r){if(!ny(r.Nc))throw r.Lc(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.Lc(n._methodName+"() is not currently supported inside arrays");var i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&t.Nc!==4)throw t.Lc("Nested arrays are not supported");return function(n,r){for(var i=[],o=0,s=0,u=n;s<u.length;s++){var a=kr(u[s],r.Mc(o));a==null&&(a={nullValue:"NULL_VALUE"}),i.push(a),o++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if((n=je(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Hg(r.R,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=Et.fromDate(n);return{timestampValue:ho(r.R,i)}}if(n instanceof Et)return i=new Et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:ho(r.R,i)};if(n instanceof ku)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Tr)return{bytesValue:tm(r.R,n._byteString)};if(n instanceof Re){i=r.databaseId;var o=n.firestore._databaseId;if(!o.isEqual(i))throw r.Lc("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:hl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Lc("Unsupported field value: "+Pu(n))}(e,t)}function sy(e,t){var n={};return Pg(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nr(e,function(r,i){var o=kr(i,t.kc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function uy(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Et||e instanceof ku||e instanceof Tr||e instanceof Re||e instanceof Or)}function Vl(e,t,n){if(!uy(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=Pu(n);throw r==="an object"?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}}function ic(e,t,n){if((t=je(t))instanceof ln)return t._internalPath;if(typeof t=="string")return jl(e,t);throw zs("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var KT=new RegExp("[~\\*/\\[\\]]");function jl(e,t,n){if(t.search(KT)>=0)throw zs("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(ln.bind.apply(ln,Pe([void 0],t.split("."))))()._internalPath}catch{throw zs("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function zs(e,t,n,r,i){var o=r&&!r.isEmpty(),s=i!==void 0,u="Function "+t+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new x(b.INVALID_ARGUMENT,(u+=". ")+e+a)}function ay(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vo=function(){function e(t,n,r,i,o){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Re(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this._document!==null},e.prototype.data=function(){if(this._document){if(this._converter){var t=new HT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(t){if(this._document){var n=this._document.data.field(Gs("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}},e}(),HT=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(vo);function Gs(e,t){return typeof t=="string"?jl(e,t):t instanceof ln?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),En=function(e){function t(n,r,i,o,s,u){var a=this;return(a=e.call(this,n,r,i,o,u)||this)._firestore=n,a._firestoreImpl=n,a.metadata=s,a}return Q(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this._document){if(this._converter){var r=new Gi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this._document){var i=this._document.data.field(Gs("DocumentSnapshot.get",n));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}},t}(vo),Gi=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(En),Fn=function(){function e(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new fr(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._snapshot.docs.forEach(function(i){t.call(n,new Gi(r._firestore,r._userDataWriter,i.key,i,new fr(r._snapshot.mutatedKeys.has(i.key),r._snapshot.fromCache),r.query.converter))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new x(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){var o=0;return r._snapshot.docChanges.map(function(u){return{type:"added",doc:new Gi(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}})}var s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(function(u){return i||u.type!==3}).map(function(u){var a=new Gi(r._firestore,r._userDataWriter,u.doc.key,u.doc,new fr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,l=-1;return u.type!==0&&(c=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(l=(s=s.add(u.doc)).indexOf(u.doc.key)),{type:zT(u.type),doc:a,oldIndex:c,newIndex:l}})}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges},e}();function zT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function cy(e,t){return e instanceof En&&t instanceof En?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Fn&&t instanceof Fn&&e._firestore===t._firestore&&Zm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(e){if(Fs(e)&&e.explicitOrderBy.length===0)throw new x(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vo=function(){};function Rn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var GT=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).jc=n,o.Wc=r,o.Gc=i,o.type="where",o}return Q(t,e),t.prototype._apply=function(n){var r=Pr(n.firestore),i=function(o,s,u,a,c,l,f){var h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new x(b.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+l+"' queries on FieldPath.documentId().");if(l==="in"||l==="not-in"){sd(f,l);for(var d=[],g=0,m=f;g<m.length;g++){var w=m[g];d.push(od(a,o,w))}h={arrayValue:{values:d}}}else h=od(a,o,f)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||sd(f,l),h=oy(u,"where",f,l==="in"||l==="not-in");var v=Pt.create(c,l,h);return function(T,E){if(E.g()){var M=ul(T);if(M!==null&&!M.isEqual(E.field))throw new x(b.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+M.toString()+"' and '"+E.field.toString()+"'");var $=sl(T);$!==null&&hy(T,E.field,$)}var X=function(le,te){for(var _e=0,ye=le.filters;_e<ye.length;_e++){var qe=ye[_e];if(te.indexOf(qe.op)>=0)return qe.op}return null}(T,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(E.op));if(X!==null)throw X===E.op?new x(b.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+E.op.toString()+"' filter."):new x(b.INVALID_ARGUMENT,"Invalid query. You cannot use '"+E.op.toString()+"' filters with '"+X.toString()+"' filters.")}(o,v),v}(n._query,0,r,n.firestore._databaseId,this.jc,this.Wc,this.Gc);return new kt(n.firestore,n.converter,function(o,s){var u=o.filters.concat([s]);return new An(o.path,o.collectionGroup,o.explicitOrderBy.slice(),u,o.limit,o.limitType,o.startAt,o.endAt)}(n._query,i))},t}(Vo),WT=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jc=n,i.zc=r,i.type="orderBy",i}return Q(t,e),t.prototype._apply=function(n){var r=function(i,o,s){if(i.startAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var u=new Jr(o,s);return function(a,c){if(sl(a)===null){var l=ul(a);l!==null&&hy(a,l,c.field)}}(i,u),u}(n._query,this.jc,this.zc);return new kt(n.firestore,n.converter,function(i,o){var s=i.explicitOrderBy.concat([o]);return new An(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n._query,r))},t}(Vo),nd=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Hc=r,o.Jc=i,o}return Q(t,e),t.prototype._apply=function(n){return new kt(n.firestore,n.converter,jg(n._query,this.Hc,this.Jc))},t}(Vo),rd=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return Q(t,e),t.prototype._apply=function(n){var r=fy(n,this.type,this.Yc,this.Xc);return new kt(n.firestore,n.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(n._query,r))},t}(Vo),id=function(e){function t(n,r,i){var o=this;return(o=e.call(this)||this).type=n,o.Yc=r,o.Xc=i,o}return Q(t,e),t.prototype._apply=function(n){var r=fy(n,this.type,this.Yc,this.Xc);return new kt(n.firestore,n.converter,function(i,o){return new An(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(n._query,r))},t}(Vo);function fy(e,t,n,r){if(n[0]=je(n[0]),n[0]instanceof vo)return function(o,s,u,a,c){if(!a)throw new x(b.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+u+"().");for(var l=[],f=0,h=ci(o);f<h.length;f++){var d=h[f];if(d.field.isKeyField())l.push(ks(s,a.key));else{var g=a.data.field(d.field);if(rl(g))throw new x(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){var m=d.field.canonicalString();throw new x(b.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+m+"' (used as the orderBy) does not exist.")}l.push(g)}}return new fo(l,c)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Pr(e.firestore);return function(o,s,u,a,c,l){var f=o.explicitOrderBy;if(c.length>f.length)throw new x(b.INVALID_ARGUMENT,"Too many arguments provided to "+a+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var h=[],d=0;d<c.length;d++){var g=c[d];if(f[d].field.isKeyField()){if(typeof g!="string")throw new x(b.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+a+"(), but got a "+typeof g);if(!al(o)&&g.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+a+"() must be a plain document ID, but '"+g+"' contains a slash.");var m=o.path.child(de.fromString(g));if(!H.isDocumentKey(m))throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+a+"() must result in a valid document path, but '"+m+"' is not because it contains an odd number of segments.");var w=new H(m);h.push(ks(s,w))}else{var v=oy(u,a,g);h.push(v)}}return new fo(h,l)}(e._query,e.firestore._databaseId,i,t,n,r)}function od(e,t,n){if(typeof(n=je(n))=="string"){if(n==="")throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!al(t)&&n.indexOf("/")!==-1)throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(de.fromString(n));if(!H.isDocumentKey(r))throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ks(e,new H(r))}if(n instanceof Re)return ks(e,n._key);throw new x(b.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Pu(n)+".")}function sd(e,t){if(!Array.isArray(e)||e.length===0)throw new x(b.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new x(b.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function hy(e,t,n){if(!n.isEqual(t))throw new x(b.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bl=function(){function e(){}return e.prototype.convertValue=function(t,n){switch(n===void 0&&(n="none"),_r(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ue(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ui(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw K()}},e.prototype.convertObject=function(t,n){var r=this,i={};return Nr(t.fields,function(o,s){i[o]=r.convertValue(s,n)}),i},e.prototype.convertGeoPoint=function(t){return new ku(Ue(t.latitude),Ue(t.longitude))},e.prototype.convertArray=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.convertValue(i,n)})},e.prototype.convertServerTimestamp=function(t,n){switch(n){case"previous":var r=Lg(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(co(t));default:return null}},e.prototype.convertTimestamp=function(t){var n=Hn(t);return new Et(n.seconds,n.nanos)},e.prototype.convertDocumentKey=function(t,n){var r=de.fromString(t);Y(cm(r));var i=new Hs(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||Ve("Document "+o+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),o},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var QT=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new Tr(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Re(this.firestore,null,r)},t}(Bl),YT=function(){function e(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pr(t)}return e.prototype.set=function(t,n,r){this._verifyNotCommitted();var i=Un(t,this._firestore),o=Mu(i.converter,n,r),s=Lu(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,ut.none())),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var s,u=Un(t,this._firestore);return s=typeof(n=je(n))=="string"||n instanceof ln?Ul(this._dataReader,"WriteBatch.update",u._key,n,r,i):Fl(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(s.toMutation(u._key,ut.exists(!0))),this},e.prototype.delete=function(t){this._verifyNotCommitted();var n=Un(t,this._firestore);return this._mutations=this._mutations.concat(new Fo(n._key,ut.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new x(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(e,t){if((e=je(e)).firestore!==t)throw new x(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new Tr(n)},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return new Re(this.firestore,null,r)},t}(Bl);function ud(e,t,n){e=pe(e,Re);var r=pe(e.firestore,Ke),i=Mu(e.converter,t,n);return jo(r,[Lu(Pr(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ut.none())])}function ad(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=pe(e,Re);var o=pe(e.firestore,Ke),s=Pr(o);return jo(o,[(typeof(t=je(t))=="string"||t instanceof ln?Ul(s,"updateDoc",e._key,t,n,r):Fl(s,"updateDoc",e._key,t)).toMutation(e._key,ut.exists(!0))])}function dy(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=je(e);var s={includeMetadataChanges:!1},u=0;typeof i[u]!="object"||bi(i[u])||(s=i[u],u++);var a,c,l,f={includeMetadataChanges:s.includeMetadataChanges};if(bi(i[u])){var h=i[u];i[u]=(t=h.next)===null||t===void 0?void 0:t.bind(h),i[u+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),i[u+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}if(e instanceof Re)c=pe(e.firestore,Ke),l=Oo(e._key.path),a={next:function(m){i[u]&&i[u](oc(c,e,m))},error:i[u+1],complete:i[u+2]};else{var d=pe(e,kt);c=pe(d.firestore,Ke),l=d._query;var g=new mr(c);a={next:function(m){i[u]&&i[u](new Fn(c,g,d,m))},error:i[u+1],complete:i[u+2]},ly(e._query)}return function(m,w,v,T){var E=this,M=new Ru(T),$=new Al(w,M,v);return m.asyncQueue.enqueueAndForget(function(){return C(E,void 0,void 0,function(){var X;return S(this,function(le){switch(le.label){case 0:return X=Il,[4,wi(m)];case 1:return[2,X.apply(void 0,[le.sent(),$])]}})})}),function(){M.Wo(),m.asyncQueue.enqueueAndForget(function(){return C(E,void 0,void 0,function(){var X;return S(this,function(le){switch(le.label){case 0:return X=Tl,[4,wi(m)];case 1:return[2,X.apply(void 0,[le.sent(),$])]}})})})}}(it(c),l,f,a)}function jo(e,t){return function(n,r){var i=this,o=new St;return n.asyncQueue.enqueueAndForget(function(){return C(i,void 0,void 0,function(){var s;return S(this,function(u){switch(u.label){case 0:return s=fT,[4,Wm(n)];case 1:return[2,s.apply(void 0,[u.sent(),r,o])]}})})}),o.promise}(it(e),t)}function oc(e,t,n){var r=n.docs.get(t._key),i=new mr(e);return new En(e,i,t._key,r,new fr(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XT=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this)._firestore=n,i}return Q(t,e),t.prototype.get=function(n){var r=this,i=Un(n,this._firestore),o=new mr(this._firestore);return e.prototype.get.call(this,n).then(function(s){return new En(r._firestore,o,i._key,s._document,new fr(!1,!1),i.converter)})},t}(function(){function e(t,n){this._firestore=t,this._transaction=n,this._dataReader=Pr(t)}return e.prototype.get=function(t){var n=this,r=Un(t,this._firestore),i=new QT(this._firestore);return this._transaction.lookup([r._key]).then(function(o){if(!o||o.length!==1)return K();var s=o[0];if(s.isFoundDocument())return new vo(n._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new vo(n._firestore,i,r._key,null,r.converter);throw K()})},e.prototype.set=function(t,n,r){var i=Un(t,this._firestore),o=Mu(i.converter,n,r),s=Lu(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this},e.prototype.update=function(t,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s,u=Un(t,this._firestore);return s=typeof(n=je(n))=="string"||n instanceof ln?Ul(this._dataReader,"Transaction.update",u._key,n,r,i):Fl(this._dataReader,"Transaction.update",u._key,n),this._transaction.update(u._key,s),this},e.prototype.delete=function(t){var n=Un(t,this._firestore);return this._transaction.delete(n._key),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){if(typeof Uint8Array>"u")throw new x(b.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ld(){if(typeof atob>"u")throw new x(b.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var py=function(){function e(t){this._delegate=t}return e.fromBase64String=function(t){return ld(),new e(Tr.fromBase64String(t))},e.fromUint8Array=function(t){return cd(),new e(Tr.fromUint8Array(t))},e.prototype.toBase64=function(){return ld(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return cd(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),JT=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){td(r=pe(r,Ke));var o=it(r),s=r._freezeSettings(),u=new rc;return ed(o,u,new Km(u,s.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t._delegate,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){td(n=pe(n,Ke));var r=it(n),i=n._freezeSettings(),o=new rc;return ed(r,o,new AT(o,i.cacheSizeBytes))}(t._delegate)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n._initialized&&!n._terminated)throw new x(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new St;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return C(r,void 0,void 0,function(){var o;return S(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(u){return C(this,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return pi.yt()?(a=u+"main",[4,pi.delete(a)]):[2,Promise.resolve()];case 1:return c.sent(),[2]}})})}(yl(n._databaseId,n._persistenceKey))];case 1:return s.sent(),i.resolve(),[3,3];case 2:return o=s.sent(),i.reject(o),[3,3];case 3:return[2]}})})}),i.promise}(t._delegate)},e}(),gy=function(){function e(t,n,r){var i=this;this._delegate=n,this.Zc=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Hs||(this.tu=t)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){var n=this._delegate._getSettings();t.merge||n.host===t.host||Os("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},n),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,n,r){r===void 0&&(r={}),function(i,o,s,u){var a;u===void 0&&(u={});var c=(i=pe(i,yo))._getSettings();if(c.host!=="firestore.googleapis.com"&&c.host!==o&&Os("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:o+":"+s,ssl:!1})),u.mockUserToken){var l,f;if(typeof u.mockUserToken=="string")l=u.mockUserToken,f=Qe.MOCK_USER;else{l=bb(u.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);var h=u.mockUserToken.sub||u.mockUserToken.user_id;if(!h)throw new x(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qe(h)}i._credentials=new RT(new Qm(l,f))}}(this._delegate,t,n,r)},e.prototype.enableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return[4,Kh(t)];case 1:return r=o.sent(),[4,Hh(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!0),function(s){var u=U(s);return u.Or.delete(0),Uo(u)}(i))]}})})})}(it(pe(this._delegate,Ke)))},e.prototype.disableNetwork=function(){return function(t){var n=this;return t.asyncQueue.enqueue(function(){return C(n,void 0,void 0,function(){var r,i;return S(this,function(o){switch(o.label){case 0:return[4,Kh(t)];case 1:return r=o.sent(),[4,Hh(t)];case 2:return i=o.sent(),[2,(r.setNetworkEnabled(!1),function(s){return C(this,void 0,void 0,function(){var u;return S(this,function(a){switch(a.label){case 0:return(u=U(s)).Or.add(0),[4,Ci(u)];case 1:return a.sent(),u.Br.set("Offline"),[2]}})})}(i))]}})})})}(it(pe(this._delegate,Ke)))},e.prototype.enablePersistence=function(t){var n=!1,r=!1;return t&&Ym("synchronizeTabs",n=!!t.synchronizeTabs,"experimentalForceOwningTab",r=!!t.experimentalForceOwningTab),n?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,r)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new St;return t.asyncQueue.enqueueAndForget(function(){return C(n,void 0,void 0,function(){var i;return S(this,function(o){switch(o.label){case 0:return i=gT,[4,Wm(t)];case 1:return[2,i.apply(void 0,[o.sent(),r])]}})})}),r.promise}(it(pe(this._delegate,Ke)))},e.prototype.onSnapshotsInSync=function(t){return function(n,r){return function(i,o){var s=this,u=new Ru(o);return i.asyncQueue.enqueueAndForget(function(){return C(s,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return a=function(l,f){U(l).Gr.add(f),f.next()},[4,wi(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})}),function(){u.Wo(),i.asyncQueue.enqueueAndForget(function(){return C(s,void 0,void 0,function(){var a;return S(this,function(c){switch(c.label){case 0:return a=function(l,f){U(l).Gr.delete(f)},[4,wi(i)];case 1:return[2,a.apply(void 0,[c.sent(),u])]}})})})}}(it(n=pe(n,Ke)),bi(r)?r:{next:r})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new x(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ws(this,Xm(this._delegate,t))}catch(n){throw dt(n,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new yr(this,gs(this._delegate,t))}catch(n){throw dt(n,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Vu(this,function(n,r){if(n=pe(n,yo),kl("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new x(b.INVALID_ARGUMENT,"Invalid collection ID '"+r+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new kt(n,null,function(i){return new An(de.emptyPath(),i)}(r))}(this._delegate,t))}catch(n){throw dt(n,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var n=this;return function(r,i){return function(o,s){var u=this,a=new St;return o.asyncQueue.enqueueAndForget(function(){return C(u,void 0,void 0,function(){var c;return S(this,function(l){switch(l.label){case 0:return[4,function(f){return Ou(f).then(function(h){return h.datastore})}(o)];case 1:return c=l.sent(),new NT(o.asyncQueue,c,s,a).run(),[2]}})})}),a.promise}(it(r),function(o){return i(new XT(r,o))})}(this._delegate,function(r){return t(new my(n,r))})},e.prototype.batch=function(){var t=this;return it(this._delegate),new yy(new YT(this._delegate,function(n){return jo(t._delegate,n)}))},e.prototype.loadBundle=function(t){throw new x(b.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new x(b.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),Fu=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Q(t,e),t.prototype.convertBytes=function(n){return new py(new Tr(n))},t.prototype.convertReference=function(n){var r=this.convertDocumentKey(n,this.firestore._databaseId);return yr.eu(r,this.firestore,null)},t}(Bl);function ZT(e){var t;t=e,Yt.setLogLevel(t)}var my=function(){function e(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Fu(t)}return e.prototype.get=function(t){var n=this,r=hr(t);return this._delegate.get(r).then(function(i){return new wo(n._firestore,new En(n._firestore._delegate,n._userDataWriter,i._key,i._document,i.metadata,r.converter))})},e.prototype.set=function(t,n,r){var i=hr(t);return r?(Ll("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=hr(t);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Pe([u,n,r],o)),this},e.prototype.delete=function(t){var n=hr(t);return this._delegate.delete(n),this},e}(),yy=function(){function e(t){this._delegate=t}return e.prototype.set=function(t,n,r){var i=hr(t);return r?(Ll("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this},e.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=hr(t);return arguments.length===2?this._delegate.update(u,n):(i=this._delegate).update.apply(i,Pe([u,n,r],o)),this},e.prototype.delete=function(t){var n=hr(t);return this._delegate.delete(n),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),Uu=function(){function e(t,n,r){this._firestore=t,this._userDataWriter=n,this._delegate=r}return e.prototype.fromFirestore=function(t,n){var r=new Gi(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new bo(this._firestore,r),n??{})},e.prototype.toFirestore=function(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Fu(t),n),i.set(n,o)),o},e}();Uu.su=new WeakMap;var yr=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Fu(t)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new x(b.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Re(n._delegate,r,new H(t)))},e.eu=function(t,n,r){return new e(n,new Re(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ws(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Ws(this.firestore,Xm(this._delegate,t))}catch(n){throw dt(n,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return(t=je(t))instanceof Re&&Jm(this._delegate,t)},e.prototype.set=function(t,n){n=Ll("DocumentReference.set",n);try{return n?ud(this._delegate,t,n):ud(this._delegate,t)}catch(r){throw dt(r,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return arguments.length===1?ad(this._delegate,t):ad.apply(void 0,Pe([this._delegate,t,n],r))}catch(o){throw dt(o,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return jo(pe((t=this._delegate).firestore,Ke),[new Fo(t._key,ut.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=vy(n),o=wy(n,function(s){return new wo(t.firestore,new En(t.firestore._delegate,t._userDataWriter,s._key,s._document,s.metadata,t._delegate.converter))});return dy(this._delegate,i,o)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=pe(r,Re);var i=pe(r.firestore,Ke),o=it(i),s=new mr(i);return function(u,a){var c=this,l=new St;return u.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return S(this,function(h){switch(h.label){case 0:return f=function(d,g,m){return C(this,void 0,void 0,function(){var w,v;return S(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,,3]),[4,function(E,M){var $=U(E);return $.persistence.runTransaction("read document","readonly",function(X){return $.Mn.mn(X,M)})}(d,g)];case 1:return(v=T.sent()).isFoundDocument()?m.resolve(v):v.isNoDocument()?m.resolve(null):m.reject(new x(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return w=T.sent(),v=Di(w,"Failed to get document '"+g+" from cache"),m.reject(v),[3,3];case 3:return[2]}})})},[4,Gm(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._key).then(function(u){return new En(i,s,r._key,u,new fr(u!==null&&u.hasLocalMutations,!0),r.converter)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=pe(r,Re);var i=pe(r.firestore,Ke);return zh(it(i),r._key,{source:"server"}).then(function(o){return oc(i,r,o)})}(this._delegate):function(r){r=pe(r,Re);var i=pe(r.firestore,Ke);return zh(it(i),r._key).then(function(o){return oc(i,r,o)})}(this._delegate)).then(function(r){return new wo(n.firestore,new En(n.firestore._delegate,n._userDataWriter,r._key,r._document,r.metadata,n._delegate.converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Uu.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function dt(e,t,n){return e.message=e.message.replace(t,n),e}function vy(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!bi(r))return r}return{}}function wy(e,t){var n,r,i;return{next:function(o){i.next&&i.next(t(o))},error:(n=(i=bi(e[0])?e[0]:bi(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var wo=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"ref",{get:function(){return new yr(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,n){return this._delegate.get(t,n)},e.prototype.isEqual=function(t){return cy(this._delegate,t._delegate)},e}(),bo=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Q(t,e),t.prototype.data=function(n){return this._delegate.data(n)},t}(wo),Vu=function(){function e(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Fu(t)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Rn(this._delegate,function(i,o,s){var u=o,a=Gs("where",i);return new GT(a,u,s)}(t,n,r)))}catch(i){throw dt(i,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Rn(this._delegate,function(r,i){i===void 0&&(i="asc");var o=i,s=Gs("orderBy",r);return new WT(s,o)}(t,n)))}catch(r){throw dt(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Rn(this._delegate,function(n){return Jh("limit",n),new nd("limit",n,"F")}(t)))}catch(n){throw dt(n,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Rn(this._delegate,function(n){return Jh("limitToLast",n),new nd("limitToLast",n,"L")}(t)))}catch(n){throw dt(n,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Rn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rd("startAt",r,!0)}.apply(void 0,t)))}catch(r){throw dt(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Rn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new rd("startAfter",r,!1)}.apply(void 0,t)))}catch(r){throw dt(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Rn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new id("endBefore",r,!0)}.apply(void 0,t)))}catch(r){throw dt(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Rn(this._delegate,function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new id("endAt",r,!1)}.apply(void 0,t)))}catch(r){throw dt(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Zm(this._delegate,t._delegate)},e.prototype.get=function(t){var n=this;return((t==null?void 0:t.source)==="cache"?function(r){r=pe(r,kt);var i=pe(r.firestore,Ke),o=it(i),s=new mr(i);return function(u,a){var c=this,l=new St;return u.asyncQueue.enqueueAndForget(function(){return C(c,void 0,void 0,function(){var f;return S(this,function(h){switch(h.label){case 0:return f=function(d,g,m){return C(this,void 0,void 0,function(){var w,v,T,E,M;return S(this,function($){switch($.label){case 0:return $.trys.push([0,2,,3]),[4,qs(d,g,!0)];case 1:return M=$.sent(),w=new Vm(g,M.Bn),v=w._o(M.documents),T=w.applyChanges(v,!1),m.resolve(T.snapshot),[3,3];case 2:return E=$.sent(),M=Di(E,"Failed to execute query '"+g+" against cache"),m.reject(M),[3,3];case 3:return[2]}})})},[4,Gm(u)];case 1:return[2,f.apply(void 0,[h.sent(),a,l])]}})})}),l.promise}(o,r._query).then(function(u){return new Fn(i,s,r,u)})}(this._delegate):(t==null?void 0:t.source)==="server"?function(r){r=pe(r,kt);var i=pe(r.firestore,Ke),o=it(i),s=new mr(i);return Gh(o,r._query,{source:"server"}).then(function(u){return new Fn(i,s,r,u)})}(this._delegate):function(r){r=pe(r,kt);var i=pe(r.firestore,Ke),o=it(i),s=new mr(i);return ly(r._query),Gh(o,r._query).then(function(u){return new Fn(i,s,r,u)})}(this._delegate)).then(function(r){return new sc(n.firestore,new Fn(n.firestore._delegate,n._userDataWriter,n._delegate,r._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=vy(n),o=wy(n,function(s){return new sc(t.firestore,new Fn(t.firestore._delegate,t._userDataWriter,t._delegate,s._snapshot))});return dy(this._delegate,i,o)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Uu.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),e1=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new bo(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),sc=function(){function e(t,n){this._firestore=t,this._delegate=n}return Object.defineProperty(e.prototype,"query",{get:function(){return new Vu(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(n){return new bo(t._firestore,n)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var n=this;return this._delegate.docChanges(t).map(function(r){return new e1(n._firestore,r)})},e.prototype.forEach=function(t,n){var r=this;this._delegate.forEach(function(i){t.call(n,new bo(r._firestore,i))})},e.prototype.isEqual=function(t){return cy(this._delegate,t._delegate)},e}(),Ws=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i._delegate=r,i}return Q(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this._delegate.parent;return n?new yr(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new yr(this.firestore,n===void 0?gs(this._delegate):gs(this._delegate,n))}catch(r){throw dt(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,o){var s=pe(i.firestore,Ke),u=gs(i),a=Mu(i.converter,o);return jo(s,[Lu(Pr(i.firestore),"addDoc",u._key,a,i.converter!==null,{}).toMutation(u._key,ut.exists(!1))]).then(function(){return u})}(this._delegate,n).then(function(i){return new yr(r.firestore,i)})},t.prototype.isEqual=function(n){return Jm(this._delegate,n._delegate)},t.prototype.withConverter=function(n){return new t(this.firestore,n?this._delegate.withConverter(Uu.nu(this.firestore,n)):this._delegate.withConverter(null))},t}(Vu);function hr(e){return pe(e,Re)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t1=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._delegate=new(ln.bind.apply(ln,Pe([void 0],t)))}return e.documentId=function(){return new e(en.keyField().canonicalString())},e.prototype.isEqual=function(t){return(t=je(t))instanceof ln&&this._delegate._internalPath.isEqual(t._internalPath)},e}(),n1=function(){function e(t){this._delegate=t}return e.serverTimestamp=function(){var t=new jT("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ml("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new BT("arrayUnion",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return new qT("arrayRemove",i)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(r){return new $T("increment",r)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(),r1={Firestore:gy,GeoPoint:ku,Timestamp:Et,Blob:py,Transaction:my,WriteBatch:yy,DocumentReference:yr,DocumentSnapshot:wo,Query:Vu,QueryDocumentSnapshot:bo,QuerySnapshot:sc,CollectionReference:Ws,FieldPath:t1,FieldValue:n1,setLogLevel:ZT,CACHE_SIZE_UNLIMITED:MT};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(e){(function(t,n){t.INTERNAL.registerComponent(new lu("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},r1)))})(e,function(t,n){return new gy(t,new Ke(t,n),new JT)}),e.registerVersion("@firebase/firestore","2.4.1")}i1(Ar);const o1={apiKey:"AIzaSyAOc9wjhdzArS7rhFu1HsjZUIgsoRqEAJ8",authDomain:"udemy-vue-e9d6d.firebaseapp.com",projectId:"udemy-vue-e9d6d",storageBucket:"udemy-vue-e9d6d.appspot.com",messagingSenderId:"749045751515",appId:"1:749045751515:web:77b99d4a45a362dc5476fe",measurementId:"G-2MQR0NE0ZE"};Ar.initializeApp(o1);const ju=Ar.firestore(),s1=Ar.firestore.FieldValue.serverTimestamp,by=()=>{const e=un([]),t=un(null);return{posts:e,error:t,load:async()=>{try{const r=await ju.collection("posts").orderBy("createdAt","desc").get();e.value=r.docs.map(i=>({...i.data(),id:i.id}))}catch(r){t.value=r.message,console.log(t.value)}}}};const u1={},a1={class:"spin"};function c1(e,t,n,r,i,o){return me(),be("div",a1)}const ql=pn(u1,[["render",c1]]),l1=e=>{const t=un([]),n=new Set;return e.forEach(r=>{r.tags.forEach(i=>n.add(i))}),t.value=[...n],{tags:t}};const f1={props:["posts"],setup(e){const{tags:t}=l1(e.posts);return{tags:t}}},h1={class:"tag-cloud"},d1=$e("h3",null,"Tag",-1);function p1(e,t,n,r,i,o){const s=Ut("router-link");return me(),be("div",h1,[d1,(me(!0),be(nt,null,iu(r.tags,u=>(me(),be("div",{key:u},[Ee(s,{to:{name:"Tag",params:{tag:u}}},{default:Ji(()=>[bs(" #"+cn(u),1)]),_:2},1032,["to"])]))),128))])}const _y=pn(f1,[["render",p1]]);const g1={name:"Home",components:{PostList:Ep,Spinner:ql,TagCloud:_y},setup(){const{posts:e,error:t,load:n}=by();return n(),{posts:e,error:t}}},m1={class:"home"},y1=$e("h1",null,"Home",-1),v1={key:0},w1={key:1,class:"layout"},b1={key:2};function _1(e,t,n,r,i,o){const s=Ut("PostList"),u=Ut("TagCloud"),a=Ut("Spinner");return me(),be("div",m1,[y1,r.error?(me(),be("div",v1,cn(r.error),1)):Sc("",!0),r.posts.length?(me(),be("div",w1,[Ee(s,{posts:r.posts},null,8,["posts"]),Ee(u,{posts:r.posts},null,8,["posts"])])):(me(),be("div",b1,[Ee(a)]))])}const E1=pn(g1,[["render",_1]]),I1=e=>{const t=un(null),n=un(null);return{post:t,error:n,load:async()=>{try{const i=await ju.collection("posts").doc(e).get();t.value={...i.data(),id:i.id}}catch(i){n.value=i.message,console.log(n.value)}}}};const T1={props:["id"],components:{Spinner:ql},setup(e){const t=_p(),{post:n,error:r,load:i}=I1(e.id);return i(),{post:n,error:r,handleClick:async()=>{await ju.collection("posts").doc(e.id).delete(),t.push({name:"home"})}}}},S1={key:0},A1={key:1,class:"post"},C1={class:"pre"},N1={key:2};function x1(e,t,n,r,i,o){const s=Ut("Spinner");return me(),be(nt,null,[r.error?(me(),be("div",S1,cn(r.error),1)):Sc("",!0),r.post?(me(),be("div",A1,[$e("h3",null,cn(r.post.title),1),$e("p",C1,cn(r.post.body),1),$e("button",{onClick:t[0]||(t[0]=(...u)=>r.handleClick&&r.handleClick(...u))},"delete post")])):(me(),be("div",N1,[Ee(s)]))],64)}const D1=pn(T1,[["render",x1]]);const R1={setup(){const e=un(""),t=un(""),n=un(""),r=un([]),i=_p();return{title:e,body:t,tag:n,tags:r,handleKeyDown:()=>{console.log(1),r.value.includes(n.value)||(console.log(r[0]),n.value=n.value.replace(/\s/,""),r.value.push(n.value)),n.value=""},handleSubmit:async()=>{const u={title:e.value,body:t.value,tags:r.value,createdAt:s1()};await ju.collection("posts").add(u),i.push({name:"home"})}}}},O1={class:"create"},P1=$e("label",{for:""},"Title:",-1),k1=$e("label",{for:""},"Content:",-1),L1=$e("label",null,"Tags (hit enter to add a tag)",-1),M1=$e("button",null,"Add Post",-1);function F1(e,t,n,r,i,o){return me(),be("div",O1,[$e("form",{onSubmit:t[4]||(t[4]=Ef((...s)=>r.handleSubmit&&r.handleSubmit(...s),["prevent"]))},[P1,Ku($e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>r.title=s),required:""},null,512),[[Qu,r.title]]),k1,Ku($e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.body=s),required:""},null,512),[[Qu,r.body]]),L1,Ku($e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.tag=s),type:"text",onKeydown:t[3]||(t[3]=G0(Ef((...s)=>r.handleKeyDown&&r.handleKeyDown(...s),["prevent"]),["enter"]))},null,544),[[Qu,r.tag]]),(me(!0),be(nt,null,iu(r.tags,s=>(me(),be("div",{key:s,class:"pill"}," #"+cn(s),1))),128)),M1],32)])}const U1=pn(R1,[["render",F1]]);const V1={components:{PostList:Ep,Spinner:ql,TagCloud:_y},setup(){const e=sb(),{posts:t,error:n,load:r}=by();r();const i=bt(()=>t.value.filter(o=>o.tags.includes(e.params.tag)));return{error:n,posts:t,postsWithTag:i}}},j1={class:"tag"},B1={key:0},q1={key:1,class:"layout"},$1={key:2};function K1(e,t,n,r,i,o){const s=Ut("PostList"),u=Ut("TagCloud"),a=Ut("Spinner");return me(),be("div",j1,[r.error?(me(),be("div",B1,cn(r.error),1)):Sc("",!0),r.posts.length?(me(),be("div",q1,[Ee(s,{posts:r.postsWithTag},null,8,["posts"]),Ee(u,{posts:r.posts},null,8,["posts"])])):(me(),be("div",$1,[Ee(a)]))])}const H1=pn(V1,[["render",K1]]),z1={};function G1(e,t,n,r,i,o){return me(),be("h1",null,"Real-time data")}const W1=pn(z1,[["render",G1]]),Q1=ib({history:bw("/"),routes:[{path:"/",name:"home",component:E1},{path:"/posts/:id",name:"Details",component:D1,props:!0},{path:"/create",name:"Create",component:U1},{path:"/tags/:tag",name:"Tag",component:H1},{path:"/realtime",name:"RealTime",component:W1}]});const Ey=Y0(nw);Ey.use(Q1);Ey.mount("#app");
